"classList"in document.createElement("_")||function(r){"use strict";if("Element"in r){var C="classList",i="prototype",e=r.Element[i],s=Object,u=String[i].trim||function(){return this.replace(/^\s+|\s+$/g,"")},c=Array[i].indexOf||function(p){for(var g=0,b=this.length;b>g;g++)if(g in this&&this[g]===p)return g;return-1},t=function(p,g){this.name=p,this.code=DOMException[p],this.message=g},n=function(p,g){if(""===g)throw new t("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(g))throw new t("INVALID_CHARACTER_ERR","String contains an invalid character");return c.call(p,g)},o=function(p){for(var g=u.call(p.getAttribute("class")||""),b=g?g.split(/\s+/):[],E=0,w=b.length;w>E;E++)this.push(b[E]);this._updateClassName=function(){p.setAttribute("class",this.toString())}},l=o[i]=[],d=function(){return new o(this)};if(t[i]=Error[i],l.item=function(p){return this[p]||null},l.contains=function(p){return-1!==n(this,p+="")},l.add=function(){var p,g=arguments,b=0,E=g.length,w=!1;do{-1===n(this,p=g[b]+"")&&(this.push(p),w=!0)}while(++b<E);w&&this._updateClassName()},l.remove=function(){var p,g,b=arguments,E=0,w=b.length,S=!1;do{for(g=n(this,p=b[E]+"");-1!==g;)this.splice(g,1),S=!0,g=n(this,p)}while(++E<w);S&&this._updateClassName()},l.toggle=function(p,g){var b=this.contains(p+=""),E=b?!0!==g&&"remove":!1!==g&&"add";return E&&this[E](p),!0===g||!1===g?g:!b},l.toString=function(){return this.join(" ")},s.defineProperty){var h={get:d,enumerable:!0,configurable:!0};try{s.defineProperty(e,C,h)}catch(p){-2146823252===p.number&&(h.enumerable=!1,s.defineProperty(e,C,h))}}else s[i].__defineGetter__&&e.__defineGetter__(C,d)}}(self),function(r){"use strict";if(r.URL=r.URL||r.webkitURL,r.Blob&&r.URL)try{return void new Blob}catch{}var C=r.BlobBuilder||r.WebKitBlobBuilder||r.MozBlobBuilder||function(e){var s=function(y){return Object.prototype.toString.call(y).match(/^\[object\s(.*)\]$/)[1]},u=function(){this.data=[]},c=function(y,A,k){this.data=y,this.size=y.length,this.type=A,this.encoding=k},t=u.prototype,n=c.prototype,o=e.FileReaderSync,l=function(y){this.code=this[this.name=y]},d="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),h=d.length,p=e.URL||e.webkitURL||e,g=p.createObjectURL,b=p.revokeObjectURL,E=p,w=e.btoa,S=e.atob,N=e.ArrayBuffer,P=e.Uint8Array,q=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(c.fake=n.fake=!0;h--;)l.prototype[d[h]]=h+1;return p.createObjectURL||(E=e.URL=function(y){var A,k=document.createElementNS("http://www.w3.org/1999/xhtml","a");return k.href=y,"origin"in k||("data:"===k.protocol.toLowerCase()?k.origin=null:(A=y.match(q),k.origin=A&&A[1])),k}),E.createObjectURL=function(y){var A,k=y.type;return null===k&&(k="application/octet-stream"),y instanceof c?(A="data:"+k,"base64"===y.encoding?A+";base64,"+y.data:"URI"===y.encoding?A+","+decodeURIComponent(y.data):w?A+";base64,"+w(y.data):A+","+encodeURIComponent(y.data)):g?g.call(p,y):void 0},E.revokeObjectURL=function(y){"data:"!==y.substring(0,5)&&b&&b.call(p,y)},t.append=function(y){var A=this.data;if(P&&(y instanceof N||y instanceof P)){for(var k="",B=new P(y),I=0,H=B.length;H>I;I++)k+=String.fromCharCode(B[I]);A.push(k)}else if("Blob"===s(y)||"File"===s(y)){if(!o)throw new l("NOT_READABLE_ERR");var a=new o;A.push(a.readAsBinaryString(y))}else y instanceof c?"base64"===y.encoding&&S?A.push(S(y.data)):"URI"===y.encoding?A.push(decodeURIComponent(y.data)):"raw"===y.encoding&&A.push(y.data):("string"!=typeof y&&(y+=""),A.push(unescape(encodeURIComponent(y))))},t.getBlob=function(y){return arguments.length||(y=null),new c(this.data.join(""),y,"raw")},t.toString=function(){return"[object BlobBuilder]"},n.slice=function(y,A,k){var B=arguments.length;return 3>B&&(k=null),new c(this.data.slice(y,B>1?A:this.data.length),k,this.encoding)},n.toString=function(){return"[object Blob]"},n.close=function(){this.size=0,delete this.data},u}(r);r.Blob=function(e,s){var u=s&&s.type||"",c=new C;if(e)for(var t=0,n=e.length;n>t;t++)Uint8Array&&e[t]instanceof Uint8Array?c.append(e[t].buffer):c.append(e[t]);var o=c.getBlob(u);return!o.slice&&o.webkitSlice&&(o.slice=o.webkitSlice),o},r.Blob.prototype=(Object.getPrototypeOf||function(e){return e.__proto__})(new r.Blob)}(typeof self<"u"&&self||typeof window<"u"&&window||this.content||this),function(r,C){"use strict";"object"==typeof module&&typeof process<"u"&&process&&process.versions&&process.versions.electron||"object"!=typeof module?"function"==typeof define&&define.amd?define(function(){return C}):r.MediumEditor=C:module.exports=C}(this,function(){"use strict";function r(C,i){return this.init(C,i)}return r.extensions={},function(C){function i(t,n){var o,l=Array.prototype.slice.call(arguments,2);n=n||{};for(var d=0;d<l.length;d++){var h=l[d];if(h)for(o in h)h.hasOwnProperty(o)&&typeof h[o]<"u"&&(t||!1===n.hasOwnProperty(o))&&(n[o]=h[o])}return n}var e=!1;try{var s=document.createElement("div"),u=document.createTextNode(" ");s.appendChild(u),e=s.contains(u)}catch{}var c={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),isEdge:null!==/Edge\/\d+/.exec(navigator.userAgent),isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:C.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(t){return!!(c.isMac&&t.metaKey||!c.isMac&&t.ctrlKey)},isKey:function(t,n){var o=c.getKeyCode(t);return!1===Array.isArray(n)?o===n:-1!==n.indexOf(o)},getKeyCode:function(t){var n=t.which;return null===n&&(n=null!==t.charCode?t.charCode:t.keyCode),n},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var t=[!0].concat(Array.prototype.slice.call(arguments));return i.apply(this,t)},defaults:function(){var t=[!1].concat(Array.prototype.slice.call(arguments));return i.apply(this,t)},createLink:function(t,n,o,l){var d=t.createElement("a");return c.moveTextRangeIntoElement(n[0],n[n.length-1],d),d.setAttribute("href",o),l&&("_blank"===l&&d.setAttribute("rel","noopener noreferrer"),d.setAttribute("target",l)),d},findOrCreateMatchingTextNodes:function(t,n,o){for(var l=t.createTreeWalker(n,NodeFilter.SHOW_ALL,null,!1),d=[],h=0,p=!1,g=null,b=null;null!==(g=l.nextNode());)if(!(g.nodeType>3))if(3===g.nodeType){if(!p&&o.start<h+g.nodeValue.length&&(p=!0,b=c.splitStartNodeIfNeeded(g,o.start,h)),p&&c.splitEndNodeIfNeeded(g,b,o.end,h),p&&h===o.end)break;if(p&&h>o.end+1)throw new Error("PerformLinking overshot the target!");p&&d.push(b||g),h+=g.nodeValue.length,null!==b&&(h+=b.nodeValue.length,l.nextNode()),b=null}else"img"===g.tagName.toLowerCase()&&(!p&&o.start<=h&&(p=!0),p&&d.push(g));return d},splitStartNodeIfNeeded:function(t,n,o){return n!==o?t.splitText(n-o):null},splitEndNodeIfNeeded:function(t,n,o,l){var d,h;h=o-l-(n?t.nodeValue.length:0),(d=l+t.nodeValue.length+(n?n.nodeValue.length:0)-1)>=o&&l!==d&&0!==h&&(n||t).splitText(h)},splitByBlockElements:function(t){if(3!==t.nodeType&&1!==t.nodeType)return[];var n=[],o=r.util.blockContainerElementNames.join(",");if(3===t.nodeType||0===t.querySelectorAll(o).length)return[t];for(var l=0;l<t.childNodes.length;l++){var d=t.childNodes[l];3===d.nodeType?n.push(d):1===d.nodeType&&(0===d.querySelectorAll(o).length?n.push(d):n=n.concat(r.util.splitByBlockElements(d)))}return n},findAdjacentTextNodeWithContent:function(t,n,o){var l,d=!1,h=o.createNodeIterator(t,NodeFilter.SHOW_TEXT,null,!1);for(l=h.nextNode();l;){if(l===n)d=!0;else if(d&&3===l.nodeType&&l.nodeValue&&l.nodeValue.trim().length>0)break;l=h.nextNode()}return l},findPreviousSibling:function(t){if(!t||c.isMediumEditorElement(t))return!1;for(var n=t.previousSibling;!n&&!c.isMediumEditorElement(t.parentNode);)n=(t=t.parentNode).previousSibling;return n},isDescendant:function(t,n,o){if(!t||!n)return!1;if(t===n)return!!o;if(1!==t.nodeType)return!1;if(e||3!==n.nodeType)return t.contains(n);for(var l=n.parentNode;null!==l;){if(l===t)return!0;l=l.parentNode}return!1},isElement:function(t){return!(!t||1!==t.nodeType)},throttle:function(t,n){var o,l,d,p=null,g=0,b=function(){g=Date.now(),p=null,d=t.apply(o,l),p||(o=l=null)};return n||0===n||(n=50),function(){var E=Date.now(),w=n-(E-g);return o=this,l=arguments,0>=w||w>n?(p&&(clearTimeout(p),p=null),g=E,d=t.apply(o,l),p||(o=l=null)):p||(p=setTimeout(b,w)),d}},traverseUp:function(t,n){if(!t)return!1;do{if(1===t.nodeType){if(n(t))return t;if(c.isMediumEditorElement(t))return!1}t=t.parentNode}while(t);return!1},htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(t,n){var o,l,d,h,g,b,E=!1,w=["insertHTML",!1,n];if(!r.util.isEdge&&t.queryCommandSupported("insertHTML"))try{return t.execCommand.apply(t,w)}catch{}if((o=t.getSelection()).rangeCount){if(l=o.getRangeAt(0),c.isMediumEditorElement(b=l.commonAncestorContainer)&&!b.firstChild)l.selectNode(b.appendChild(t.createTextNode("")));else if(3===b.nodeType&&0===l.startOffset&&l.endOffset===b.nodeValue.length||3!==b.nodeType&&b.innerHTML===l.toString()){for(;!c.isMediumEditorElement(b)&&b.parentNode&&1===b.parentNode.childNodes.length&&!c.isMediumEditorElement(b.parentNode);)b=b.parentNode;l.selectNode(b)}for(l.deleteContents(),(d=t.createElement("div")).innerHTML=n,h=t.createDocumentFragment();d.firstChild;)g=h.appendChild(d.firstChild);l.insertNode(h),g&&((l=l.cloneRange()).setStartAfter(g),l.collapse(!0),r.selection.selectRange(t,l)),E=!0}return t.execCommand.callListeners&&t.execCommand.callListeners(w,E),E},execFormatBlock:function(t,n){var l=c.getTopBlockContainer(r.selection.getSelectionStart(t));if("blockquote"===n){if(l&&Array.prototype.slice.call(l.childNodes).some(function(d){return c.isBlockContainer(d)}))return t.execCommand("outdent",!1,null);if(c.isIE)return t.execCommand("indent",!1,n)}if(l&&n===l.nodeName.toLowerCase()&&(n="p"),c.isIE&&(n="<"+n+">"),l&&"blockquote"===l.nodeName.toLowerCase()){if(c.isIE&&"<p>"===n)return t.execCommand("outdent",!1,n);if((c.isFF||c.isEdge)&&"p"===n)return Array.prototype.slice.call(l.childNodes).some(function(d){return!c.isBlockContainer(d)})&&t.execCommand("formatBlock",!1,n),t.execCommand("outdent",!1,n)}return t.execCommand("formatBlock",!1,n)},setTargetBlank:function(t,n){var o,l=n||!1;if("a"===t.nodeName.toLowerCase())t.target="_blank",t.rel="noopener noreferrer";else for(t=t.getElementsByTagName("a"),o=0;o<t.length;o+=1)!1!==l&&l!==t[o].attributes.href.value||(t[o].target="_blank",t[o].rel="noopener noreferrer")},removeTargetBlank:function(t,n){var o;if("a"===t.nodeName.toLowerCase())t.removeAttribute("target"),t.removeAttribute("rel");else for(t=t.getElementsByTagName("a"),o=0;o<t.length;o+=1)n===t[o].attributes.href.value&&(t[o].removeAttribute("target"),t[o].removeAttribute("rel"))},addClassToAnchors:function(t,n){var o,l,d=n.split(" ");if("a"===t.nodeName.toLowerCase())for(l=0;l<d.length;l+=1)t.classList.add(d[l]);else{var h=t.getElementsByTagName("a");if(0===h.length){var p=c.getClosestTag(t,"a");t=p?[p]:[]}else t=h;for(o=0;o<t.length;o+=1)for(l=0;l<d.length;l+=1)t[o].classList.add(d[l])}},isListItem:function(t){if(!t)return!1;if("li"===t.nodeName.toLowerCase())return!0;for(var n=t.parentNode,o=n.nodeName.toLowerCase();"li"===o||!c.isBlockContainer(n)&&"div"!==o;){if("li"===o)return!0;if(!(n=n.parentNode))return!1;o=n.nodeName.toLowerCase()}return!1},cleanListDOM:function(t,n){if("li"===n.nodeName.toLowerCase()){var o=n.parentElement;"p"===o.parentElement.nodeName.toLowerCase()&&(c.unwrap(o.parentElement,t),r.selection.moveCursor(t,n.firstChild,n.firstChild.textContent.length))}},splitOffDOMTree:function(t,n,o){for(var l=n,d=null,h=!o;l!==t;){var p,g=l.parentNode,b=g.cloneNode(!1),E=h?l:g.firstChild;for(d&&(h?b.appendChild(d):p=d),d=b;E;){var w=E.nextSibling;E===l?(E.hasChildNodes()?E=E.cloneNode(!1):E.parentNode.removeChild(E),E.textContent&&d.appendChild(E),E=h?w:null):(E.parentNode.removeChild(E),(E.hasChildNodes()||E.textContent)&&d.appendChild(E),E=w)}p&&d.appendChild(p),l=g}return d},moveTextRangeIntoElement:function(t,n,o){if(!t||!n)return!1;var l=c.findCommonRoot(t,n);if(!l)return!1;if(n===t){var d=t.parentNode,h=t.nextSibling;return d.removeChild(t),o.appendChild(t),h?d.insertBefore(o,h):d.appendChild(o),o.hasChildNodes()}for(var p,g,b,E=[],w=0;w<l.childNodes.length;w++)if(b=l.childNodes[w],p){if(c.isDescendant(b,n,!0)){g=b;break}E.push(b)}else c.isDescendant(b,t,!0)&&(p=b);var S=g.nextSibling,N=l.ownerDocument.createDocumentFragment();return p===t?(p.parentNode.removeChild(p),N.appendChild(p)):N.appendChild(c.splitOffDOMTree(p,t)),E.forEach(function(P){P.parentNode.removeChild(P),N.appendChild(P)}),g===n?(g.parentNode.removeChild(g),N.appendChild(g)):N.appendChild(c.splitOffDOMTree(g,n,!0)),o.appendChild(N),g.parentNode===l?l.insertBefore(o,g):S?l.insertBefore(o,S):l.appendChild(o),o.hasChildNodes()},depthOfNode:function(t){for(var n=0,o=t;null!==o.parentNode;)o=o.parentNode,n++;return n},findCommonRoot:function(t,n){for(var o=c.depthOfNode(t),l=c.depthOfNode(n),d=t,h=n;o!==l;)o>l?(d=d.parentNode,o-=1):(h=h.parentNode,l-=1);for(;d!==h;)d=d.parentNode,h=h.parentNode;return d},isElementAtBeginningOfBlock:function(t){for(var o;!c.isBlockContainer(t)&&!c.isMediumEditorElement(t);){for(o=t;o=o.previousSibling;)if((3===o.nodeType?o.nodeValue:o.textContent).length>0)return!1;t=t.parentNode}return!0},isMediumEditorElement:function(t){return t&&t.getAttribute&&!!t.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(t){return c.traverseUp(t,function(n){return c.isMediumEditorElement(n)})},isBlockContainer:function(t){return t&&3!==t.nodeType&&-1!==c.blockContainerElementNames.indexOf(t.nodeName.toLowerCase())},getClosestBlockContainer:function(t){return c.traverseUp(t,function(n){return c.isBlockContainer(n)||c.isMediumEditorElement(n)})},getTopBlockContainer:function(t){var n=!!c.isBlockContainer(t)&&t;return c.traverseUp(t,function(o){return c.isBlockContainer(o)&&(n=o),!(n||!c.isMediumEditorElement(o)||(n=o,0))}),n},getFirstSelectableLeafNode:function(t){for(;t&&t.firstChild;)t=t.firstChild;if("table"===(t=c.traverseUp(t,function(o){return-1===c.emptyElementNames.indexOf(o.nodeName.toLowerCase())})).nodeName.toLowerCase()){var n=t.querySelector("th, td");n&&(t=n)}return t},getFirstTextNode:function(t){return c.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),c._getFirstTextNode(t)},_getFirstTextNode:function(t){if(3===t.nodeType)return t;for(var n=0;n<t.childNodes.length;n++){var o=c._getFirstTextNode(t.childNodes[n]);if(null!==o)return o}return null},ensureUrlHasProtocol:function(t){return-1===t.indexOf("://")?"http://"+t:t},warn:function(){void 0!==C.console&&"function"==typeof C.console.warn&&C.console.warn.apply(C.console,arguments)},deprecated:function(t,n,o){var l=t+" is deprecated, please use "+n+" instead.";o&&(l+=" Will be removed in "+o),c.warn(l)},deprecatedMethod:function(t,n,o,l){c.deprecated(t,n,l),"function"==typeof this[n]&&this[n].apply(this,o)},cleanupAttrs:function(t,n){n.forEach(function(o){t.removeAttribute(o)})},cleanupTags:function(t,n){-1!==n.indexOf(t.nodeName.toLowerCase())&&t.parentNode.removeChild(t)},unwrapTags:function(t,n){-1!==n.indexOf(t.nodeName.toLowerCase())&&r.util.unwrap(t,document)},getClosestTag:function(t,n){return c.traverseUp(t,function(o){return o.nodeName.toLowerCase()===n.toLowerCase()})},unwrap:function(t,n){for(var o=n.createDocumentFragment(),l=Array.prototype.slice.call(t.childNodes),d=0;d<l.length;d++)o.appendChild(l[d]);o.childNodes.length?t.parentNode.replaceChild(o,t):t.parentNode.removeChild(t)},guid:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}};r.util=c}(window),(C=function(i){r.util.extend(this,i)}).extend=function(i){var e,s=this;e=i&&i.hasOwnProperty("constructor")?i.constructor:function(){return s.apply(this,arguments)},r.util.extend(e,s);var u=function(){this.constructor=e};return u.prototype=s.prototype,e.prototype=new u,i&&r.util.extend(e.prototype,i),e},C.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(i){return this.base.options[i]}},["execAction","on","off","subscribe","trigger"].forEach(function(i){C.prototype[i]=function(){return this.base[i].apply(this.base,arguments)}}),r.Extension=C,function(){function C(e){return r.util.isBlockContainer(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var i={findMatchingSelectionParent:function(e,s){var u,t=s.getSelection();return 0!==t.rangeCount&&(u=t.getRangeAt(0),r.util.traverseUp(u.commonAncestorContainer,e))},getSelectionElement:function(e){return this.findMatchingSelectionParent(function(s){return r.util.isMediumEditorElement(s)},e)},exportSelection:function(e,s){if(!e)return null;var u=null,c=s.getSelection();if(c.rangeCount>0){var t,n=c.getRangeAt(0),o=n.cloneRange();o.selectNodeContents(e),o.setEnd(n.startContainer,n.startOffset),u={start:t=o.toString().length,end:t+n.toString().length},this.doesRangeStartWithImages(n,s)&&(u.startsWithImage=!0);var l=this.getTrailingImageCount(e,u,n.endContainer,n.endOffset);if(l&&(u.trailingImageCount=l),0!==t){var d=this.getIndexRelativeToAdjacentEmptyBlocks(s,e,n.startContainer,n.startOffset);-1!==d&&(u.emptyBlocksIndex=d)}}return u},importSelection:function(e,s,u,c){if(e&&s){var t=u.createRange();t.setStart(s,0),t.collapse(!0);var n,o=s,l=[],d=0,h=!1,p=!1,g=0,b=!1,E=!1,w=null;for((c||e.startsWithImage||typeof e.emptyBlocksIndex<"u")&&(E=!0);!b&&o;)if(o.nodeType>3)o=l.pop();else{if(3!==o.nodeType||p){if(e.trailingImageCount&&p&&("img"===o.nodeName.toLowerCase()&&g++,g===e.trailingImageCount)){for(var S=0;o.parentNode.childNodes[S]!==o;)S++;t.setEnd(o.parentNode,S+1),b=!0}if(!b&&1===o.nodeType)for(var N=o.childNodes.length-1;N>=0;)l.push(o.childNodes[N]),N-=1}else n=d+o.length,!h&&e.start>=d&&e.start<=n&&(E||e.start<n?(t.setStart(o,e.start-d),h=!0):w=o),h&&e.end>=d&&e.end<=n&&(e.trailingImageCount?p=!0:(t.setEnd(o,e.end-d),b=!0)),d=n;b||(o=l.pop())}!h&&w&&(t.setStart(w,w.length),t.setEnd(w,w.length)),typeof e.emptyBlocksIndex<"u"&&(t=this.importSelectionMoveCursorPastBlocks(u,s,e.emptyBlocksIndex,t)),c&&(t=this.importSelectionMoveCursorPastAnchor(e,t)),this.selectRange(u,t)}},importSelectionMoveCursorPastAnchor:function(e,s){if(e.start===e.end&&3===s.startContainer.nodeType&&s.startOffset===s.startContainer.nodeValue.length&&r.util.traverseUp(s.startContainer,function(l){return"a"===l.nodeName.toLowerCase()})){for(var c=s.startContainer,t=s.startContainer.parentNode;null!==t&&"a"!==t.nodeName.toLowerCase();)t.childNodes[t.childNodes.length-1]!==c?t=null:(c=t,t=t.parentNode);if(null!==t&&"a"===t.nodeName.toLowerCase()){for(var n=null,o=0;null===n&&o<t.parentNode.childNodes.length;o++)t.parentNode.childNodes[o]===t&&(n=o);s.setStart(t.parentNode,n+1),s.collapse(!0)}}return s},importSelectionMoveCursorPastBlocks:function(e,s,u,c){var t,n,o=e.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,C,!1),l=c.startContainer,d=0;for(u=u||1,t=3===l.nodeType&&r.util.isBlockContainer(l.previousSibling)?l.previousSibling:r.util.getClosestBlockContainer(l);o.nextNode();)if(n){if(n=o.currentNode,++d===u||n.textContent.length>0)break}else t===o.currentNode&&(n=o.currentNode);return n||(n=t),c.setStart(r.util.getFirstSelectableLeafNode(n),0),c},getIndexRelativeToAdjacentEmptyBlocks:function(e,s,u,c){if(u.textContent.length>0&&c>0)return-1;var t=u;if(3!==t.nodeType&&(t=u.childNodes[c]),t){if(!r.util.isElementAtBeginningOfBlock(t))return-1;var n=r.util.findPreviousSibling(t);if(!n||n.nodeValue)return-1}for(var o=r.util.getClosestBlockContainer(u),l=e.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,C,!1),d=0;l.nextNode();){var h=""===l.currentNode.textContent;if((h||d>0)&&(d+=1),l.currentNode===o)return d;h||(d=0)}return d},doesRangeStartWithImages:function(e,s){if(0!==e.startOffset||1!==e.startContainer.nodeType)return!1;if("img"===e.startContainer.nodeName.toLowerCase())return!0;var u=e.startContainer.querySelector("img");if(!u)return!1;for(var c=s.createTreeWalker(e.startContainer,NodeFilter.SHOW_ALL,null,!1);c.nextNode();){var t=c.currentNode;if(t===u)break;if(t.nodeValue)return!1}return!0},getTrailingImageCount:function(e,s,u,c){if(0===c||1!==u.nodeType||"img"!==u.nodeName.toLowerCase()&&!u.querySelector("img"))return 0;for(var t=u.childNodes[c-1];t.hasChildNodes();)t=t.lastChild;for(var n,o=e,l=[],d=0,h=!1,p=!1,g=!1,b=0;!g&&o;)if(o.nodeType>3)o=l.pop();else{if(3!==o.nodeType||p){if("img"===o.nodeName.toLowerCase()&&b++,o===t)g=!0;else if(1===o.nodeType)for(var E=o.childNodes.length-1;E>=0;)l.push(o.childNodes[E]),E-=1}else b=0,n=d+o.length,!h&&s.start>=d&&s.start<=n&&(h=!0),h&&s.end>=d&&s.end<=n&&(p=!0),d=n;g||(o=l.pop())}return b},selectionContainsContent:function(e){var s=e.getSelection();if(!s||s.isCollapsed||!s.rangeCount)return!1;if(""!==s.toString().trim())return!0;var u=this.getSelectedParentElement(s.getRangeAt(0));return!(!u||!("img"===u.nodeName.toLowerCase()||1===u.nodeType&&u.querySelector("img")))},selectionInContentEditableFalse:function(e){var s,u=this.findMatchingSelectionParent(function(c){var t=c&&c.getAttribute("contenteditable");return"true"===t&&(s=!0),"#text"!==c.nodeName&&"false"===t},e);return!s&&u},getSelectionHtml:function(e){var s,u,c,t="",n=e.getSelection();if(n.rangeCount){for(c=e.createElement("div"),s=0,u=n.rangeCount;u>s;s+=1)c.appendChild(n.getRangeAt(s).cloneContents());t=c.innerHTML}return t},getCaretOffsets:function(e,s){var u,c;return s||(s=window.getSelection().getRangeAt(0)),u=s.cloneRange(),c=s.cloneRange(),u.selectNodeContents(e),u.setEnd(s.endContainer,s.endOffset),c.selectNodeContents(e),c.setStart(s.endContainer,s.endOffset),{left:u.toString().length,right:c.toString().length}},rangeSelectsSingleNode:function(e){var s=e.startContainer;return s===e.endContainer&&s.hasChildNodes()&&e.endOffset===e.startOffset+1},getSelectedParentElement:function(e){return e?this.rangeSelectsSingleNode(e)&&3!==e.startContainer.childNodes[e.startOffset].nodeType?e.startContainer.childNodes[e.startOffset]:3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer:null},getSelectedElements:function(e){var s,u,c,t=e.getSelection();if(!t.rangeCount||t.isCollapsed||!t.getRangeAt(0).commonAncestorContainer)return[];if(3===(s=t.getRangeAt(0)).commonAncestorContainer.nodeType){for(u=[],c=s.commonAncestorContainer;c.parentNode&&1===c.parentNode.childNodes.length;)u.push(c.parentNode),c=c.parentNode;return u}return[].filter.call(s.commonAncestorContainer.getElementsByTagName("*"),function(n){return"function"!=typeof t.containsNode||t.containsNode(n,!0)})},selectNode:function(e,s){var u=s.createRange();u.selectNodeContents(e),this.selectRange(s,u)},select:function(e,s,u,c,t){var n=e.createRange();return n.setStart(s,u),c?n.setEnd(c,t):n.collapse(!0),this.selectRange(e,n),n},clearSelection:function(e,s){s?e.getSelection().collapseToStart():e.getSelection().collapseToEnd()},moveCursor:function(e,s,u){this.select(e,s,u)},getSelectionRange:function(e){var s=e.getSelection();return 0===s.rangeCount?null:s.getRangeAt(0)},selectRange:function(e,s){var u=e.getSelection();u.removeAllRanges(),u.addRange(s)},getSelectionStart:function(e){var s=e.getSelection().anchorNode;return s&&3===s.nodeType?s.parentNode:s}};r.selection=i}(),function(){function C(e,s){return!!e&&e.some(function(u){if("function"!=typeof u.getInteractionElements)return!1;var c=u.getInteractionElements();return!!c&&(Array.isArray(c)||(c=[c]),c.some(function(t){return r.util.isDescendant(t,s,!0)}))})}var i=function(e){this.base=e,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};i.prototype={InputEventOnContenteditableSupported:!r.util.isIE&&!r.util.isEdge,attachDOMEvent:function(e,s,u,c){var t=this.base.options.contentWindow,n=this.base.options.ownerDocument;e=r.util.isElement(e)||[t,n].indexOf(e)>-1?[e]:e,Array.prototype.forEach.call(e,function(o){o.addEventListener(s,u,c),this.events.push([o,s,u,c])}.bind(this))},detachDOMEvent:function(e,s,u,c){var t,n,o=this.base.options.contentWindow,l=this.base.options.ownerDocument;e&&(e=r.util.isElement(e)||[o,l].indexOf(e)>-1?[e]:e,Array.prototype.forEach.call(e,function(d){-1!==(t=this.indexOfListener(d,s,u,c))&&(n=this.events.splice(t,1)[0])[0].removeEventListener(n[1],n[2],n[3])}.bind(this)))},indexOfListener:function(e,s,u,c){var t,n,o;for(t=0,n=this.events.length;n>t;t+=1)if((o=this.events[t])[0]===e&&o[1]===s&&o[2]===u&&o[3]===c)return t;return-1},detachAllDOMEvents:function(){for(var e=this.events.pop();e;)e[0].removeEventListener(e[1],e[2],e[3]),e=this.events.pop()},detachAllEventsFromElement:function(e){for(var s=this.events.filter(function(n){return n&&n[0].getAttribute&&n[0].getAttribute("medium-editor-index")===e.getAttribute("medium-editor-index")}),u=0,c=s.length;c>u;u++){var t=s[u];this.detachDOMEvent(t[0],t[1],t[2],t[3])}},attachAllEventsToElement:function(e){this.listeners.editableInput&&(this.contentCache[e.getAttribute("medium-editor-index")]=e.innerHTML),this.eventsCache&&this.eventsCache.forEach(function(s){this.attachDOMEvent(e,s.name,s.handler.bind(this))},this)},enableCustomEvent:function(e){void 0!==this.disabledEvents[e]&&delete this.disabledEvents[e]},disableCustomEvent:function(e){this.disabledEvents[e]=!0},attachCustomEvent:function(e,s){this.setupListener(e),this.customEvents[e]||(this.customEvents[e]=[]),this.customEvents[e].push(s)},detachCustomEvent:function(e,s){var u=this.indexOfCustomListener(e,s);-1!==u&&this.customEvents[e].splice(u,1)},indexOfCustomListener:function(e,s){return this.customEvents[e]&&this.customEvents[e].length?this.customEvents[e].indexOf(s):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(e,s,u){this.customEvents[e]&&!this.disabledEvents[e]&&this.customEvents[e].forEach(function(c){c(s,u)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(e){e.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(e){this.handleDocumentExecCommand(e)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var e=this.options.ownerDocument;if(this.execCommandListener&&e.execCommand.listeners){var s=e.execCommand.listeners.indexOf(this.execCommandListener);-1!==s&&e.execCommand.listeners.splice(s,1),e.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var e=this.options.ownerDocument;if(!e.execCommand.listeners){var s=function(c,t){e.execCommand.listeners&&e.execCommand.listeners.forEach(function(n){n({command:c[0],value:c[2],args:c,result:t})})},u=function(){var c=e.execCommand.orig.apply(this,arguments);if(!e.execCommand.listeners)return c;var t=Array.prototype.slice.call(arguments);return s(t,c),c};u.orig=e.execCommand,u.listeners=[],u.callListeners=s,e.execCommand=u}},unwrapExecCommand:function(){var e=this.options.ownerDocument;e.execCommand.orig&&(e.execCommand=e.execCommand.orig)},setupListener:function(e){if(!this.listeners[e]){switch(e){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach(function(s){this.contentCache[s.getAttribute("medium-editor-index")]=s.innerHTML},this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":case"editableKeydownEnter":case"editableKeydownTab":case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste)}this.listeners[e]=!0}},attachToEachElement:function(e,s){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach(function(u){this.attachDOMEvent(u,e,s.bind(this))},this),this.eventsCache.push({name:e,handler:s})},cleanupElement:function(e){var s=e.getAttribute("medium-editor-index");s&&(this.detachAllEventsFromElement(e),this.contentCache&&delete this.contentCache[s])},focusElement:function(e){e.focus(),this.updateFocus(e,{target:e,type:"focus"})},updateFocus:function(e,s){var u,c=this.base.getFocusedElement();c&&"click"===s.type&&this.lastMousedownTarget&&(r.util.isDescendant(c,this.lastMousedownTarget,!0)||C(this.base.extensions,this.lastMousedownTarget))&&(u=c),u||this.base.elements.some(function(n){return!u&&r.util.isDescendant(n,e,!0)&&(u=n),!!u},this);var t=!r.util.isDescendant(c,e,!0)&&!C(this.base.extensions,e);u!==c&&(c&&t&&(c.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",s,c)),u&&(u.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",s,u))),t&&this.triggerCustomEvent("externalInteraction",s)},updateInput:function(e,s){if(this.contentCache){var u=e.getAttribute("medium-editor-index"),c=e.innerHTML;c!==this.contentCache[u]&&this.triggerCustomEvent("editableInput",s,e),this.contentCache[u]=c}},handleDocumentSelectionChange:function(e){if(e.currentTarget&&e.currentTarget.activeElement){var s,u=e.currentTarget.activeElement;this.base.elements.some(function(c){return!!r.util.isDescendant(c,u,!0)&&(s=c,!0)},this),s&&this.updateInput(s,{target:u,currentTarget:s})}},handleDocumentExecCommand:function(){var e=this.base.getFocusedElement();e&&this.updateInput(e,{target:e,currentTarget:e})},handleBodyClick:function(e){this.updateFocus(e.target,e)},handleBodyFocus:function(e){this.updateFocus(e.target,e)},handleBodyMousedown:function(e){this.lastMousedownTarget=e.target},handleInput:function(e){this.updateInput(e.currentTarget,e)},handleClick:function(e){this.triggerCustomEvent("editableClick",e,e.currentTarget)},handleBlur:function(e){this.triggerCustomEvent("editableBlur",e,e.currentTarget)},handleKeypress:function(e){if(this.triggerCustomEvent("editableKeypress",e,e.currentTarget),this.keypressUpdateInput){var s={target:e.target,currentTarget:e.currentTarget};setTimeout(function(){this.updateInput(s.currentTarget,s)}.bind(this),0)}},handleKeyup:function(e){this.triggerCustomEvent("editableKeyup",e,e.currentTarget)},handleMouseover:function(e){this.triggerCustomEvent("editableMouseover",e,e.currentTarget)},handleDragging:function(e){this.triggerCustomEvent("editableDrag",e,e.currentTarget)},handleDrop:function(e){this.triggerCustomEvent("editableDrop",e,e.currentTarget)},handlePaste:function(e){this.triggerCustomEvent("editablePaste",e,e.currentTarget)},handleKeydown:function(e){return this.triggerCustomEvent("editableKeydown",e,e.currentTarget),r.util.isKey(e,r.util.keyCode.SPACE)?this.triggerCustomEvent("editableKeydownSpace",e,e.currentTarget):r.util.isKey(e,r.util.keyCode.ENTER)||e.ctrlKey&&r.util.isKey(e,r.util.keyCode.M)?this.triggerCustomEvent("editableKeydownEnter",e,e.currentTarget):r.util.isKey(e,r.util.keyCode.TAB)?this.triggerCustomEvent("editableKeydownTab",e,e.currentTarget):r.util.isKey(e,[r.util.keyCode.DELETE,r.util.keyCode.BACKSPACE])?this.triggerCustomEvent("editableKeydownDelete",e,e.currentTarget):void 0}},r.Events=i}(),function(){var C=r.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(i){C.isBuiltInButton(i)?r.Extension.call(this,this.defaults[i]):r.Extension.call(this,i)},init:function(){r.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.action?this.action(this.base.options):this.action},getAria:function(){return"function"==typeof this.aria?this.aria(this.base.options):this.aria},getTagNames:function(){return"function"==typeof this.tagNames?this.tagNames(this.base.options):this.tagNames},createButton:function(){var i=this.document.createElement("button"),e=this.contentDefault,s=this.getAria(),u=this.getEditorOption("buttonLabels");return i.classList.add("medium-editor-action"),i.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(c){i.classList.add(c)}),i.setAttribute("data-action",this.getAction()),s&&(i.setAttribute("title",s),i.setAttribute("aria-label",s)),this.attrs&&Object.keys(this.attrs).forEach(function(c){i.setAttribute(c,this.attrs[c])},this),"fontawesome"===u&&this.contentFA&&(e=this.contentFA),i.innerHTML=e,i},handleClick:function(i){i.preventDefault(),i.stopPropagation();var e=this.getAction();e&&this.execAction(e)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var i=null;return this.useQueryState&&(i=this.base.queryCommandState(this.getAction())),i},isAlreadyApplied:function(i){var e,s,u=!1,c=this.getTagNames();return!1===this.knownState||!0===this.knownState?this.knownState:(c&&c.length>0&&(u=-1!==c.indexOf(i.nodeName.toLowerCase())),!u&&this.style&&(e=this.style.value.split("|"),s=this.window.getComputedStyle(i,null).getPropertyValue(this.style.prop),e.forEach(function(t){this.knownState||((u=-1!==s.indexOf(t))||"text-decoration"!==this.style.prop)&&(this.knownState=u)},this)),u)}});C.isBuiltInButton=function(i){return"string"==typeof i&&r.extensions.button.prototype.defaults.hasOwnProperty(i)},r.extensions.button=C}(),r.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},html:{name:"html",action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"<b>html</b>",contentFA:'<i class="fa fa-code"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}},function(){var C=r.extensions.button.extend({init:function(){r.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return!!this.hasForm&&this.getForm().classList.contains(this.activeClass)},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var i=this.base.getExtensionByName("toolbar");i&&i.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var i=this.base.getExtensionByName("toolbar");i&&i.hideToolbarDefaultActions()},setToolbarPosition:function(){var i=this.base.getExtensionByName("toolbar");i&&i.setToolbarPosition()}});r.extensions.form=C}(),function(){var C=r.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){r.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(i){i.preventDefault(),i.stopPropagation();var e=r.selection.getSelectionRange(this.document);return"a"===e.startContainer.nodeName.toLowerCase()||"a"===e.endContainer.nodeName.toLowerCase()||r.util.getClosestTag(r.selection.getSelectedParentElement(e),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(i){r.util.isKey(i,r.util.keyCode.K)&&r.util.isMetaCtrlKey(i)&&!i.shiftKey&&this.handleClick(i)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var i=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return i.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),i.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&i.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">','<label for="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">',this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&i.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),i.join("")},isDisplayed:function(){return r.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){r.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(i){var e=this.getInput(),s=this.getAnchorTargetCheckbox(),u=this.getAnchorButtonCheckbox();if("string"==typeof(i=i||{value:""})&&(i={value:i}),this.base.saveSelection(),this.hideToolbarDefaultActions(),r.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),e.value=i.value,e.focus(),s&&(s.checked="_blank"===i.target),u){var c=i.buttonClass?i.buttonClass.split(" "):[];u.checked=-1!==c.indexOf(this.customClassOption)}},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},getFormOpts:function(){var i=this.getAnchorTargetCheckbox(),e=this.getAnchorButtonCheckbox(),s={value:this.getInput().value.trim()};return this.linkValidation&&(s.value=this.checkLinkFormat(s.value)),s.target="_self",i&&i.checked&&(s.target="_blank"),e&&e.checked&&(s.buttonClass=this.customClassOption),s},doFormSave:function(){var i=this.getFormOpts();this.completeFormSave(i)},completeFormSave:function(i){this.base.restoreSelection(),this.execAction(this.action,i),this.base.checkSelection()},ensureEncodedUri:function(i){return i===decodeURI(i)?encodeURI(i):i},ensureEncodedUriComponent:function(i){return i===decodeURIComponent(i)?encodeURIComponent(i):i},ensureEncodedParam:function(i){var e=i.split("="),u=e[1];return e[0]+(void 0===u?"":"="+this.ensureEncodedUriComponent(u))},ensureEncodedQuery:function(i){return i.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(i){var s=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i.test(i),u="",t=i.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),n=t[1],o=t[2],l=t[3];if(/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/.test(i))return"tel:"+i;if(!s){var d=n.split("/")[0];(d.match(/.+(\.|:).+/)||"localhost"===d)&&(u="http://")}return u+this.ensureEncodedUri(n)+(void 0===o?"":"?"+this.ensureEncodedQuery(o))+(void 0===l?"":"#"+l)},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(i){var e=i.querySelector(".medium-editor-toolbar-close"),s=i.querySelector(".medium-editor-toolbar-save"),u=i.querySelector(".medium-editor-toolbar-input");this.on(i,"click",this.handleFormClick.bind(this)),this.on(u,"keyup",this.handleTextboxKeyup.bind(this)),this.on(e,"click",this.handleCloseClick.bind(this)),this.on(s,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var e=this.document.createElement("div");return e.className="medium-editor-toolbar-form",e.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),e.innerHTML=this.getTemplate(),this.attachFormEvents(e),e},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(i){return i.keyCode===r.util.keyCode.ENTER?(i.preventDefault(),void this.doFormSave()):void(i.keyCode===r.util.keyCode.ESCAPE&&(i.preventDefault(),this.doFormCancel()))},handleFormClick:function(i){i.stopPropagation()},handleSaveClick:function(i){i.preventDefault(),this.doFormSave()},handleCloseClick:function(i){i.preventDefault(),this.doFormCancel()}});r.extensions.anchor=C}(),function(){var C=r.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var i=this.document.createElement("div");return i.id="medium-editor-anchor-preview-"+this.getEditorId(),i.className="medium-editor-anchor-preview",i.innerHTML=this.getTemplate(),this.on(i,"click",this.handleClick.bind(this)),i},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview&&this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(i){return!(!this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")&&!i.getAttribute("data-disable-preview"))||(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=i.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=i.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=i,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(i){var e,s,u,c,t,n=this.window.innerWidth,o=this.anchorPreview.offsetHeight,l=(i=i||this.activeAnchor).getBoundingClientRect(),d=this.diffLeft,h=this.diffTop,p=this.getEditorOption("elementsContainer"),g=["absolute","fixed"].indexOf(window.getComputedStyle(p).getPropertyValue("position"))>-1,b={};e=this.anchorPreview.offsetWidth/2;var E=this.base.getExtensionByName("toolbar");E&&(d=E.diffLeft,h=E.diffTop),s=d-e,g?(c=p.getBoundingClientRect(),["top","left"].forEach(function(w){b[w]=l[w]-c[w]}),b.width=l.width,b.height=l.height,l=b,n=c.width,t=p.scrollTop):t=this.window.pageYOffset,u=l.left+l.width/2,t+=o+l.top+l.height-h-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(t)+"px",this.anchorPreview.style.right="initial",e>u?(this.anchorPreview.style.left=s+e+"px",this.anchorPreview.style.right="initial"):e>n-u?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=s+u+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(i){var e=this.base.getExtensionByName("anchor"),s=this.activeAnchor;e&&s&&(i.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){if(s){var u={value:s.attributes.href.value,target:s.getAttribute("target"),buttonClass:s.getAttribute("class")};e.showForm(u),s=null}}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(i){var e=r.util.getClosestTag(i.target,"a");if(!1!==e){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(e.outerHTML)||/href=["']#\S+["']/.test(e.outerHTML)))return!0;var s=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&s&&s.isDisplayed&&s.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==e&&this.detachPreviewHandlers(),this.anchorToPreview=e,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(i){i.relatedTarget&&/anchor-preview/.test(i.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;(new Date).getTime()-this.lastOver>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});r.extensions.anchorPreview=C}(),function(){function C(n){return!r.util.getClosestTag(n,"a")}var i,e,s,u,c;i=[" ","\t","\n","\r","\xa0","\u2000","\u2001","\u2002","\u2003","\u2028","\u2029"],s="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+(e="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw")+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?\xab\xbb\u201c\u201d\u2018\u2019])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+e+"))",u=new RegExp("^("+e+")$","i"),c=new RegExp(s,"gi");var t=r.Extension.extend({init:function(){r.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var n=0,o=0;o<this.window._mediumEditors.length;o++){var l=this.window._mediumEditors[o];null!==l&&void 0!==l.getExtensionByName("autoLink")&&n++}return 1===n},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(n,o){this.performLinking(o)},onKeypress:function(n){this.disableEventHandling||r.util.isKey(n,[r.util.keyCode.SPACE,r.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var o=this.base.exportSelection();this.performLinking(n.target)&&this.base.importSelection(o,!0)}catch(l){window.console&&window.console.error("Failed to perform linking",l),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(n){var o=r.util.splitByBlockElements(n),l=!1;0===o.length&&(o=[n]);for(var d=0;d<o.length;d++)l=this.removeObsoleteAutoLinkSpans(o[d])||l,l=this.performLinkingWithinElement(o[d])||l;return this.base.events.updateInput(n,{target:n,currentTarget:n}),l},removeObsoleteAutoLinkSpans:function(n){if(!n||3===n.nodeType)return!1;for(var o=n.querySelectorAll('span[data-auto-link="true"]'),l=!1,d=0;d<o.length;d++){var h=o[d].textContent;if(-1===h.indexOf("://")&&(h=r.util.ensureUrlHasProtocol(h)),o[d].getAttribute("data-href")!==h&&C(o[d])){l=!0;var p=h.replace(/\s+$/,"");if(o[d].getAttribute("data-href")===p){var b=r.util.splitOffDOMTree(o[d],this.splitTextBeforeEnd(o[d],h.length-p.length));o[d].parentNode.insertBefore(b,o[d].nextSibling)}else r.util.unwrap(o[d],this.document)}}return l},splitTextBeforeEnd:function(n,o){for(var l=this.document.createTreeWalker(n,NodeFilter.SHOW_TEXT,null,!1),d=!0;d;)d=null!==l.lastChild();for(var h,p,g;o>0&&null!==g;)(p=(h=l.currentNode).nodeValue).length>o?(g=h.splitText(p.length-o),o=0):(g=l.previousNode(),o-=p.length);return g},performLinkingWithinElement:function(n){for(var o=this.findLinkableText(n),d=0;d<o.length;d++){var h=r.util.findOrCreateMatchingTextNodes(this.document,n,o[d]);this.shouldNotLink(h)||this.createAutoLink(h,o[d].href)}return!1},shouldNotLink:function(n){for(var o=!1,l=0;l<n.length&&!1===o;l++)o=!!r.util.traverseUp(n[l],function(d){return"a"===d.nodeName.toLowerCase()||d.getAttribute&&"true"===d.getAttribute("data-auto-link")});return o},findLinkableText:function(n){for(var o=n.textContent,l=null,d=[];null!==(l=c.exec(o));){var p=l.index+l[0].length;!(0!==l.index&&-1===i.indexOf(o[l.index-1])||p!==o.length&&-1===i.indexOf(o[p]))&&(-1!==l[0].indexOf("/")||u.test(l[0].split(".").pop().split("?").shift()))&&d.push({href:l[0],start:l.index,end:p})}return d},createAutoLink:function(n,o){o=r.util.ensureUrlHasProtocol(o);var l=r.util.createLink(this.document,n,o,this.getEditorOption("targetBlank")?"_blank":null),d=this.document.createElement("span");for(d.setAttribute("data-auto-link","true"),d.setAttribute("data-href",o),l.insertBefore(d,l.firstChild);l.childNodes.length>1;)d.appendChild(l.childNodes[1])}});r.extensions.autoLink=t}(),function(){function C(s){var u=r.util.getContainerEditorElement(s);Array.prototype.slice.call(u.parentElement.querySelectorAll("."+i)).forEach(function(t){t.classList.remove(i)})}var i="medium-editor-dragover",e=r.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){r.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(s){s.preventDefault(),s.dataTransfer.dropEffect="copy";var u=s.target.classList?s.target:s.target.parentElement;C(u),"dragover"===s.type&&u.classList.add(i)},handleDrop:function(s){s.preventDefault(),s.stopPropagation(),this.base.selectElement(s.target);var u=this.base.exportSelection();u.start=u.end,this.base.importSelection(u),s.dataTransfer.files&&Array.prototype.slice.call(s.dataTransfer.files).forEach(function(c){this.isAllowedFile(c)&&c.type.match("image")&&this.insertImageFile(c)},this),C(s.target)},isAllowedFile:function(s){return this.allowedTypes.some(function(u){return!!s.type.match(u)})},insertImageFile:function(s){if("function"==typeof FileReader){var u=new FileReader;u.readAsDataURL(s),u.addEventListener("load",function(c){var t=this.document.createElement("img");t.src=c.target.result,r.util.insertHTMLCommand(this.document,t.outerHTML)}.bind(this))}}});r.extensions.fileDragging=e}(),function(){var C=r.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){r.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(i){var e=i.key.charCodeAt(0);this.keys[e]||(this.keys[e]=[]),this.keys[e].push(i)},this)},handleKeydown:function(i){var e=r.util.getKeyCode(i);if(this.keys[e]){var s=r.util.isMetaCtrlKey(i),u=!!i.shiftKey,c=!!i.altKey;this.keys[e].forEach(function(t){t.meta!==s||t.shift!==u||t.alt!==c&&void 0!==t.alt||(i.preventDefault(),i.stopPropagation(),"function"==typeof t.command?t.command.apply(this):!1!==t.command&&this.execAction(t.command))},this)}}});r.extensions.keyboardCommands=C}(),function(){var C=r.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){r.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(i){if(i.preventDefault(),i.stopPropagation(),!this.isDisplayed()){var e=this.document.queryCommandValue("fontName")+"";this.showForm(e)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(i){var e=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),e.value=i||"",e.focus()},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var i,e=this.document,s=e.createElement("div"),u=e.createElement("select"),c=e.createElement("a"),t=e.createElement("a");s.className="medium-editor-toolbar-form",s.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(s,"click",this.handleFormClick.bind(this));for(var n=0;n<this.fonts.length;n++)(i=e.createElement("option")).innerHTML=this.fonts[n],i.value=this.fonts[n],u.appendChild(i);return u.className="medium-editor-toolbar-select",s.appendChild(u),this.on(u,"change",this.handleFontChange.bind(this)),t.setAttribute("href","#"),t.className="medium-editor-toobar-save",t.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",s.appendChild(t),this.on(t,"click",this.handleSaveClick.bind(this),!0),c.setAttribute("href","#"),c.className="medium-editor-toobar-close",c.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",s.appendChild(c),this.on(c,"click",this.handleCloseClick.bind(this)),s},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){r.selection.getSelectedElements(this.document).forEach(function(i){"font"===i.nodeName.toLowerCase()&&i.hasAttribute("face")&&i.removeAttribute("face")})},handleFontChange:function(){var i=this.getSelect().value;""===i?this.clearFontName():this.execAction("fontName",{value:i})},handleFormClick:function(i){i.stopPropagation()},handleSaveClick:function(i){i.preventDefault(),this.doFormSave()},handleCloseClick:function(i){i.preventDefault(),this.doFormCancel()}});r.extensions.fontName=C}(),function(){var C=r.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){r.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(i){if(i.preventDefault(),i.stopPropagation(),!this.isDisplayed()){var e=this.document.queryCommandValue("fontSize")+"";this.showForm(e)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(i){var e=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),e.value=i||"",e.focus()},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var i=this.document,e=i.createElement("div"),s=i.createElement("input"),u=i.createElement("a"),c=i.createElement("a");return e.className="medium-editor-toolbar-form",e.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(e,"click",this.handleFormClick.bind(this)),s.setAttribute("type","range"),s.setAttribute("min","1"),s.setAttribute("max","7"),s.className="medium-editor-toolbar-input",e.appendChild(s),this.on(s,"change",this.handleSliderChange.bind(this)),c.setAttribute("href","#"),c.className="medium-editor-toobar-save",c.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",e.appendChild(c),this.on(c,"click",this.handleSaveClick.bind(this),!0),u.setAttribute("href","#"),u.className="medium-editor-toobar-close",u.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",e.appendChild(u),this.on(u,"click",this.handleCloseClick.bind(this)),e},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){r.selection.getSelectedElements(this.document).forEach(function(i){"font"===i.nodeName.toLowerCase()&&i.hasAttribute("size")&&i.removeAttribute("size")})},handleSliderChange:function(){var i=this.getInput().value;"4"===i?this.clearFontSize():this.execAction("fontSize",{value:i})},handleFormClick:function(i){i.stopPropagation()},handleSaveClick:function(i){i.preventDefault(),this.doFormSave()},handleCloseClick:function(i){i.preventDefault(),this.doFormCancel()}});r.extensions.fontSize=C}(),function(){function i(n,o,l){var d=n.clipboardData||o.clipboardData||l.dataTransfer,h={};if(!d)return h;if(d.getData){var p=d.getData("Text");p&&p.length>0&&(h["text/plain"]=p)}if(d.types)for(var g=0;g<d.types.length;g++){var b=d.types[g];h[b]=d.getData(b)}return h}var e="%ME_PASTEBIN%",s=null,u=null,c=function(n){n.stopPropagation()},t=r.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){r.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(n){this.on(n,"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(n,o){this.on(o,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(n,o){if(!n.defaultPrevented){var l=i(n,this.window,this.document),d=l["text/html"],h=l["text/plain"];this.window.clipboardData&&void 0===n.clipboardData&&!d&&(d=h),(d||h)&&(n.preventDefault(),this.doPaste(d,h,o))}},doPaste:function(n,o,l){var d,h,p="";if(this.cleanPastedHTML&&n)return this.cleanPaste(n);if(o){if(this.getEditorOption("disableReturn")||l&&l.getAttribute("data-disable-return"))p=r.util.htmlEntities(o);else if((d=o.split(/[\r\n]+/g)).length>1)for(h=0;h<d.length;h+=1)""!==d[h]&&(p+="<p>"+r.util.htmlEntities(d[h])+"</p>");else p=r.util.htmlEntities(d[0]);r.util.insertHTMLCommand(this.document,p)}},handlePasteBinPaste:function(n){if(!n.defaultPrevented){var o=i(n,this.window,this.document),l=o["text/html"],d=o["text/plain"],h=u;return!this.cleanPastedHTML||l?(n.preventDefault(),this.removePasteBin(),this.doPaste(l,d,h),void this.trigger("editablePaste",{currentTarget:h,target:h},h)):void setTimeout(function(){this.cleanPastedHTML&&(l=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(l,d,h),this.trigger("editablePaste",{currentTarget:h,target:h},h)}.bind(this),0)}this.removePasteBin()},handleKeydown:function(n,o){r.util.isKey(n,r.util.keyCode.V)&&r.util.isMetaCtrlKey(n)&&(n.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(o))},createPasteBin:function(n){var o,l=r.selection.getSelectionRange(this.document),d=this.window.pageYOffset;u=n,l&&(d+=(o=l.getClientRects()).length?o[0].top:void 0!==l.startContainer.getBoundingClientRect?l.startContainer.getBoundingClientRect().top:l.getBoundingClientRect().top),s=l;var h=this.document.createElement("div");h.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),h.setAttribute("style","border: 1px red solid; position: absolute; top: "+d+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),h.setAttribute("contentEditable",!0),h.innerHTML=e,this.document.body.appendChild(h),this.on(h,"focus",c),this.on(h,"focusin",c),this.on(h,"focusout",c),h.focus(),r.selection.selectNode(h,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(h,"paste",this.boundHandlePaste)},removePasteBin:function(){null!==s&&(r.selection.selectRange(this.document,s),s=null),null!==u&&(u=null);var n=this.getPasteBin();n&&n&&(this.off(n,"focus",c),this.off(n,"focusin",c),this.off(n,"focusout",c),this.off(n,"paste",this.boundHandlePaste),n.parentElement.removeChild(n))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var n=this.getPasteBin();if(!n||n.firstChild&&"mcepastebin"===n.firstChild.id)return!1;var o=n.innerHTML;return!(!o||o===e)&&o},cleanPaste:function(n){var o,l,d,h,p=/<p|<br|<div/.test(n),g=[].concat(this.preCleanReplacements||[],function C(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|\u201c|\u201d)(((?!&quot;|&rdquo;|&ldquo;|"|\u201c|\u201d).)*)(?:&quot;|&rdquo;|&ldquo;|"|\u201c|\u201d)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}(),this.cleanReplacements||[]);for(o=0;o<g.length;o+=1)n=n.replace(g[o][0],g[o][1]);if(!p)return this.pasteHTML(n);for((d=this.document.createElement("div")).innerHTML="<p>"+n.split("<br><br>").join("</p><p>")+"</p>",l=d.querySelectorAll("a,p,div,br"),o=0;o<l.length;o+=1)switch(h=l[o],h.innerHTML=h.innerHTML.replace(/\n/gi," "),h.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(h);break;case"br":this.filterLineBreak(h)}this.pasteHTML(d.innerHTML)},pasteHTML:function(n,o){o=r.util.defaults({},o,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var l,d,h,p,g=this.document.createDocumentFragment();for(g.appendChild(this.document.createElement("body")),(p=g.querySelector("body")).innerHTML=n,this.cleanupSpans(p),l=p.querySelectorAll("*"),h=0;h<l.length;h+=1)"a"===(d=l[h]).nodeName.toLowerCase()&&this.getEditorOption("targetBlank")&&r.util.setTargetBlank(d),r.util.cleanupAttrs(d,o.cleanAttrs),r.util.cleanupTags(d,o.cleanTags),r.util.unwrapTags(d,o.unwrapTags);r.util.insertHTMLCommand(this.document,p.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(n){return n&&("p"===n.nodeName.toLowerCase()||"div"===n.nodeName.toLowerCase())},filterCommonBlocks:function(n){/^\s*$/.test(n.textContent)&&n.parentNode&&n.parentNode.removeChild(n)},filterLineBreak:function(n){this.isCommonBlock(n.previousElementSibling)?this.removeWithParent(n):!this.isCommonBlock(n.parentNode)||n.parentNode.firstChild!==n&&n.parentNode.lastChild!==n?n.parentNode&&1===n.parentNode.childElementCount&&""===n.parentNode.textContent&&this.removeWithParent(n):this.removeWithParent(n)},removeWithParent:function(n){n&&n.parentNode&&(n.parentNode.parentNode&&1===n.parentNode.childElementCount?n.parentNode.parentNode.removeChild(n.parentNode):n.parentNode.removeChild(n))},cleanupSpans:function(n){var o,l,d,h=n.querySelectorAll(".replace-with"),p=function(g){return g&&"#text"!==g.nodeName&&"false"===g.getAttribute("contenteditable")};for(o=0;o<h.length;o+=1)(d=this.document.createElement((l=h[o]).classList.contains("bold")?"b":"i")).innerHTML=l.classList.contains("bold")&&l.classList.contains("italic")?"<i>"+l.innerHTML+"</i>":l.innerHTML,l.parentNode.replaceChild(d,l);for(h=n.querySelectorAll("span"),o=0;o<h.length;o+=1){if(r.util.traverseUp(l=h[o],p))return!1;r.util.unwrap(l,this.document)}}});r.extensions.paste=t}(),function(){var C=r.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){r.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(i,e){this.initElement(e)},initElement:function(i){i.getAttribute("data-placeholder")||i.setAttribute("data-placeholder",this.text),this.updatePlaceholder(i)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(i,e){this.cleanupElement(e)},cleanupElement:function(i){i.getAttribute("data-placeholder")===this.text&&i.removeAttribute("data-placeholder")},showPlaceholder:function(i){i&&(r.util.isFF&&0===i.childNodes.length?(i.classList.add("medium-editor-placeholder-relative"),i.classList.remove("medium-editor-placeholder")):(i.classList.add("medium-editor-placeholder"),i.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(i){i&&(i.classList.remove("medium-editor-placeholder"),i.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(i,e){return i.querySelector("img, blockquote, ul, ol, table")||""!==i.textContent.replace(/^\s+|\s+$/g,"")?this.hidePlaceholder(i):void(e||this.showPlaceholder(i))},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(i,e){var s=this.hideOnClick&&e===this.base.getFocusedElement();this.updatePlaceholder(e,s)},handleFocus:function(i,e){this.hidePlaceholder(e)},handleBlur:function(i,e){this.updatePlaceholder(e)}});r.extensions.placeholder=C}(),function(){var C=r.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){r.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(i,e){return this.base.extensions.forEach(function(s){return s!==this?i.apply(e||this,arguments):void 0},this)},createToolbar:function(){var i=this.document.createElement("div");return i.id="medium-editor-toolbar-"+this.getEditorId(),i.className="medium-editor-toolbar",i.className+=this.static?" static-toolbar":this.relativeContainer?" medium-editor-relative-toolbar":" medium-editor-stalker-toolbar",i.appendChild(this.createToolbarButtons()),this.forEachExtension(function(e){e.hasForm&&i.appendChild(e.getForm())}),this.attachEventHandlers(),i},createToolbarButtons:function(){var i,e,s,u,c,t,n=this.document.createElement("ul");return n.id="medium-editor-toolbar-actions"+this.getEditorId(),n.className="medium-editor-toolbar-actions",n.style.display="block",this.buttons.forEach(function(o){"string"==typeof o?(c=o,t=null):(c=o.name,t=o),(u=this.base.addBuiltInExtension(c,t))&&"function"==typeof u.getButton&&(e=u.getButton(this.base),i=this.document.createElement("li"),r.util.isElement(e)?i.appendChild(e):i.innerHTML=e,n.appendChild(i))},this),(s=n.querySelectorAll("button")).length>0&&(s[0].classList.add(this.firstButtonClass),s[s.length-1].classList.add(this.lastButtonClass)),n},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=r.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(i){return!(i&&i.target&&r.util.isDescendant(this.getToolbarElement(),i.target))&&void this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension(function(i){i.hasForm&&i.isDisplayed()&&i.hideForm()})},multipleBlockElementsSelected:function(){var e=new RegExp("<("+r.util.blockContainerElementNames.join("|")+")[^>]*>","g"),u=r.selection.getSelectionHtml(this.document).replace(/<[^\/>][^>]*><\/[^>]+>/gim,"").match(e);return!!u&&u.length>1},modifySelection:function(){var e=this.window.getSelection().getRangeAt(0);if(this.standardizeSelectionStart&&e.startContainer.nodeValue&&e.startOffset===e.startContainer.nodeValue.length){var s=r.util.findAdjacentTextNodeWithContent(r.selection.getSelectionElement(this.window),e.startContainer,this.document);if(s){for(var u=0;0===s.nodeValue.substr(u,1).trim().length;)u+=1;e=r.selection.select(this.document,s,u,e.endContainer,e.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||r.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var i=r.selection.getSelectionElement(this.window);return!i||-1===this.getEditorElements().indexOf(i)||i.getAttribute("data-disable-toolbar")?this.hideToolbar():this.updateOnEmptySelection&&this.static?this.showAndUpdateToolbar():!r.selection.selectionContainsContent(this.document)||!1===this.allowMultiParagraphSelection&&this.multipleBlockElementsSelected()?this.hideToolbar():void this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(i){"function"==typeof i.isActive&&"function"==typeof i.setInactive&&i.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){var i,e=[],s=null,u=r.selection.getSelectionRange(this.document),c=function(t){"function"==typeof t.checkState?t.checkState(i):"function"==typeof t.isActive&&"function"==typeof t.isAlreadyApplied&&"function"==typeof t.setActive&&!t.isActive()&&t.isAlreadyApplied(i)&&t.setActive()};if(u&&(this.forEachExtension(function(t){return"function"==typeof t.queryCommandState&&null!==(s=t.queryCommandState())?void(s&&"function"==typeof t.setActive&&t.setActive()):void e.push(t)}),i=r.selection.getSelectedParentElement(u),this.getEditorElements().some(function(t){return r.util.isDescendant(t,i,!0)})))for(;i&&(e.forEach(c),!r.util.isMediumEditorElement(i));)i=i.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var i=this.base.getFocusedElement(),e=this.window.getSelection();return i?void(!this.static&&e.isCollapsed||(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(i):this.positionToolbar(e)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))):this},positionStaticToolbar:function(i){this.getToolbarElement().style.left="0";var e,s=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,u=this.window.innerWidth,c=this.getToolbarElement(),t=i.getBoundingClientRect(),n=t.top+s,o=t.left+t.width/2,l=c.offsetHeight,d=c.offsetWidth,h=d/2;switch(this.sticky?s>n+i.offsetHeight-l-this.stickyTopOffset?(c.style.top=n+i.offsetHeight-l+"px",c.classList.remove("medium-editor-sticky-toolbar")):s>n-l-this.stickyTopOffset?(c.classList.add("medium-editor-sticky-toolbar"),c.style.top=this.stickyTopOffset+"px"):(c.classList.remove("medium-editor-sticky-toolbar"),c.style.top=n-l+"px"):c.style.top=n-l+"px",this.align){case"left":e=t.left;break;case"right":e=t.right-d;break;case"center":e=o-h}0>e?e=0:e+d>u&&(e=u-Math.ceil(d)-1),c.style.left=e+"px"},positionToolbar:function(i){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var e=i.getRangeAt(0),s=e.getBoundingClientRect();(!s||0===s.height&&0===s.width&&e.startContainer===e.endContainer)&&(s=1===e.startContainer.nodeType&&e.startContainer.querySelector("img")?e.startContainer.querySelector("img").getBoundingClientRect():e.startContainer.getBoundingClientRect());var u,c,t=this.window.innerWidth,n=this.getToolbarElement(),o=n.offsetHeight,d=n.offsetWidth/2,p=this.diffLeft-d,g=this.getEditorOption("elementsContainer"),b=["absolute","fixed"].indexOf(window.getComputedStyle(g).getPropertyValue("position"))>-1,E={},w={};b?(c=g.getBoundingClientRect(),["top","left"].forEach(function(S){w[S]=s[S]-c[S]}),w.width=s.width,w.height=s.height,s=w,t=c.width,E.top=g.scrollTop):E.top=this.window.pageYOffset,u=s.left+s.width/2,E.top+=s.top-o,s.top<50?(n.classList.add("medium-toolbar-arrow-over"),n.classList.remove("medium-toolbar-arrow-under"),E.top+=50+s.height-this.diffTop):(n.classList.add("medium-toolbar-arrow-under"),n.classList.remove("medium-toolbar-arrow-over"),E.top+=this.diffTop),d>u?(E.left=p+d,E.right="initial"):d>t-u?(E.left="auto",E.right=0):(E.left=p+u,E.right="initial"),["top","left","right"].forEach(function(S){n.style[S]=E[S]+(isNaN(E[S])?"":"px")})}});r.extensions.toolbar=C}(),function(){var C=r.Extension.extend({init:function(){r.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(i){var e="medium-editor-dragover";i.preventDefault(),i.dataTransfer.dropEffect="copy","dragover"===i.type?i.target.classList.add(e):"dragleave"===i.type&&i.target.classList.remove(e)},handleDrop:function(i){i.preventDefault(),i.stopPropagation(),i.dataTransfer.files&&Array.prototype.slice.call(i.dataTransfer.files,0).some(function(u){var c,t;u.type.match("image")&&((c=new FileReader).readAsDataURL(u),t="medium-img-"+ +new Date,r.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+t+'" />'),c.onload=function(){var n=this.document.getElementById(t);n&&(n.removeAttribute("id"),n.removeAttribute("class"),n.src=c.result)}.bind(this))}.bind(this)),i.target.classList.remove("medium-editor-dragover")}});r.extensions.imageDragging=C}(),function(){function C(a){var f=r.selection.getSelectionStart(this.options.ownerDocument),m=f.textContent,v=r.selection.getCaretOffsets(f);(void 0===m[v.left-1]||""===m[v.left-1].trim()||void 0!==m[v.left]&&""===m[v.left].trim())&&a.preventDefault()}function i(a,f){if(this.options.disableReturn||f.getAttribute("data-disable-return"))a.preventDefault();else if(this.options.disableDoubleReturn||f.getAttribute("data-disable-double-return")){var m=r.selection.getSelectionStart(this.options.ownerDocument);(m&&""===m.textContent.trim()&&"li"!==m.nodeName.toLowerCase()||m.previousElementSibling&&"br"!==m.previousElementSibling.nodeName.toLowerCase()&&""===m.previousElementSibling.textContent.trim())&&a.preventDefault()}}function e(a){var f=r.selection.getSelectionStart(this.options.ownerDocument);"pre"===(f&&f.nodeName.toLowerCase())&&(a.preventDefault(),r.util.insertHTMLCommand(this.options.ownerDocument,"    ")),r.util.isListItem(f)&&(a.preventDefault(),this.options.ownerDocument.execCommand(a.shiftKey?"outdent":"indent",!1,null))}function s(a){var f,m=r.selection.getSelectionStart(this.options.ownerDocument),v=m.nodeName.toLowerCase(),x=/^(\s+|<br\/?>)?$/i,T=/h\d/i;r.util.isKey(a,[r.util.keyCode.BACKSPACE,r.util.keyCode.ENTER])&&m.previousElementSibling&&T.test(v)&&0===r.selection.getCaretOffsets(m).left?r.util.isKey(a,r.util.keyCode.BACKSPACE)&&x.test(m.previousElementSibling.innerHTML)?(m.previousElementSibling.parentNode.removeChild(m.previousElementSibling),a.preventDefault()):!this.options.disableDoubleReturn&&r.util.isKey(a,r.util.keyCode.ENTER)&&((f=this.options.ownerDocument.createElement("p")).innerHTML="<br>",m.previousElementSibling.parentNode.insertBefore(f,m),a.preventDefault()):r.util.isKey(a,r.util.keyCode.DELETE)&&m.nextElementSibling&&m.previousElementSibling&&!T.test(v)&&x.test(m.innerHTML)&&T.test(m.nextElementSibling.nodeName.toLowerCase())?(r.selection.moveCursor(this.options.ownerDocument,m.nextElementSibling),m.previousElementSibling.parentNode.removeChild(m),a.preventDefault()):r.util.isKey(a,r.util.keyCode.BACKSPACE)&&"li"===v&&x.test(m.innerHTML)&&!m.previousElementSibling&&!m.parentElement.previousElementSibling&&m.nextElementSibling&&"li"===m.nextElementSibling.nodeName.toLowerCase()?((f=this.options.ownerDocument.createElement("p")).innerHTML="<br>",m.parentElement.parentElement.insertBefore(f,m.parentElement),r.selection.moveCursor(this.options.ownerDocument,f),m.parentElement.removeChild(m),a.preventDefault()):r.util.isKey(a,r.util.keyCode.BACKSPACE)&&!1!==r.util.getClosestTag(m,"blockquote")&&0===r.selection.getCaretOffsets(m).left?(a.preventDefault(),r.util.execFormatBlock(this.options.ownerDocument,"p")):r.util.isKey(a,r.util.keyCode.ENTER)&&!1!==r.util.getClosestTag(m,"blockquote")&&0===r.selection.getCaretOffsets(m).right?((f=this.options.ownerDocument.createElement("p")).innerHTML="<br>",m.parentElement.insertBefore(f,m.nextSibling),r.selection.moveCursor(this.options.ownerDocument,f),a.preventDefault()):r.util.isKey(a,r.util.keyCode.BACKSPACE)&&r.util.isMediumEditorElement(m.parentElement)&&!m.previousElementSibling&&m.nextElementSibling&&x.test(m.innerHTML)&&(a.preventDefault(),r.selection.moveCursor(this.options.ownerDocument,m.nextSibling),m.parentElement.removeChild(m))}function u(a){var m=r.selection.getSelectionStart(this.options.ownerDocument);m&&(r.util.isMediumEditorElement(m)&&0===m.children.length&&!r.util.isBlockContainer(m)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),!r.util.isKey(a,r.util.keyCode.ENTER)||r.util.isListItem(m)||r.util.isBlockContainer(m)||("a"===m.nodeName.toLowerCase()?this.options.ownerDocument.execCommand("unlink",!1,null):a.shiftKey||a.ctrlKey||this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function c(a,f){var m=f.parentNode.querySelector('textarea[medium-editor-textarea-id="'+f.getAttribute("medium-editor-textarea-id")+'"]');m&&(m.value=f.innerHTML.trim())}function t(a){a._mediumEditors||(a._mediumEditors=[null]),this.id||(this.id=a._mediumEditors.length),a._mediumEditors[this.id]=this}function n(a){a._mediumEditors&&a._mediumEditors[this.id]&&(a._mediumEditors[this.id]=null)}function o(a,f,m){var v=[];if(a||(a=[]),"string"==typeof a&&(a=f.querySelectorAll(a)),r.util.isElement(a)&&(a=[a]),m)for(var x=0;x<a.length;x++){var T=a[x];!r.util.isElement(T)||T.getAttribute("data-medium-editor-element")||T.getAttribute("medium-editor-textarea-id")||v.push(T)}else v=Array.prototype.slice.apply(a);return v}function l(a){var f=a.parentNode.querySelector('textarea[medium-editor-textarea-id="'+a.getAttribute("medium-editor-textarea-id")+'"]');f&&(f.classList.remove("medium-editor-hidden"),f.removeAttribute("medium-editor-textarea-id")),a.parentNode&&a.parentNode.removeChild(a)}function h(a,f,m){return a=function d(a,f){return Object.keys(f).forEach(function(m){void 0===a[m]&&(a[m]=f[m])}),a}(a,{window:m.options.contentWindow,document:m.options.ownerDocument,base:m}),"function"==typeof a.init&&a.init(),a.name||(a.name=f),a}function p(){return!this.elements.every(function(a){return!!a.getAttribute("data-disable-toolbar")})&&!1!==this.options.toolbar}function g(){return!!p.call(this)&&!1!==this.options.anchorPreview}function b(){return!1!==this.options.placeholder}function E(){return!1!==this.options.autoLink}function w(){return!1!==this.options.imageDragging}function S(){return!1!==this.options.keyboardCommands}function N(){return!this.options.extensions.imageDragging}function P(a){for(var f=this.options.ownerDocument.createElement("div"),m=Date.now(),v="medium-editor-"+m,x=a.attributes;this.options.ownerDocument.getElementById(v);)m++,v="medium-editor-"+m;f.className=a.className,f.id=v,f.innerHTML=a.value,a.setAttribute("medium-editor-textarea-id",v);for(var T=0,M=x.length;M>T;T++)f.hasAttribute(x[T].nodeName)||f.setAttribute(x[T].nodeName,x[T].value);return a.form&&this.on(a.form,"reset",function(O){O.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(v))}.bind(this)),a.classList.add("medium-editor-hidden"),a.parentNode.insertBefore(f,a),f}function q(a,f){if(!a.getAttribute("data-medium-editor-element")){"textarea"===a.nodeName.toLowerCase()&&(a=P.call(this,a),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=c.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),this.options.disableEditing||a.getAttribute("data-disable-editing")||(a.setAttribute("contentEditable",!0),a.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(a.getAttribute("data-disable-return")||a.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=i.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),this.options.disableReturn||a.getAttribute("data-disable-return")||this.on(a,"keyup",u.bind(this));var m=r.util.guid();a.setAttribute("data-medium-editor-element",!0),a.classList.add("medium-editor-element"),a.setAttribute("role","textbox"),a.setAttribute("aria-multiline",!0),a.setAttribute("data-medium-editor-editor-index",f),a.setAttribute("medium-editor-index",m),H[m]=a.innerHTML,this.events.attachAllEventsToElement(a)}return a}function y(){this.subscribe("editableKeydownTab",e.bind(this)),this.subscribe("editableKeydownDelete",s.bind(this)),this.subscribe("editableKeydownEnter",s.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",C.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=i.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function A(){if(this.extensions=[],Object.keys(this.options.extensions).forEach(function(x){"toolbar"!==x&&this.options.extensions[x]&&this.extensions.push(h(this.options.extensions[x],x,this))},this),N.call(this)){var a=this.options.fileDragging;a||(a={},w.call(this)||(a.allowedTypes=[])),this.addBuiltInExtension("fileDragging",a)}var f={paste:!0,"anchor-preview":g.call(this),autoLink:E.call(this),keyboardCommands:S.call(this),placeholder:b.call(this)};Object.keys(f).forEach(function(x){f[x]&&this.addBuiltInExtension(x)},this);var m=this.options.extensions.toolbar;if(!m&&p.call(this)){var v=r.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});m=new r.extensions.toolbar(v)}m&&this.extensions.push(h(m,"toolbar",this))}function k(a,f){return f&&[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]].forEach(function(v){f.hasOwnProperty(v[0])&&void 0!==f[v[0]]&&r.util.deprecated(v[0],v[1],"v6.0.0")}),r.util.defaults({},f,a)}function B(a,f){var m;if(m=/^append-(.+)$/gi.exec(a))return r.util.execFormatBlock(this.options.ownerDocument,m[1]);if("fontSize"===a)return f.size&&r.util.deprecated(".size option for fontSize command",".value","6.0.0"),this.options.ownerDocument.execCommand("fontSize",!1,f.value||f.size);if("fontName"===a)return f.name&&r.util.deprecated(".name option for fontName command",".value","6.0.0"),this.options.ownerDocument.execCommand("fontName",!1,f.value||f.name);if("createLink"===a)return this.createLink(f);if("image"===a){var M=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,M)}if("html"===a){var O=this.options.contentWindow.getSelection().toString().trim();return r.util.insertHTMLCommand(this.options.ownerDocument,O)}if(/justify([A-Za-z]*)$/g.exec(a)){var R=this.options.ownerDocument.execCommand(a,!1,null),L=r.selection.getSelectedParentElement(r.selection.getSelectionRange(this.options.ownerDocument));return L&&I.call(this,r.util.getTopBlockContainer(L)),R}return this.options.ownerDocument.execCommand(a,!1,f&&f.value)}function I(a){if(a){var f,m=Array.prototype.slice.call(a.childNodes).filter(function(v){var x="div"===v.nodeName.toLowerCase();return x&&!f&&(f=v.style.textAlign),x});m.length&&(this.saveSelection(),m.forEach(function(v){if(v.style.textAlign===f){var x=v.lastChild;if(x){r.util.unwrap(v,this.options.ownerDocument);var T=this.options.ownerDocument.createElement("BR");x.parentNode.insertBefore(T,x.nextSibling)}}},this),a.style.textAlign=f,this.restoreSelection())}}var H={};r.prototype={init:function(a,f){return this.options=k.call(this,this.defaults,f),this.origElements=a,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(t.call(this,this.options.contentWindow),this.events=new r.Events(this),this.elements=[],this.addElements(this.origElements),0!==this.elements.length&&(this.isActive=!0,A.call(this),y.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(a){"function"==typeof a.destroy&&a.destroy()},this),this.events.destroy(),this.elements.forEach(function(a){this.options.spellcheck&&(a.innerHTML=a.innerHTML),a.removeAttribute("contentEditable"),a.removeAttribute("spellcheck"),a.removeAttribute("data-medium-editor-element"),a.classList.remove("medium-editor-element"),a.removeAttribute("role"),a.removeAttribute("aria-multiline"),a.removeAttribute("medium-editor-index"),a.removeAttribute("data-medium-editor-editor-index"),a.getAttribute("medium-editor-textarea-id")&&l(a)},this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,n.call(this,this.options.contentWindow))},on:function(a,f,m,v){return this.events.attachDOMEvent(a,f,m,v),this},off:function(a,f,m,v){return this.events.detachDOMEvent(a,f,m,v),this},subscribe:function(a,f){return this.events.attachCustomEvent(a,f),this},unsubscribe:function(a,f){return this.events.detachCustomEvent(a,f),this},trigger:function(a,f,m){return this.events.triggerCustomEvent(a,f,m),this},delay:function(a){var f=this;return setTimeout(function(){f.isActive&&a()},this.options.delay)},serialize:function(){var a,m={},v=this.elements.length;for(a=0;v>a;a+=1)m[""!==this.elements[a].id?this.elements[a].id:"element-"+a]={value:this.elements[a].innerHTML.trim()};return m},getExtensionByName:function(a){var f;return this.extensions&&this.extensions.length&&this.extensions.some(function(m){return m.name===a&&(f=m,!0)}),f},addBuiltInExtension:function(a,f){var m,v=this.getExtensionByName(a);if(v)return v;switch(a){case"anchor":m=r.util.extend({},this.options.anchor,f),v=new r.extensions.anchor(m);break;case"anchor-preview":v=new r.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":v=new r.extensions.autoLink;break;case"fileDragging":v=new r.extensions.fileDragging(f);break;case"fontname":v=new r.extensions.fontName(this.options.fontName);break;case"fontsize":v=new r.extensions.fontSize(f);break;case"keyboardCommands":v=new r.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":v=new r.extensions.paste(this.options.paste);break;case"placeholder":v=new r.extensions.placeholder(this.options.placeholder);break;default:r.extensions.button.isBuiltInButton(a)&&(f?(m=r.util.defaults({},f,r.extensions.button.prototype.defaults[a]),v=new r.extensions.button(m)):v=new r.extensions.button(a))}return v&&this.extensions.push(h(v,a,this)),v},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var a=this.getExtensionByName("toolbar");return a&&a.checkState(),this},queryCommandState:function(a){var f,v=null;(f=/^full-(.+)$/gi.exec(a))&&(a=f[1]);try{v=this.options.ownerDocument.queryCommandState(a)}catch{v=null}return v},execAction:function(a,f){var m,v;return(m=/^full-(.+)$/gi.exec(a))?(this.saveSelection(),this.selectAllContents(),v=B.call(this,m[1],f),this.restoreSelection()):v=B.call(this,a,f),"insertunorderedlist"!==a&&"insertorderedlist"!==a||r.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),v},getSelectedParentElement:function(a){return void 0===a&&(a=this.options.contentWindow.getSelection().getRangeAt(0)),r.selection.getSelectedParentElement(a)},selectAllContents:function(){var a=r.selection.getSelectionElement(this.options.contentWindow);if(a){for(;1===a.children.length;)a=a.children[0];this.selectElement(a)}},selectElement:function(a){r.selection.selectNode(a,this.options.ownerDocument);var f=r.selection.getSelectionElement(this.options.contentWindow);f&&this.events.focusElement(f)},getFocusedElement:function(){var a;return this.elements.some(function(f){return!a&&f.getAttribute("data-medium-focused")&&(a=f),!!a},this),a},exportSelection:function(){var a=r.selection.getSelectionElement(this.options.contentWindow),f=this.elements.indexOf(a),m=null;return f>=0&&(m=r.selection.exportSelection(a,this.options.ownerDocument)),null!==m&&0!==f&&(m.editableElementIndex=f),m},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(a,f){a&&r.selection.importSelection(a,this.elements[a.editableElementIndex||0],this.options.ownerDocument,f)},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(a){var f,m=r.selection.getSelectionElement(this.options.contentWindow),v={};if(-1!==this.elements.indexOf(m)){try{if(this.events.disableCustomEvent("editableInput"),a.url&&r.util.deprecated(".url option for createLink",".value","6.0.0"),(f=a.url||a.value)&&f.trim().length>0){var x=this.options.contentWindow.getSelection();if(x){var T,M,O,R,L=x.getRangeAt(0),K=L.commonAncestorContainer;if(3===L.endContainer.nodeType&&3!==L.startContainer.nodeType&&0===L.startOffset&&L.startContainer.firstChild===L.endContainer&&(K=L.endContainer),M=r.util.getClosestBlockContainer(L.startContainer),O=r.util.getClosestBlockContainer(L.endContainer),3!==K.nodeType&&0!==K.textContent.length&&M===O){var D=M||m,F=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),T=this.exportSelection(),F.appendChild(D.cloneNode(!0)),m===D?r.selection.select(this.options.ownerDocument,D.firstChild,0,D.lastChild,3===D.lastChild.nodeType?D.lastChild.nodeValue.length:D.lastChild.childNodes.length):r.selection.select(this.options.ownerDocument,D,0,D,D.childNodes.length);var U=this.exportSelection();0===(R=r.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,F,{start:T.start-U.start,end:T.end-U.start,editableElementIndex:T.editableElementIndex})).length&&((F=this.options.ownerDocument.createDocumentFragment()).appendChild(K.cloneNode(!0)),R=[F.firstChild.firstChild,F.firstChild.lastChild]),r.util.createLink(this.options.ownerDocument,R,f.trim());var W=(F.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;r.util.insertHTMLCommand(this.options.ownerDocument,F.firstChild.innerHTML.replace(/^\s+/,"")),T.start-=W,T.end-=W,this.importSelection(T)}else this.options.ownerDocument.execCommand("createLink",!1,f);this.options.targetBlank||"_blank"===a.target?r.util.setTargetBlank(r.selection.getSelectionStart(this.options.ownerDocument),f):r.util.removeTargetBlank(r.selection.getSelectionStart(this.options.ownerDocument),f),a.buttonClass&&r.util.addClassToAnchors(r.selection.getSelectionStart(this.options.ownerDocument),a.buttonClass)}}if(this.options.targetBlank||"_blank"===a.target||a.buttonClass){(v=this.options.ownerDocument.createEvent("HTMLEvents")).initEvent("input",!0,!0,this.options.contentWindow);for(var _=0,z=this.elements.length;z>_;_+=1)this.elements[_].dispatchEvent(v)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",v,m)}},cleanPaste:function(a){this.getExtensionByName("paste").cleanPaste(a)},pasteHTML:function(a,f){this.getExtensionByName("paste").pasteHTML(a,f)},setContent:function(a,f){if(this.elements[f=f||0]){var m=this.elements[f];m.innerHTML=a,this.checkContentChanged(m)}},getContent:function(a){return this.elements[a=a||0]?this.elements[a].innerHTML.trim():null},checkContentChanged:function(a){a=a||r.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(a,{target:a,currentTarget:a})},resetContent:function(a){if(a){var f=this.elements.indexOf(a);-1!==f&&this.setContent(H[a.getAttribute("medium-editor-index")],f)}else this.elements.forEach(function(m,v){this.setContent(H[m.getAttribute("medium-editor-index")],v)},this)},addElements:function(a){var f=o(a,this.options.ownerDocument,!0);return 0!==f.length&&void f.forEach(function(m){m=q.call(this,m,this.id),this.elements.push(m),this.trigger("addElement",{target:m,currentTarget:m},m)},this)},removeElements:function(a){var m=o(a,this.options.ownerDocument).map(function(v){return v.getAttribute("medium-editor-textarea-id")&&v.parentNode?v.parentNode.querySelector('div[medium-editor-textarea-id="'+v.getAttribute("medium-editor-textarea-id")+'"]'):v});this.elements=this.elements.filter(function(v){return-1===m.indexOf(v)||(this.events.cleanupElement(v),v.getAttribute("medium-editor-textarea-id")&&l(v),this.trigger("removeElement",{target:v,currentTarget:v},v),!1)},this)}},r.getEditorFromElement=function(a){var f=a.getAttribute("data-medium-editor-editor-index"),m=a&&a.ownerDocument&&(a.ownerDocument.defaultView||a.ownerDocument.parentWindow);return m&&m._mediumEditors&&m._mediumEditors[f]?m._mediumEditors[f]:null}}(),r.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0},r.parseVersionString=function(C){var i=C.split("-"),e=i[0].split("."),s=i.length>1?i[1]:"";return{major:parseInt(e[0],10),minor:parseInt(e[1],10),revision:parseInt(e[2],10),preRelease:s,toString:function(){return[e[0],e[1],e[2]].join(".")+(s?"-"+s:"")}}},r.version=r.parseVersionString.call(this,"5.23.3"),r;var C}());