(self.webpackChunkcyclops=self.webpackChunkcyclops||[]).push([[627],{7627:(G,o,x)=>{"use strict";x.r(o),x.d(o,{AdhocToolsModule:()=>we});var s=x(6895),O=x(4586),R=x(9646),H=x(515),E=x(4004),T=x(8312),v=x(4482),D=x(2733),z=x(1005),N=x(2340),B=x(7340);const _=[(0,B.X$)("openClose",[(0,B.SB)("open",(0,B.oB)({height:"200px",opacity:1,backgroundColor:"yellow"})),(0,B.SB)("closed",(0,B.oB)({height:"100px",opacity:0,backgroundColor:"green"})),(0,B.eR)("open => closed",[(0,B.jt)("3s")]),(0,B.eR)("closed => open",[(0,B.jt)("3s")]),(0,B.eR)("void => *",[(0,B.oB)({opacity:0}),(0,B.jt)("600ms")]),(0,B.eR)("* => void",[(0,B.oB)({opacity:1}),(0,B.jt)("600ms")]),(0,B.SB)("void",(0,B.oB)({opacity:"0"}))]),(0,B.X$)("init",[(0,B.eR)(":enter",[(0,B.oB)({opacity:0}),(0,B.jt)(250,(0,B.oB)({opacity:"1"}))]),(0,B.eR)(":leave",[(0,B.oB)({opacity:"1"}),(0,B.jt)(250,(0,B.oB)({opacity:0}))])])];var t=x(4650),A=x(529),C=x(1135),y=x(7579),P=x(8505),n=x(8746);const i=N.N.url;class h{constructor(K){this.http=K,this.mobSfTasks$=new C.X([]),this.mobSfReports$=new C.X([]),this.localUrl="",this.refreshMobSfTasks()}getTaskStatus(K){return this.http.get(i+"/scan/status/"+K)}stopTask(K){return this.http.get(i+"/scan/stop/"+K)}deleteAll(){return this.http.get(i+"/scan/removeAll/mobsf").pipe((0,P.b)(S=>{this.refreshMobSfTasks()}))}refreshMobSfTasks(){let K=i+"/scan/list/mobsf";return this.refreshMobSfCompletedTasks(),this.http.get(K).subscribe(S=>{this.mobSfTasks$.next(S.data)})}refreshMobSfCompletedTasks(){return this.http.get(i+"/scan/list/result/mobsf").subscribe(S=>{this.mobSfReports$.next(S.data)})}upload(K,S){let re,ne=i+"/scan/upload/file/mobsf";console.log("uploading",ne);const be=new FormData;be.append("files",K,K.name);let Le=new A.WM,Fe=this.http.post(ne,be,{reportProgress:!0,observe:"events",headers:Le});const Re=new y.x;return Fe.pipe((0,n.x)(()=>this.refreshMobSfTasks())).subscribe(Oe=>{if(Oe.type===A.dt.UploadProgress){const Ie=Math.round(100*Oe.loaded/Oe.total);Re.next({status:!1,progress:Ie})}else Oe instanceof A.Zn&&(Re.next({status:!0,progress:100,fileData:Oe.body}),Re.complete())}),re=Re.asObservable(),re}}h.\u0275fac=function(K){return new(K||h)(t.LFG(A.eN))},h.\u0275prov=t.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"});var m=x(9207),d=x(1576),b=x(5829),f=x(4968),u=x(457),w=x(2722),k=x(8372),j=x(9300),$=x(6036),ee=x.t($,2),te=x(2813),ae=x.t(te,2);const ge=["pdfViewerContainer"];function a(X,K,S){X[K]=S}function e(){return typeof window>"u"}e()||a(ee,"verbosity",$.VerbosityLevel.INFOS);var r=(()=>{return(X=r||(r={}))[X.DISABLED=0]="DISABLED",X[X.ENABLED=1]="ENABLED",X[X.ENHANCED=2]="ENHANCED",r;var X})();let l=(()=>{class X{constructor(S,ne){if(this.element=S,this.ngZone=ne,this.isVisible=!1,this._cMapsUrl=typeof ee<"u"?`https://unpkg.com/pdfjs-dist@${$.version}/cmaps/`:null,this._imageResourcesPath=typeof ee<"u"?`https://unpkg.com/pdfjs-dist@${$.version}/web/images/`:null,this._renderText=!0,this._renderTextMode=r.ENABLED,this._stickToPage=!1,this._originalSize=!0,this._page=1,this._zoom=1,this._zoomScale="page-width",this._rotation=0,this._showAll=!0,this._canAutoResize=!0,this._fitToPage=!1,this._externalLinkTarget="blank",this._showBorders=!1,this.resizeTimeout=null,this.pageScrollTimeout=null,this.isInitialized=!1,this.destroy$=new y.x,this.afterLoadComplete=new t.vpe,this.pageRendered=new t.vpe,this.pageInitialized=new t.vpe,this.textLayerRendered=new t.vpe,this.onError=new t.vpe,this.onProgress=new t.vpe,this.pageChange=new t.vpe(!0),e())return;let re;re=window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${$.version}/legacy/build/pdf.worker.min.js`,a($.GlobalWorkerOptions,"workerSrc",re)}set cMapsUrl(S){this._cMapsUrl=S}set page(S){const ne=S=parseInt(S,10)||1;this._pdf&&(S=this.getValidPageNumber(S)),this._page=S,ne!==S&&this.pageChange.emit(S)}set renderText(S){this._renderText=S}set renderTextMode(S){this._renderTextMode=S}set originalSize(S){this._originalSize=S}set showAll(S){this._showAll=S}set stickToPage(S){this._stickToPage=S}set zoom(S){S<=0||(this._zoom=S)}get zoom(){return this._zoom}set zoomScale(S){this._zoomScale=S}get zoomScale(){return this._zoomScale}set rotation(S){"number"==typeof S&&S%90==0?this._rotation=S:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(S){this._externalLinkTarget=S}set autoresize(S){this._canAutoResize=Boolean(S)}set fitToPage(S){this._fitToPage=Boolean(S)}set showBorders(S){this._showBorders=Boolean(S)}static getLinkTarget(S){switch(S){case"blank":return te.LinkTarget.BLANK;case"none":return te.LinkTarget.NONE;case"self":return te.LinkTarget.SELF;case"parent":return te.LinkTarget.PARENT;case"top":return te.LinkTarget.TOP}return null}ngAfterViewChecked(){if(this.isInitialized)return;const S=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=S?!1===this.isVisible&&null!=S&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(S){if(!e()&&this.isVisible)if("src"in S)this.loadPDF();else if(this._pdf){if("renderText"in S?(this.pdfViewer.textLayerMode=this._renderText?this._renderTextMode:r.DISABLED,this.resetPdfDocument()):"showAll"in S&&(this.setupViewer(),this.resetPdfDocument()),"page"in S){const{page:ne}=S;if(ne.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){(0,u.D)(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe((0,w.R)(this.destroy$)).subscribe({next:S=>{const ne=this._rotation||S.rotate,re=S.getViewport({scale:this._zoom,rotation:ne}).width*X.CSS_UNITS;let be=this._zoom,Le=!0;if(!this._originalSize||this._fitToPage&&re>this.pdfViewerContainer.nativeElement.clientWidth){const Fe=S.getViewport({scale:1,rotation:ne});be=this.getScale(Fe.width,Fe.height),Le=!this._stickToPage}this.pdfViewer._setScale(be,Le)}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=null,this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null,null),this.pdfFindController.setDocument(null))}getPDFLinkServiceConfig(){const S=X.getLinkTarget(this._externalLinkTarget);return S?{externalLinkTarget:S}:{}}initEventBus(){this.eventBus=function de(X,K){const S=new X.EventBus;return function F(X,K){(0,f.R)(X,"documentload").pipe((0,w.R)(K)).subscribe(()=>{const S=document.createEvent("CustomEvent");S.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(S)}),(0,f.R)(X,"pagerendered").pipe((0,w.R)(K)).subscribe(({pageNumber:S,cssTransform:ne,source:re})=>{const be=document.createEvent("CustomEvent");be.initCustomEvent("pagerendered",!0,!0,{pageNumber:S,cssTransform:ne}),re.div.dispatchEvent(be)}),(0,f.R)(X,"textlayerrendered").pipe((0,w.R)(K)).subscribe(({pageNumber:S,source:ne})=>{const re=document.createEvent("CustomEvent");re.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:S}),ne.textLayerDiv.dispatchEvent(re)}),(0,f.R)(X,"pagechanging").pipe((0,w.R)(K)).subscribe(({pageNumber:S,source:ne})=>{const re=document.createEvent("UIEvents");re.initEvent("pagechanging",!0,!0),re.pageNumber=S,ne.container.dispatchEvent(re)}),(0,f.R)(X,"pagesinit").pipe((0,w.R)(K)).subscribe(({source:S})=>{const ne=document.createEvent("CustomEvent");ne.initCustomEvent("pagesinit",!0,!0,null),S.container.dispatchEvent(ne)}),(0,f.R)(X,"pagesloaded").pipe((0,w.R)(K)).subscribe(({pagesCount:S,source:ne})=>{const re=document.createEvent("CustomEvent");re.initCustomEvent("pagesloaded",!0,!0,{pagesCount:S}),ne.container.dispatchEvent(re)}),(0,f.R)(X,"scalechange").pipe((0,w.R)(K)).subscribe(({scale:S,presetValue:ne,source:re})=>{const be=document.createEvent("UIEvents");be.initEvent("scalechange",!0,!0),be.scale=S,be.presetValue=ne,re.container.dispatchEvent(be)}),(0,f.R)(X,"updateviewarea").pipe((0,w.R)(K)).subscribe(({location:S,source:ne})=>{const re=document.createEvent("UIEvents");re.initEvent("updateviewarea",!0,!0),re.location=S,ne.container.dispatchEvent(re)}),(0,f.R)(X,"find").pipe((0,w.R)(K)).subscribe(({source:S,type:ne,query:re,phraseSearch:be,caseSensitive:Le,highlightAll:Fe,findPrevious:Re})=>{if(S===window)return;const Oe=document.createEvent("CustomEvent");Oe.initCustomEvent("find"+ne,!0,!0,{query:re,phraseSearch:be,caseSensitive:Le,highlightAll:Fe,findPrevious:Re}),window.dispatchEvent(Oe)}),(0,f.R)(X,"attachmentsloaded").pipe((0,w.R)(K)).subscribe(({attachmentsCount:S,source:ne})=>{const re=document.createEvent("CustomEvent");re.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:S}),ne.container.dispatchEvent(re)}),(0,f.R)(X,"sidebarviewchanged").pipe((0,w.R)(K)).subscribe(({view:S,source:ne})=>{const re=document.createEvent("CustomEvent");re.initCustomEvent("sidebarviewchanged",!0,!0,{view:S}),ne.outerContainer.dispatchEvent(re)}),(0,f.R)(X,"pagemode").pipe((0,w.R)(K)).subscribe(({mode:S,source:ne})=>{const re=document.createEvent("CustomEvent");re.initCustomEvent("pagemode",!0,!0,{mode:S}),ne.pdfViewer.container.dispatchEvent(re)}),(0,f.R)(X,"namedaction").pipe((0,w.R)(K)).subscribe(({action:S,source:ne})=>{const re=document.createEvent("CustomEvent");re.initCustomEvent("namedaction",!0,!0,{action:S}),ne.pdfViewer.container.dispatchEvent(re)}),(0,f.R)(X,"presentationmodechanged").pipe((0,w.R)(K)).subscribe(({active:S,switchInProgress:ne})=>{const re=document.createEvent("CustomEvent");re.initCustomEvent("presentationmodechanged",!0,!0,{active:S,switchInProgress:ne}),window.dispatchEvent(re)}),(0,f.R)(X,"outlineloaded").pipe((0,w.R)(K)).subscribe(({outlineCount:S,source:ne})=>{const re=document.createEvent("CustomEvent");re.initCustomEvent("outlineloaded",!0,!0,{outlineCount:S}),ne.container.dispatchEvent(re)})}(S,K),S}(ae,this.destroy$),(0,f.R)(this.eventBus,"pagerendered").pipe((0,w.R)(this.destroy$)).subscribe(S=>{this.pageRendered.emit(S)}),(0,f.R)(this.eventBus,"pagesinit").pipe((0,w.R)(this.destroy$)).subscribe(S=>{this.pageInitialized.emit(S)}),(0,f.R)(this.eventBus,"pagechanging").pipe((0,w.R)(this.destroy$)).subscribe(({pageNumber:S})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=S,this.pageChange.emit(S)},100)}),(0,f.R)(this.eventBus,"textlayerrendered").pipe((0,w.R)(this.destroy$)).subscribe(S=>{this.textLayerRendered.emit(S)})}initPDFServices(){this.pdfLinkService=new te.PDFLinkService({eventBus:this.eventBus,...this.getPDFLinkServiceConfig()}),this.pdfFindController=new te.PDFFindController({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:r.DISABLED,findController:this.pdfFindController,renderer:"canvas",l10n:void 0,imageResourcesPath:this._imageResourcesPath}}setupViewer(){a(ee,"disableTextLayer",!this._renderText),this.initPDFServices(),this.pdfViewer=this._showAll?new te.PDFViewer(this.getPDFOptions()):new te.PDFSinglePageViewer(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(S){return S<1?1:S>this._pdf.numPages?this._pdf.numPages:S}getDocumentParams(){const S=typeof this.src;if(!this._cMapsUrl)return this.src;const ne={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0};return"string"===S?ne.url=this.src:"object"===S&&(void 0!==this.src.byteLength?ne.data=this.src:Object.assign(ne,this.src)),ne}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.setupViewer(),this.loadingTask=$.getDocument(this.getDocumentParams()),this.loadingTask.onProgress=ne=>{this.onProgress.emit(ne)};const S=this.src;(0,u.D)(this.loadingTask.promise).pipe((0,w.R)(this.destroy$)).subscribe({next:ne=>{this._pdf=ne,this.lastLoaded=S,this.afterLoadComplete.emit(ne),this.resetPdfDocument(),this.update()},error:ne=>{this.lastLoaded=null,this.onError.emit(ne)}})}update(){this.page=this._page,this.render()}render(){this._page=this.getValidPageNumber(this._page),(0!==this._rotation||this.pdfViewer.pagesRotation!==this._rotation)&&setTimeout(()=>{this.pdfViewer.pagesRotation=this._rotation}),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.updateSize()}getScale(S,ne){const re=this._showBorders?2*X.BORDER_WIDTH:0,be=this.pdfViewerContainer.nativeElement.clientWidth-re,Le=this.pdfViewerContainer.nativeElement.clientHeight-re;if(0===Le||0===ne||0===be||0===S)return 1;let Fe=1;switch(this._zoomScale){case"page-fit":Fe=Math.min(Le/ne,be/S);break;case"page-height":Fe=Le/ne;break;default:Fe=be/S}return this._zoom*Fe/X.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){e()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){e()||this.ngZone.runOutsideAngular(()=>{(0,f.R)(window,"resize").pipe((0,k.b)(100),(0,j.h)(()=>this._canAutoResize&&!!this._pdf),(0,w.R)(this.destroy$)).subscribe(()=>{this.updateSize()})})}}return X.CSS_UNITS=96/72,X.BORDER_WIDTH=9,X.\u0275fac=function(S){return new(S||X)(t.Y36(t.SBq),t.Y36(t.R0b))},X.\u0275cmp=t.Xpm({type:X,selectors:[["pdf-viewer"]],viewQuery:function(S,ne){if(1&S&&t.Gf(ge,5),2&S){let re;t.iGM(re=t.CRH())&&(ne.pdfViewerContainer=re.first)}},inputs:{src:"src",cMapsUrl:["c-maps-url","cMapsUrl"],page:"page",renderText:["render-text","renderText"],renderTextMode:["render-text-mode","renderTextMode"],originalSize:["original-size","originalSize"],showAll:["show-all","showAll"],stickToPage:["stick-to-page","stickToPage"],zoom:"zoom",zoomScale:["zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:["external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:["fit-to-page","fitToPage"],showBorders:["show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[t.TTD],decls:3,vars:0,consts:[[1,"ng2-pdf-viewer-container"],["pdfViewerContainer",""],[1,"pdfViewer"]],template:function(S,ne){1&S&&(t.TgZ(0,"div",0,1),t._UZ(2,"div",2),t.qZA())},styles:[".ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--zoom-factor: 1;--viewport-scale-factor: 1;--shadow: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=);--viewer-container-height: 0;--annotation-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\");--xfa-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\")}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 9px auto 0;--page-border: none;--spreadHorizontalWrapped-margin-LR: 4.5px}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;left:0;top:0;right:0;bottom:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:blue}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;left:0;top:100%;right:0;bottom:0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{position:relative;top:0;left:0;z-index:-1}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:yellow;box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font-size:9px;height:100%;margin:0;padding:0 3px;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{font:message-box;font-size:9px;resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid black}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:#000;content:\"\";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;width:20em}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;z-index:200;max-width:20em;background-color:#ff9;box-shadow:0 2px 5px #888;border-radius:2px;padding:6px;margin-left:5px;cursor:pointer;font:message-box;font-size:9px;white-space:normal;word-wrap:break-word}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:9px}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:5px}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid #333333;margin-top:2px;padding-top:2px}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:blue}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-feature-settings:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-feature-settings:\"kern\" off;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;-moz-appearance:none;appearance:none;text-indent:1px;text-overflow:\"\"}}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);background-clip:content-box;border-image:var(--shadow) 9 9 repeat;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;left:0;top:0;right:0;bottom:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}"]}),X})(),p=(()=>{class X{}return X.\u0275fac=function(S){return new(S||X)},X.\u0275mod=t.oAB({type:X}),X.\u0275inj=t.cJS({}),X})();const g=["fileDropRef"];function c(X,K){if(1&X){const S=t.EpF();t.TgZ(0,"nb-card-header")(1,"div",3),t.NdJ("fileDropped",function(re){t.CHM(S);const be=t.oxw();return t.KtG(be.onFileDropped(re))}),t.TgZ(2,"div",4),t._uU(3,"Mobile App Assesment "),t.qZA(),t.TgZ(4,"input",5,6),t.NdJ("change",function(re){t.CHM(S);const be=t.oxw();return t.KtG(be.fileBrowseHandler(re.target.files))}),t.qZA(),t._UZ(6,"img",7),t.TgZ(7,"div",8),t._uU(8,"Drag and drop file here"),t.qZA(),t.TgZ(9,"div",9),t._uU(10,"Supported formats: "),t.TgZ(11,"strong"),t._uU(12),t.qZA()(),t.TgZ(13,"button",10),t._uU(14," Choose File "),t.qZA()()()}if(2&X){const S=t.oxw();t.xp6(4),t.Q6J("accept",S.acceptedFiles),t.xp6(8),t.Oqu(S.acceptedFiles)}}function L(X,K){if(1&X){const S=t.EpF();t.TgZ(0,"nb-list-item",12)(1,"div",13)(2,"div",14)(3,"div",15),t._UZ(4,"img",7),t.ynx(5),t.TgZ(6,"div",16)(7,"div")(8,"div",17),t._uU(9),t.qZA(),t.TgZ(10,"div",18),t._uU(11),t._UZ(12,"span",9),t.qZA()()(),t.BQk(),t.qZA(),t.TgZ(13,"button",19),t.NdJ("click",function(){const be=t.CHM(S).$implicit,Le=t.oxw(2);return t.KtG(Le.deleteFile(be.id))}),t._UZ(14,"nb-icon",20),t.qZA()(),t.TgZ(15,"div",21),t.NdJ("click",function(){const be=t.CHM(S).$implicit,Le=t.oxw(2);return t.KtG(Le.deleteFile(be.key))}),t.TgZ(16,"nb-progress-bar",22),t._uU(17),t.qZA()()()()}if(2&X){const S=K.$implicit;t.xp6(9),t.hij(" ",null==S?null:S.name," "),t.xp6(2),t.hij(" ",null==S?null:S.size," "),t.xp6(5),t.Q6J("value",S.progress),t.xp6(1),t.hij(" ",S.progress,"% ")}}function Z(X,K){if(1&X&&(t.TgZ(0,"nb-list"),t.YNc(1,L,18,4,"nb-list-item",11),t.qZA()),2&X){const S=t.oxw();t.xp6(1),t.Q6J("ngForOf",S.files)}}function U(X,K){if(1&X){const S=t.EpF();t.TgZ(0,"nb-card-body",23)(1,"div",24),t.NdJ("fileDropped",function(re){t.CHM(S);const be=t.oxw();return t.KtG(be.onFileDropped(re))}),t.TgZ(2,"div",4),t._uU(3,"Mobile App Assesment "),t.qZA(),t.TgZ(4,"input",5,6),t.NdJ("change",function(re){t.CHM(S);const be=t.oxw();return t.KtG(be.fileBrowseHandler(re.target.files))}),t.qZA(),t._UZ(6,"img",25),t.TgZ(7,"div",8),t._uU(8,"Drag and drop file here"),t.qZA(),t.TgZ(9,"div",9),t._uU(10,"Supported formats: "),t.TgZ(11,"strong"),t._uU(12),t.qZA()(),t.TgZ(13,"button",26),t._uU(14," Choose File "),t.qZA()()()}if(2&X){const S=t.oxw();t.xp6(4),t.Q6J("accept",S.acceptedFiles),t.xp6(8),t.Oqu(S.acceptedFiles)}}class Y{ngOnInit(){}onFileDropped(K){console.debug("onFileDropped",K),this.prepareFilesList(K)}fileBrowseHandler(K){console.debug("fileBrowseHandler",K),this.prepareFilesList(K),this.fileDropRef.nativeElement.value=""}deleteFile(K){this.subscriptions[K].unsubscribe();let S=this.files.findIndex(ne=>ne.id==K);this.files.splice(S,1),delete this.subscriptions[K]}prepareFilesList(K){Array.from(K).forEach(S=>{try{let ne=S.name.split(".").pop();if(this.acceptedFiles.indexOf(ne)>-1){console.log(S);let re="id_"+(new Date).getTime();this.subscriptions[re]=this.uploadService.upload(S,"").pipe((0,E.U)(be=>(be.id=re,be.name=S.name,be.size=this.formatBytes(S.size,2),be)),(0,n.x)(()=>{this.deleteFile(re)})).subscribe(be=>{let Le=this.files.findIndex(Fe=>Fe.id==be.id);console.log("finding",this.files,re),console.log(Le),Le>=0?this.files[Le].progress=be.progress:this.files.push(be)})}else console.log("extension not allowed"),this.invalidFileMessage(ne)}catch{console.log("extension not allowed"),this.invalidFileMessage("unknown")}})}formatBytes(K,S){if(0===K)return"0 Bytes";const re=S<=0?0:S||2,Le=Math.floor(Math.log(K)/Math.log(1024));return parseFloat((K/Math.pow(1024,Le)).toFixed(re))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][Le]}constructor(K,S){this.toastrService=K,this.uploadService=S,this.acceptedFiles=[".apk",".ipa","appx","zip"].join(),this.files=[],this.subscriptions={}}invalidFileMessage(K){this.toastrService.show(status,`'${K}'  is not allowed. Supported fie type extension are ${this.acceptedFiles}`,{status:"danger",icon:"file-text-outline"})}newScan(){this.fileDropRef.nativeElement.click()}}function Q(X,K){if(1&X){const S=t.EpF();t.TgZ(0,"nb-list-item",7),t.NdJ("click",function(){const be=t.CHM(S).$implicit,Le=t.oxw(3);return t.KtG(Le.onSelect(be))}),t.TgZ(1,"div",8)(2,"div",2),t._uU(3),t.TgZ(4,"div",9)(5,"button",10),t._uU(6),t.qZA(),t.TgZ(7,"button",11),t._uU(8),t.qZA()()(),t.TgZ(9,"span",12),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"span",13),t._uU(13),t.qZA(),t.TgZ(14,"div",14)(15,"strong"),t._uU(16),t.qZA()()()()}if(2&X){const S=K.$implicit;t.Q6J("@init",void 0),t.xp6(3),t.hij(" ",null==S||null==S.result||null==S.result._summary?null:S.result._summary.app_name," "),t.xp6(3),t.hij(" CVSS: ",null==S||null==S.result||null==S.result._summary?null:S.result._summary.average_cvss," "),t.xp6(2),t.hij(" ",null==S||null==S.result||null==S.result._summary?null:S.result._summary.app_type," "),t.xp6(2),t.hij(" ",t.lcZ(11,7,null==S||null==S.doc?null:S.doc.$date)," "),t.xp6(3),t.hij(" ",null==S||null==S.result||null==S.result._summary?null:S.result._summary.package_name," "),t.xp6(3),t.hij("",null==S?null:S.group," ")}}function ie(X,K){if(1&X&&(t.TgZ(0,"nb-list"),t.YNc(1,Q,17,9,"nb-list-item",6),t.qZA()),2&X){const S=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",S)}}function se(X,K){if(1&X&&(t.ynx(0),t.YNc(1,ie,2,1,"nb-list",5),t.BQk()),2&X){const S=K.ngIf;t.oxw();const ne=t.MAs(8);t.xp6(1),t.Q6J("ngIf",S.length>0)("ngIfElse",ne)}}function _e(X,K){1&X&&(t.TgZ(0,"nb-card-body",15)(1,"div",16),t._uU(2," No reports to display. "),t.qZA(),t.TgZ(3,"div",17),t._uU(4," Will let you know as soon as the assesment is finished, just bear with me. "),t.qZA()())}Y.\u0275fac=function(K){return new(K||Y)(t.Y36(m.quB),t.Y36(h))},Y.\u0275cmp=t.Xpm({type:Y,selectors:[["app-file-upload"]],viewQuery:function(K,S){if(1&K&&t.Gf(g,5),2&K){let ne;t.iGM(ne=t.CRH())&&(S.fileDropRef=ne.first)}},decls:4,vars:4,consts:[["size","small","fxFlex","1 0 400px"],[4,"ngIf"],["class","container",4,"ngIf"],["fxFill","","fxLayout","column","fxLayoutAlign","center center","fxFlex","","appDnd","",1,"container",3,"fileDropped"],[1,"h4","margin"],["visbility","hidden","type","file","id","fileDropRef","multiple","",3,"accept","change"],["fileDropRef",""],["src","assets/svg/file.svg",1,"fileicon"],[1,"h6","margin"],[1,"caption"],["size","small","nbButton","","filled","","fxFlex","","status","danger",1,"uplBtn"],["class","lisitem",4,"ngFor","ngForOf"],[1,"lisitem"],["fxFlex","","fxLayout","column"],["fxLayout","row"],["fxLayout","row","fxFlex","",1,"file-icon",2,"width","50px"],["fxFlex",""],[1,"subtitle"],[1,"caption-2"],["size","small","nbButton","","ghost","","status","danger",3,"click"],["icon","close-circle"],["fxLayoutGap","!rem","fxFlex","",1,"progress",3,"click"],["size","tiny","status","danger",3,"value"],[1,"container"],["fxFill","","fxLayout","column","fxLayoutAlign","center center","fxFlex","","appDnd","",3,"fileDropped"],["src","assets/svg/file.svg",1,"fileiconLarge"],["fullWidth","","size","large","nbButton","","filled","","fxFlex","","status","success",1,"uplBtn"]],template:function(K,S){1&K&&(t.TgZ(0,"nb-card",0),t.YNc(1,c,15,2,"nb-card-header",1),t.YNc(2,Z,2,1,"nb-list",1),t.YNc(3,U,15,2,"nb-card-body",2),t.qZA()),2&K&&(t.Q6J("@init",void 0),t.xp6(1),t.Q6J("ngIf",S.files.length>0),t.xp6(1),t.Q6J("ngIf",S.files.length>0),t.xp6(1),t.Q6J("ngIf",0==S.files.length))},dependencies:[s.sg,s.O5,m.Asz,m.yKW,m.ndF,m.DPz,m.bSZ,m.zP_,m.qBV,m.fMN,d.xw,d.SQ,d.Wh,d.s9,d.yH],styles:[".container[_ngcontent-%COMP%]{border-top-right-radius:.3rem;border-top-left-radius:.3rem;background-color:#fff!important;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;transition:all .3s cubic-bezier(.25,.8,.25,1)}.container[_ngcontent-%COMP%]:hover{background-color:#222b454a;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038}.container[_ngcontent-%COMP%]{padding:2rem;text-align:center;position:relative;margin:0 auto}.container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0}.container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;width:183px;height:44px;border-radius:21.5px;background-color:#db202f;padding:8px 16px}.container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#38424c}.fileover[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake 1s;animation-iteration-count:infinite}.files-list[_ngcontent-%COMP%]{margin-top:1.5rem}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]{padding:.5rem;justify-content:space-between;align-items:center;border:dashed 1px #979797;margin-bottom:1rem;display:flex;flex-grow:1}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{display:flex;margin-left:.5rem;cursor:pointer;align-self:flex-end}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#353f4a;margin:0}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#a4a4a4;margin:0;margin-bottom:.25rem}.files-list[_ngcontent-%COMP%]   .single-file[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:100%}@keyframes _ngcontent-%COMP%_shake{0%{transform:translate(1px,1px) rotate(0)}10%{transform:translate(-1px,-2px) rotate(-1deg)}20%{transform:translate(-3px) rotate(1deg)}30%{transform:translate(3px,2px) rotate(0)}40%{transform:translate(1px,-1px) rotate(1deg)}50%{transform:translate(-1px,2px) rotate(-1deg)}60%{transform:translate(-3px,1px) rotate(0)}70%{transform:translate(3px,1px) rotate(-1deg)}80%{transform:translate(-1px,-1px) rotate(1deg)}90%{transform:translate(1px,2px) rotate(0)}to{transform:translate(1px,-2px) rotate(-1deg)}}.fileicon[_ngcontent-%COMP%]{width:50px;height:50px}.fileiconLarge[_ngcontent-%COMP%]{width:100px;height:100px}.margin[_ngcontent-%COMP%]{margin:1em}.progress[_ngcontent-%COMP%]{margin-top:.5rem}nb-card-header[_ngcontent-%COMP%]{padding:0}.uplBtn[_ngcontent-%COMP%]{margin-top:1rem}nb-card[_ngcontent-%COMP%]{height:auto}.empty[_ngcontent-%COMP%]{min-height:350px}nb-card-body[_ngcontent-%COMP%]{margin:0;padding:0}"]});class Ae{constructor(K){this.uploadService=K,this.onSelect$=new y.x,this.reports$=this.uploadService.mobSfReports$.asObservable().pipe((0,E.U)(S=>S.map(ne=>{let re=ne.result.summary,be={};return console.debug("fata",re),re.forEach(Le=>{let Fe=Object.keys(Le)[0];be[Fe]=Le[Fe]}),ne.result._summary=be,ne})))}ngOnInit(){}onSelect(K){this.onSelect$.next(K)}}Ae.\u0275fac=function(K){return new(K||Ae)(t.Y36(h))},Ae.\u0275cmp=t.Xpm({type:Ae,selectors:[["app-mobsf-summary"]],outputs:{onSelect$:"onselect"},decls:9,vars:3,consts:[["fxFlex","","size","small"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","",1,"subtitle"],[4,"ngIf"],["noItem",""],[4,"ngIf","ngIfElse"],["class","lisitem",3,"click",4,"ngFor","ngForOf"],[1,"lisitem",3,"click"],["fxFlex","","fxLayout","column"],["fxFlex","","fxLayoutGap","1rem","fxLayoutAlign","end end"],["size","small","nbButton","","filled","","status","danger"],["size","small","nbButton","","control","","status","warning"],["fxFlex","",1,"caption"],["fxFlex","",1,"caption-2"],["fxFlex","","fxLayoutGap","1rem",1,"caption-2"],["fxLayout","column","fxLayoutAlign","center center"],[1,"h4"],[1,"subtitle"]],template:function(K,S){1&K&&(t.TgZ(0,"nb-card",0)(1,"nb-card-header")(2,"div",1)(3,"span",2),t._uU(4," Reports "),t.qZA()()(),t.YNc(5,se,2,2,"ng-container",3),t.ALo(6,"async"),t.YNc(7,_e,5,0,"ng-template",null,4,t.W1O),t.qZA()),2&K&&(t.xp6(5),t.Q6J("ngIf",t.lcZ(6,1,S.reports$)))},dependencies:[s.sg,s.O5,m.Asz,m.yKW,m.ndF,m.DPz,m.zP_,m.qBV,d.xw,d.SQ,d.Wh,d.yH,s.Ov,s.uU],styles:[".lisitem[_ngcontent-%COMP%]{margin-left:0;font-weight:550}.lisitem[_ngcontent-%COMP%]:hover{background-color:#f05d5d27;color:#3573e7;font-weight:750;margin-left:0;border:solid transparent;box-shadow:0 1px 3px #a1a1a11f,0 1px 2px #a1a1a11f;transition:all .3s cubic-bezier(.25,.8,.25,1)}.container[_ngcontent-%COMP%]{background:#fff}nb-list[_ngcontent-%COMP%]{overflow:auto;max-height:100%}"],data:{animation:[..._]}});const xe=["fileUpload"];function Se(X,K){1&X&&(t.TgZ(0,"div",13),t._UZ(1,"app-file-upload",14,15),t.qZA()),2&X&&(t.xp6(1),t.Q6J("@init",void 0))}function ue(X,K){1&X&&(t.TgZ(0,"button",36),t._UZ(1,"nb-icon",37),t._uU(2," Completed "),t.qZA())}function Me(X,K){if(1&X){const S=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(S);const re=t.oxw(2).$implicit,be=t.oxw(5);return t.KtG(be.stopTask(null==re?null:re.task_id))}),t._UZ(1,"nb-icon",38),t._uU(2," Enqueued "),t.qZA()}}function Te(X,K){if(1&X){const S=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(S);const re=t.oxw(2).$implicit,be=t.oxw(5);return t.KtG(be.stopTask(null==re?null:re.task_id))}),t._UZ(1,"nb-icon",38),t._uU(2," Processing "),t.qZA()}}function ye(X,K){if(1&X&&(t.ynx(0),t.TgZ(1,"div",28)(2,"div",29),t._uU(3),t.qZA(),t.TgZ(4,"div",7),t._uU(5),t.TgZ(6,"span",30),t._uU(7),t.qZA()()(),t.TgZ(8,"div",31)(9,"div",32),t.YNc(10,ue,3,0,"button",33),t.YNc(11,Me,3,0,"button",34),t.YNc(12,Te,3,0,"button",35),t.qZA()(),t.BQk()),2&X){const S=K.ngIf,ne=t.oxw().$implicit;t.xp6(3),t.hij(" ",null==ne?null:ne.task_name," "),t.xp6(2),t.hij(" ",null==ne?null:ne.task_type," "),t.xp6(2),t.hij(" ( ",S," ) "),t.xp6(3),t.Q6J("ngIf","SUCCESS"==S),t.xp6(1),t.Q6J("ngIf","PENDING"==S),t.xp6(1),t.Q6J("ngIf","STARTED"==S)}}function he(X,K){if(1&X&&(t.TgZ(0,"nb-list-item",27),t.YNc(1,ye,13,6,"ng-container",23),t.ALo(2,"async"),t.qZA()),2&X){const S=K.$implicit;t.Q6J("@init",void 0),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,null==S?null:S.status$))}}function me(X,K){if(1&X&&(t.TgZ(0,"nb-list"),t.YNc(1,he,3,4,"nb-list-item",26),t.qZA()),2&X){const S=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",S)}}function Pe(X,K){if(1&X){const S=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(S);const re=t.oxw(5);return t.KtG(re.newScan())}),t._uU(1," Upload app "),t.qZA()}}function le(X,K){if(1&X&&(t.TgZ(0,"nb-card-body",40)(1,"div",41),t._uU(2," No tasks to found. "),t.qZA(),t.TgZ(3,"div",29),t._uU(4," Why don't you upload a mobile app, and give me some task to perform ? "),t.qZA(),t.YNc(5,Pe,2,0,"button",42),t.qZA()),2&X){const S=t.oxw(4);t.xp6(5),t.Q6J("ngIf",!S.selectedReport)}}function M(X,K){if(1&X&&(t.ynx(0),t.YNc(1,me,2,1,"nb-list",24),t.YNc(2,le,6,1,"ng-template",null,25,t.W1O),t.BQk()),2&X){const S=K.ngIf,ne=t.MAs(3);t.xp6(1),t.Q6J("ngIf",S.length>0)("ngIfElse",ne)}}function J(X,K){if(1&X){const S=t.EpF();t.TgZ(0,"nb-card",19)(1,"nb-card-header")(2,"div",20)(3,"span",21),t._uU(4," Tasks "),t.qZA(),t.TgZ(5,"button",22),t.NdJ("click",function(){t.CHM(S);const re=t.oxw(2),be=t.MAs(19);return t.KtG(re.deleteAll(be))}),t._uU(6," Clear All "),t.qZA()()(),t.YNc(7,M,4,2,"ng-container",23),t.ALo(8,"async"),t.qZA()}if(2&X){const S=t.oxw(2);t.Q6J("fxFlex",S.selectedReport?"100%":"50%"),t.xp6(7),t.Q6J("ngIf",t.lcZ(8,2,S.tasks))}}function fe(X,K){if(1&X){const S=t.EpF();t.TgZ(0,"div",16)(1,"app-mobsf-summary",17),t.NdJ("onselect",function(re){t.CHM(S);const be=t.oxw();return t.KtG(be.onReportSelected(re))}),t.qZA(),t.YNc(2,J,9,4,"nb-card",18),t.qZA()}if(2&X){const S=t.oxw();t.xp6(1),t.Q6J("fxFlex",S.selectedReport?"100%":"50%"),t.xp6(1),t.Q6J("ngIf",!S.selectedReport)}}function ve(X,K){if(1&X){const S=t.EpF();t.TgZ(0,"div",44)(1,"nb-card",45)(2,"nb-card-header")(3,"div",2)(4,"button",46),t.NdJ("click",function(){t.CHM(S);const re=t.oxw();return t.KtG(re.unselectReport())}),t._UZ(5,"nb-icon",4),t.qZA(),t.TgZ(6,"span",31),t._uU(7," Report Viewer "),t.qZA(),t.TgZ(8,"button",47),t.NdJ("click",function(){t.CHM(S);const re=t.oxw();return t.KtG(re.unselectReport())}),t._uU(9,"Close "),t._UZ(10,"nb-icon",48),t.qZA()()(),t.TgZ(11,"nb-card-body")(12,"pdf-viewer",49),t.NdJ("after-load-complete",function(){t.CHM(S);const re=t.oxw();return t.KtG(re.adterReportLoaded())}),t.qZA()()()()}if(2&X){const S=t.oxw();t.xp6(12),t.Q6J("autoresize",!0)("original-size",!1)("src",S.url+"/api/v1/download/localpath/"+S.selectedReport)("render-text",!0)}}function q(X,K){if(1&X){const S=t.EpF();t.TgZ(0,"nb-card")(1,"nb-card-header"),t._uU(2),t.qZA(),t.TgZ(3,"nb-card-body"),t._uU(4),t.qZA(),t.TgZ(5,"nb-card-footer")(6,"div",50)(7,"button",51),t.NdJ("click",function(){const be=t.CHM(S).dialogRef;return t.KtG(be.close(!0))}),t._uU(8,"Delete All"),t.qZA()()()()}if(2&X){const S=K.$implicit;t.xp6(2),t.hij(" ",null==S?null:S.title," "),t.xp6(2),t.Oqu(null==S?null:S.description)}}class I{toggleReports(){this.toggleReports$=!this.toggleReports$}constructor(K,S){this.uploadservice=K,this.dialogService=S,this.url=N.N.url,this.toggleReports$=!0,this.runningTasks=!1,this.POLLING_DELAY=3e3,this.tasks=this.uploadservice.mobSfTasks$.asObservable().pipe((0,E.U)(ne=>ne.map(re=>(re.status$=re.state?(0,R.of)(re.state):this.getStatus(re.task_id).pipe((0,E.U)(be=>be.state)),re)))),this.runninTasks=this.tasks.pipe((0,E.U)(ne=>ne.filter(re=>"STARTED"==re.status)),(0,T.V)(ne=>ne))}unselectReport(){this.selectedReport=void 0}ngOnInit(){}taskFilter(K){this.runningTasks=K}newScan(){this.fileUpload.newScan()}adterReportLoaded(){}stopTask(K){return this.uploadservice.stopTask(K).subscribe(S=>{console.log(S)})}selectReport(K){this.selectedReport=K.result._id.$oid}deleteAll(K){this.dialogService.open(K,{context:{title:"Are you sure you want to delete all the tasks ?",description:"All the tasks will be lost, and you won't be able to recover them in future.    "}}).onClose.subscribe(S=>{S&&this.uploadservice.deleteAll().subscribe()})}getStatus(K){let S=this.uploadservice.getTaskStatus(K);return S.pipe(function W(X,K=1/0,S){return K=(K||0)<1?1/0:K,(0,v.e)((ne,re)=>(0,D.p)(ne,re,X,K,void 0,!0,S))}(ne=>"SUCCESS"==ne.state||"FAILED"==ne.state||"REVOKED"==ne.state?(console.log("Expand",K,"IF",ne),this.uploadservice.refreshMobSfCompletedTasks(),H.E):(console.log("Expand",K,"ELSE",ne),S.pipe((0,z.g)(this.POLLING_DELAY)))))}onReportSelected(K){console.log("onReportSelected",K),this.selectReport(K.result.pdf)}}I.\u0275fac=function(K){return new(K||I)(t.Y36(h),t.Y36(m.Gln))},I.\u0275cmp=t.Xpm({type:I,selectors:[["app-mobsf"]],viewQuery:function(K,S){if(1&K&&t.Gf(xe,5),2&K){let ne;t.iGM(ne=t.CRH())&&(S.fileUpload=ne.first)}},decls:20,vars:3,consts:[["fixed",""],["fxFlex","","fxLayoutAlign","center center"],["fxFlex","","fxLayoutAlign","start center"],["routerLink","/","nbButton","","ghost","","status","danger","size","large"],["icon","arrow-back-outline"],["fxHide.lt-sm","","fxShow","","routerLink","/",1,"h6"],["status","danger","icon","chevron-right-outline"],[1,"caption-2"],["fxLayout","","fxLayoutGap","1rem","fxLayoutAlign","center","fxFlexFill",""],["fxFlex","1 0 200px","fxLayout","column",4,"ngIf"],["fxFlex","0 1 600px","fxLayout","column",4,"ngIf"],["fxLayout","column","fxFlex","1 1",4,"ngIf"],["dialog",""],["fxFlex","1 0 200px","fxLayout","column"],["fxLayoutAlign","end start"],["fileUpload",""],["fxFlex","0 1 600px","fxLayout","column"],["fxLayout","column",3,"fxFlex","onselect"],["class","container","size","small",3,"fxFlex",4,"ngIf"],["size","small",1,"container",3,"fxFlex"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","",1,"subtitle"],["fxLayoutAlign","center center","nbButton","","filled","","status","basic","size","small",3,"click"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noItem",""],["class","lisitem","fxLayout","row",4,"ngFor","ngForOf"],["fxLayout","row",1,"lisitem"],["fxFlex","1 1"],[1,"subtitle"],[1,"caption"],["fxFlex",""],["fxLayout","row","fxLayoutGap","0.5rem"],["fxLayoutAlign","center center","nbButton","","filled","","status","success","size","small",4,"ngIf"],["fxLayoutAlign","center center","nbButton","","filled","","status","basic","size","small",3,"click",4,"ngIf"],["fxLayoutAlign","center center","nbButton","","filled","","status","warning","size","small",3,"click",4,"ngIf"],["fxLayoutAlign","center center","nbButton","","filled","","status","success","size","small"],["icon","eye-outline"],["icon","close-circle-outline"],["fxLayoutAlign","center center","nbButton","","filled","","status","warning","size","small",3,"click"],["fxLayout","column","fxLayoutAlign","center center"],[1,"h4"],["style","margin-top: 2rem;","class","uplBtn","size","small","nbButton","","filled","","status","danger",3,"click",4,"ngIf"],["size","small","nbButton","","filled","","status","danger",1,"uplBtn",2,"margin-top","2rem",3,"click"],["fxLayout","column","fxFlex","1 1"],["size","small","fxFlex",""],["nbButton","","ghost","","status","danger","size","large",3,"click"],["size","small","ghost","","status","danger","nbButton","",3,"click"],["icon","close-circle"],["fxFlex","",3,"autoresize","original-size","src","render-text","after-load-complete"],["fxFlex","","fxLayoutAlign","end"],["nbButton","","status","danger","size","small",3,"click"]],template:function(K,S){1&K&&(t.TgZ(0,"nb-layout")(1,"nb-layout-header",0)(2,"div",1)(3,"div",2)(4,"button",3),t._UZ(5,"nb-icon",4),t.qZA(),t.TgZ(6,"span",5),t._uU(7," Hawki "),t.qZA(),t._UZ(8,"nb-icon",6),t.TgZ(9,"span",5),t._uU(10," Mobile Security "),t.TgZ(11,"span",7),t._uU(12,"( Static Analysis )"),t.qZA()()()()(),t.TgZ(13,"nb-layout-column")(14,"div",8),t.YNc(15,Se,3,1,"div",9),t.YNc(16,fe,3,2,"div",10),t.YNc(17,ve,13,4,"div",11),t.qZA()()(),t.YNc(18,q,9,2,"ng-template",null,12,t.W1O)),2&K&&(t.xp6(15),t.Q6J("ngIf",!S.selectedReport),t.xp6(1),t.Q6J("ngIf",S.toggleReports$),t.xp6(1),t.Q6J("ngIf",S.selectedReport))},dependencies:[s.sg,s.O5,O.rH,m.Aqw,m.dP_,m.dmS,m.Asz,m.yKW,m.XWE,m.ndF,m.DPz,m.zP_,m.qBV,m.fMN,d.xw,d.SQ,d.Wh,d.s9,d.yH,b.b8,l,Y,Ae,s.Ov],styles:[".lisitem[_ngcontent-%COMP%]{margin-left:0;font-weight:550}.lisitem[_ngcontent-%COMP%]:hover{background-color:#e8f0fe;color:#3573e7;font-weight:750;margin-left:0;border:solid transparent;box-shadow:0 1px 3px #a1a1a11f,0 1px 2px #a1a1a11f;transition:all .3s cubic-bezier(.25,.8,.25,1)}pdf-viewer[_ngcontent-%COMP%]{width:10px;flex:1}.container[_ngcontent-%COMP%]{background:#fff;overflow:auto;max-height:100%}nb-list[_ngcontent-%COMP%]{overflow:auto;max-height:100%}nb-card[_ngcontent-%COMP%]{padding:0}"],data:{animation:[..._]}});const V=[{path:"",component:I},{path:"**",component:I}];class oe{}oe.\u0275fac=function(K){return new(K||oe)},oe.\u0275mod=t.oAB({type:oe}),oe.\u0275inj=t.cJS({imports:[O.Bz.forChild(V),O.Bz]});var Ce=x(4006);class ke{}ke.\u0275fac=function(K){return new(K||ke)},ke.\u0275prov=t.Yz7({token:ke,factory:ke.\u0275fac,providedIn:"root"});class pe{intercept(K,S){return S.handle(K).pipe((0,z.g)(200))}}pe.\u0275fac=function(K){return new(K||pe)},pe.\u0275prov=t.Yz7({token:pe,factory:pe.\u0275fac});var Ee=x(9814);class we{}we.\u0275fac=function(K){return new(K||we)},we.\u0275mod=t.oAB({type:we}),we.\u0275inj=t.cJS({providers:[h,ke,m.Gln,{provide:A.TP,useClass:pe,multi:!0}],imports:[s.ez,oe,m.BW0,m.EoG,m.zyh,m.T2N,Ce.UX,m.DfH,m.V7y,m.LW9,m.COg,m.AE1,m.KdK,Ee.o9,m.uuI,p,m.jSo,m.wB1]})},6036:function(module,__unused_webpack_exports,__webpack_require__){var _classStaticPrivateMethodGet=__webpack_require__(5764).default,_defineProperty=__webpack_require__(8416).default,_classPrivateMethodInitSpec=__webpack_require__(1860).default,_classPrivateMethodGet=__webpack_require__(4467).default,_classPrivateFieldInitSpec=__webpack_require__(9159).default,_classPrivateFieldSet=__webpack_require__(5661).default,_classPrivateFieldGet=__webpack_require__(468).default,_classStaticPrivateFieldSpecSet=__webpack_require__(2306).default,_classStaticPrivateFieldSpecGet=__webpack_require__(1280).default,_asyncToGenerator=__webpack_require__(7156).default,x;x=()=>(()=>{"use strict";var __webpack_modules__=[,(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.VerbosityLevel=o.Util=o.UnknownErrorException=o.UnexpectedResponseException=o.UNSUPPORTED_FEATURES=o.TextRenderingMode=o.StreamType=o.RenderingIntentFlag=o.PermissionFlag=o.PasswordResponses=o.PasswordException=o.PageActionEventType=o.OPS=o.MissingPDFException=o.InvalidPDFException=o.ImageKind=o.IDENTITY_MATRIX=o.FormatError=o.FontType=o.FeatureTest=o.FONT_IDENTITY_MATRIX=o.DocumentActionEventType=o.CMapCompressionType=o.BaseException=o.AnnotationType=o.AnnotationStateModelType=o.AnnotationReviewState=o.AnnotationReplyType=o.AnnotationMode=o.AnnotationMarkedState=o.AnnotationFlag=o.AnnotationFieldFlag=o.AnnotationBorderStyleType=o.AnnotationActionEventType=o.AbortException=void 0,o.arrayByteLength=U,o.arraysToBytes=function Y(q){const I=q.length;if(1===I&&q[0]instanceof Uint8Array)return q[0];let V=0;for(let ke=0;ke<I;ke++)V+=U(q[ke]);let oe=0;const Ce=new Uint8Array(V);for(let ke=0;ke<I;ke++){let ce=q[ke];ce instanceof Uint8Array||(ce="string"==typeof ce?Z(ce):new Uint8Array(ce));const pe=ce.byteLength;Ce.set(ce,oe),oe+=pe}return Ce},o.assert=function te(q,I){q||ee(I)},o.bytesToString=function L(q){("object"!=typeof q||null===q||void 0===q.length)&&ee("Invalid argument for bytesToString");const I=q.length,V=8192;if(I<V)return String.fromCharCode.apply(null,q);const oe=[];for(let Ce=0;Ce<I;Ce+=V){const ke=Math.min(Ce+V,I),ce=q.subarray(Ce,ke);oe.push(String.fromCharCode.apply(null,ce))}return oe.join("")},o.createPromiseCapability=function ve(){const q=Object.create(null);let I=!1;return Object.defineProperty(q,"settled",{get:()=>I}),q.promise=new Promise(function(V,oe){q.resolve=function(Ce){I=!0,V(Ce)},q.reject=function(Ce){I=!0,oe(Ce)}}),q},o.createValidAbsoluteUrl=function ge(q,I=null,V=null){if(!q)return null;try{if(V&&"string"==typeof q){if(V.addDefaultProtocol&&q.startsWith("www.")){const Ce=q.match(/\./g);Ce&&Ce.length>=2&&(q=`http://${q}`)}if(V.tryConvertEncoding)try{q=Pe(q)}catch{}}const oe=I?new URL(q,I):new URL(q);if(function ae(q){if(!q)return!1;switch(q.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(oe))return oe}catch{}return null},o.escapeString=function ye(q){return q.replace(/([()\\\n\r])/g,I=>"\n"===I?"\\n":"\r"===I?"\\r":`\\${I}`)},o.getModificationDate=function fe(q=new Date){return[q.getUTCFullYear().toString(),(q.getUTCMonth()+1).toString().padStart(2,"0"),q.getUTCDate().toString().padStart(2,"0"),q.getUTCHours().toString().padStart(2,"0"),q.getUTCMinutes().toString().padStart(2,"0"),q.getUTCSeconds().toString().padStart(2,"0")].join("")},o.getVerbosityLevel=function k(){return u},o.info=function j(q){u>=h.INFOS&&console.log(`Info: ${q}`)},o.isArrayBuffer=function M(q){return"object"==typeof q&&null!==q&&void 0!==q.byteLength},o.isArrayEqual=function J(q,I){if(q.length!==I.length)return!1;for(let V=0,oe=q.length;V<oe;V++)if(q[V]!==I[V])return!1;return!0},o.isAscii=function he(q){return/^[\x00-\x7F]*$/.test(q)},o.objectFromMap=function se(q){const I=Object.create(null);for(const[V,oe]of q)I[V]=oe;return I},o.objectSize=function ie(q){return Object.keys(q).length},o.setVerbosityLevel=function w(q){Number.isInteger(q)&&(u=q)},o.shadow=de,o.string32=function Q(q){return String.fromCharCode(q>>24&255,q>>16&255,q>>8&255,255&q)},o.stringToBytes=Z,o.stringToPDFString=function Te(q){if(q[0]>="\xef"){let V;if("\xfe"===q[0]&&"\xff"===q[1]?V="utf-16be":"\xff"===q[0]&&"\xfe"===q[1]?V="utf-16le":"\xef"===q[0]&&"\xbb"===q[1]&&"\xbf"===q[2]&&(V="utf-8"),V)try{const oe=new TextDecoder(V,{fatal:!0}),Ce=Z(q);return oe.decode(Ce)}catch(oe){$(`stringToPDFString: "${oe}".`)}}const I=[];for(let V=0,oe=q.length;V<oe;V++){const Ce=Me[q.charCodeAt(V)];I.push(Ce?String.fromCharCode(Ce):q.charAt(V))}return I.join("")},o.stringToUTF16BEString=function me(q){const I=["\xfe\xff"];for(let V=0,oe=q.length;V<oe;V++){const Ce=q.charCodeAt(V);I.push(String.fromCharCode(Ce>>8&255),String.fromCharCode(255&Ce))}return I.join("")},o.stringToUTF8String=Pe,o.unreachable=ee,o.utf8StringToString=function le(q){return unescape(encodeURIComponent(q))},o.warn=$,x(2),o.IDENTITY_MATRIX=[1,0,0,1,0,0],o.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],o.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},o.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},o.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},o.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},o.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},o.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},o.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},o.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},o.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},o.AnnotationReplyType={GROUP:"Group",REPLY:"R"},o.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},o.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},o.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},o.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},o.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},o.PageActionEventType={O:"PageOpen",C:"PageClose"},o.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},o.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const h={ERRORS:0,WARNINGS:1,INFOS:5};o.VerbosityLevel=h,o.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},o.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},o.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},o.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let u=h.WARNINGS;function $(q){u>=h.WARNINGS&&console.log(`Warning: ${q}`)}function ee(q){throw new Error(q)}function de(q,I,V){return Object.defineProperty(q,I,{value:V,enumerable:!0,configurable:!0,writable:!1}),V}const F=function(){function I(V,oe){this.constructor===I&&ee("Cannot initialize BaseException."),this.message=V,this.name=oe}return I.prototype=new Error,I.constructor=I,I}();function Z(q){"string"!=typeof q&&ee("Invalid argument for stringToBytes");const I=q.length,V=new Uint8Array(I);for(let oe=0;oe<I;++oe)V[oe]=255&q.charCodeAt(oe);return V}function U(q){return void 0!==q.length?q.length:void 0!==q.byteLength?q.byteLength:void ee("Invalid argument for arrayByteLength")}o.BaseException=F,o.PasswordException=class a extends F{constructor(I,V){super(I,"PasswordException"),this.code=V}},o.UnknownErrorException=class e extends F{constructor(I,V){super(I,"UnknownErrorException"),this.details=V}},o.InvalidPDFException=class r extends F{constructor(I){super(I,"InvalidPDFException")}},o.MissingPDFException=class l extends F{constructor(I){super(I,"MissingPDFException")}},o.UnexpectedResponseException=class p extends F{constructor(I,V){super(I,"UnexpectedResponseException"),this.status=V}},o.FormatError=class g extends F{constructor(I){super(I,"FormatError")}},o.AbortException=class c extends F{constructor(I){super(I,"AbortException")}},o.FeatureTest=class xe{static get isLittleEndian(){return de(this,"isLittleEndian",function _e(){const q=new Uint8Array(4);return q[0]=1,1===new Uint32Array(q.buffer,0,1)[0]}())}static get isEvalSupported(){return de(this,"isEvalSupported",function Ae(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return de(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};const Se=[...Array(256).keys()].map(q=>q.toString(16).padStart(2,"0"));class ue{static makeHexColor(I,V,oe){return`#${Se[I]}${Se[V]}${Se[oe]}`}static scaleMinMax(I,V){let oe;I[0]?(I[0]<0&&(oe=V[0],V[0]=V[1],V[1]=oe),V[0]*=I[0],V[1]*=I[0],I[3]<0&&(oe=V[2],V[2]=V[3],V[3]=oe),V[2]*=I[3],V[3]*=I[3]):(oe=V[0],V[0]=V[2],V[2]=oe,oe=V[1],V[1]=V[3],V[3]=oe,I[1]<0&&(oe=V[2],V[2]=V[3],V[3]=oe),V[2]*=I[1],V[3]*=I[1],I[2]<0&&(oe=V[0],V[0]=V[1],V[1]=oe),V[0]*=I[2],V[1]*=I[2]),V[0]+=I[4],V[1]+=I[4],V[2]+=I[5],V[3]+=I[5]}static transform(I,V){return[I[0]*V[0]+I[2]*V[1],I[1]*V[0]+I[3]*V[1],I[0]*V[2]+I[2]*V[3],I[1]*V[2]+I[3]*V[3],I[0]*V[4]+I[2]*V[5]+I[4],I[1]*V[4]+I[3]*V[5]+I[5]]}static applyTransform(I,V){return[I[0]*V[0]+I[1]*V[2]+V[4],I[0]*V[1]+I[1]*V[3]+V[5]]}static applyInverseTransform(I,V){const oe=V[0]*V[3]-V[1]*V[2];return[(I[0]*V[3]-I[1]*V[2]+V[2]*V[5]-V[4]*V[3])/oe,(-I[0]*V[1]+I[1]*V[0]+V[4]*V[1]-V[5]*V[0])/oe]}static getAxialAlignedBoundingBox(I,V){const oe=ue.applyTransform(I,V),Ce=ue.applyTransform(I.slice(2,4),V),ke=ue.applyTransform([I[0],I[3]],V),ce=ue.applyTransform([I[2],I[1]],V);return[Math.min(oe[0],Ce[0],ke[0],ce[0]),Math.min(oe[1],Ce[1],ke[1],ce[1]),Math.max(oe[0],Ce[0],ke[0],ce[0]),Math.max(oe[1],Ce[1],ke[1],ce[1])]}static inverseTransform(I){const V=I[0]*I[3]-I[1]*I[2];return[I[3]/V,-I[1]/V,-I[2]/V,I[0]/V,(I[2]*I[5]-I[4]*I[3])/V,(I[4]*I[1]-I[5]*I[0])/V]}static apply3dTransform(I,V){return[I[0]*V[0]+I[1]*V[1]+I[2]*V[2],I[3]*V[0]+I[4]*V[1]+I[5]*V[2],I[6]*V[0]+I[7]*V[1]+I[8]*V[2]]}static singularValueDecompose2dScale(I){const V=[I[0],I[2],I[1],I[3]],oe=I[0]*V[0]+I[1]*V[2],ce=I[2]*V[1]+I[3]*V[3],pe=(oe+ce)/2,Ee=Math.sqrt((oe+ce)**2-4*(oe*ce-(I[2]*V[0]+I[3]*V[2])*(I[0]*V[1]+I[1]*V[3])))/2,X=pe-Ee||1;return[Math.sqrt(pe+Ee||1),Math.sqrt(X)]}static normalizeRect(I){const V=I.slice(0);return I[0]>I[2]&&(V[0]=I[2],V[2]=I[0]),I[1]>I[3]&&(V[1]=I[3],V[3]=I[1]),V}static intersect(I,V){const oe=Math.max(Math.min(I[0],I[2]),Math.min(V[0],V[2])),Ce=Math.min(Math.max(I[0],I[2]),Math.max(V[0],V[2]));if(oe>Ce)return null;const ke=Math.max(Math.min(I[1],I[3]),Math.min(V[1],V[3])),ce=Math.min(Math.max(I[1],I[3]),Math.max(V[1],V[3]));return ke>ce?null:[oe,ke,Ce,ce]}static bezierBoundingBox(I,V,oe,Ce,ke,ce,pe,Ee){const we=[],X=[[],[]];let K,S,ne,re,be,Le,Fe,Re;for(let Ne=0;Ne<2;++Ne)if(0===Ne?(S=6*I-12*oe+6*ke,K=-3*I+9*oe-9*ke+3*pe,ne=3*oe-3*I):(S=6*V-12*Ce+6*ce,K=-3*V+9*Ce-9*ce+3*Ee,ne=3*Ce-3*V),Math.abs(K)<1e-12){if(Math.abs(S)<1e-12)continue;re=-ne/S,0<re&&re<1&&we.push(re)}else Fe=S*S-4*ne*K,Re=Math.sqrt(Fe),!(Fe<0)&&(be=(-S+Re)/(2*K),0<be&&be<1&&we.push(be),Le=(-S-Re)/(2*K),0<Le&&Le<1&&we.push(Le));let Ie,Oe=we.length;const De=Oe;for(;Oe--;)re=we[Oe],Ie=1-re,X[0][Oe]=Ie*Ie*Ie*I+3*Ie*Ie*re*oe+3*Ie*re*re*ke+re*re*re*pe,X[1][Oe]=Ie*Ie*Ie*V+3*Ie*Ie*re*Ce+3*Ie*re*re*ce+re*re*re*Ee;return X[0][De]=I,X[1][De]=V,X[0][De+1]=pe,X[1][De+1]=Ee,X[0].length=X[1].length=De+2,[Math.min(...X[0]),Math.min(...X[1]),Math.max(...X[0]),Math.max(...X[1])]}}o.Util=ue;const Me=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Pe(q){return decodeURIComponent(escape(q))}},(G,o,x)=>{x(3)},(G,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isNodeJS=void 0;const x=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);o.isNodeJS=x},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:G,NodeCMapReaderFactory:o,NodeStandardFontDataFactory:x}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=G,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=o,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=x}function setPDFNetworkStreamFactory(G){createPDFNetworkStream=G}function getDocument(G){const o=new PDFDocumentLoadingTask;let x;if("string"==typeof G||G instanceof URL)x={url:G};else if((0,_util.isArrayBuffer)(G))x={data:G};else if(G instanceof PDFDataRangeTransport)x={range:G};else{if("object"!=typeof G)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!G.url&&!G.data&&!G.range)throw new Error("Invalid parameter object: need either .data, .range or .url");x=G}const s=Object.create(null);let O=null,R=null;for(const E in x){const T=x[E];switch(E){case"url":if(typeof window<"u")try{s[E]=new URL(T,window.location).href;continue}catch(v){(0,_util.warn)(`Cannot create valid URL: "${v}".`)}else if("string"==typeof T||T instanceof URL){s[E]=T.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":O=T;continue;case"worker":R=T;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&T instanceof Buffer)s[E]=new Uint8Array(T);else{if(T instanceof Uint8Array)break;if("string"==typeof T)s[E]=(0,_util.stringToBytes)(T);else if("object"!=typeof T||null===T||isNaN(T.length)){if(!(0,_util.isArrayBuffer)(T))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");s[E]=new Uint8Array(T)}else s[E]=new Uint8Array(T)}continue}s[E]=T}if(s.CMapReaderFactory=s.CMapReaderFactory||DefaultCMapReaderFactory,s.StandardFontDataFactory=s.StandardFontDataFactory||DefaultStandardFontDataFactory,s.ignoreErrors=!0!==s.stopAtErrors,s.fontExtraProperties=!0===s.fontExtraProperties,s.pdfBug=!0===s.pdfBug,s.enableXfa=!0===s.enableXfa,(!Number.isInteger(s.rangeChunkSize)||s.rangeChunkSize<1)&&(s.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof s.docBaseUrl||(0,_display_utils.isDataScheme)(s.docBaseUrl))&&(s.docBaseUrl=null),(!Number.isInteger(s.maxImageSize)||s.maxImageSize<-1)&&(s.maxImageSize=-1),"string"!=typeof s.cMapUrl&&(s.cMapUrl=null),"string"!=typeof s.standardFontDataUrl&&(s.standardFontDataUrl=null),"boolean"!=typeof s.useWorkerFetch&&(s.useWorkerFetch=s.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&s.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof s.isEvalSupported&&(s.isEvalSupported=!0),"boolean"!=typeof s.disableFontFace&&(s.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof s.useSystemFonts&&(s.useSystemFonts=!_is_node.isNodeJS&&!s.disableFontFace),("object"!=typeof s.ownerDocument||null===s.ownerDocument)&&(s.ownerDocument=globalThis.document),"boolean"!=typeof s.disableRange&&(s.disableRange=!1),"boolean"!=typeof s.disableStream&&(s.disableStream=!1),"boolean"!=typeof s.disableAutoFetch&&(s.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(s.verbosity),!R){const E={verbosity:s.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};R=E.port?_PDFWorker.fromPort(E):new _PDFWorker(E),o._worker=R}const H=o.docId;return R.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");const E=_fetchDocument(R,s,O,H),T=new Promise(function(v){let D;O?D=new _transport_stream.PDFDataTransportStream({length:s.length,initialData:s.initialData,progressiveDone:s.progressiveDone,contentDispositionFilename:s.contentDispositionFilename,disableRange:s.disableRange,disableStream:s.disableStream},O):s.data||(D=createPDFNetworkStream({url:s.url,length:s.length,httpHeaders:s.httpHeaders,withCredentials:s.withCredentials,rangeChunkSize:s.rangeChunkSize,disableRange:s.disableRange,disableStream:s.disableStream})),v(D)});return Promise.all([E,T]).then(function([v,D]){if(o.destroyed)throw new Error("Loading aborted");const W=new _message_handler.MessageHandler(H,v,R.port),z=new WorkerTransport(W,o,D,s);o._transport=z,W.send("Ready",null)})}).catch(o._capability.reject),o}function _fetchDocument(G,o,x,s){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(G,o,x,s){if(G.destroyed)throw new Error("Worker was destroyed");x&&(o.length=x.length,o.initialData=x.initialData,o.progressiveDone=x.progressiveDone,o.contentDispositionFilename=x.contentDispositionFilename);const O=yield G.messageHandler.sendWithPromise("GetDocRequest",{docId:s,apiVersion:"2.14.305",source:{data:o.data,url:o.url,password:o.password,disableAutoFetch:o.disableAutoFetch,rangeChunkSize:o.rangeChunkSize,length:o.length},maxImageSize:o.maxImageSize,disableFontFace:o.disableFontFace,docBaseUrl:o.docBaseUrl,ignoreErrors:o.ignoreErrors,isEvalSupported:o.isEvalSupported,fontExtraProperties:o.fontExtraProperties,enableXfa:o.enableXfa,useSystemFonts:o.useSystemFonts,cMapUrl:o.useWorkerFetch?o.cMapUrl:null,standardFontDataUrl:o.useWorkerFetch?o.standardFontDataUrl:null});if(G.destroyed)throw new Error("Worker was destroyed");return O})).apply(this,arguments)}class PDFDocumentLoadingTask{constructor(){var o,x;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(o=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),x=o++,o)),x}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var o=this;return _asyncToGenerator(function*(){o.destroyed=!0,yield o._transport?.destroy(),o._transport=null,o._worker&&(o._worker.destroy(),o._worker=null)})()}}var _docId={writable:!0,value:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(o,x,s=!1,O=null){this.length=o,this.initialData=x,this.progressiveDone=s,this.contentDispositionFilename=O,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(o){this._rangeListeners.push(o)}addProgressListener(o){this._progressListeners.push(o)}addProgressiveReadListener(o){this._progressiveReadListeners.push(o)}addProgressiveDoneListener(o){this._progressiveDoneListeners.push(o)}onDataRange(o,x){for(const s of this._rangeListeners)s(o,x)}onDataProgress(o,x){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(o,x)})}onDataProgressiveRead(o){this._readyCapability.promise.then(()=>{for(const x of this._progressiveReadListeners)x(o)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const o of this._progressiveDoneListeners)o()})}transportReady(){this._readyCapability.resolve()}requestDataRange(o,x){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(o,x){var O,s=this;this._pdfInfo=o,this._transport=x,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(O=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),s.stats||{streamTypes:{},fontTypes:{}}}),function(){return O.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(o){return this._transport.getPage(o)}getPageIndex(o){return this._transport.getPageIndex(o)}getDestinations(){return this._transport.getDestinations()}getDestination(o){return this._transport.getDestination(o)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(o=!1){return this._transport.startCleanup(o||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(o,x,s,O,R=!1){this._pageIndex=o,this._pageInfo=x,this._ownerDocument=O,this._transport=s,this._stats=R?new _display_utils.StatTimer:null,this._pdfBug=R,this.commonObjs=s.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:o,rotation:x=this.rotate,offsetX:s=0,offsetY:O=0,dontFlip:R=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:o,rotation:x,offsetX:s,offsetY:O,dontFlip:R})}getAnnotations({intent:o="display"}={}){const x=this._transport.getRenderingIntent(o);let s=this._annotationPromises.get(x.cacheKey);return s||(s=this._transport.getAnnotations(this._pageIndex,x.renderingIntent),this._annotationPromises.set(x.cacheKey,s),s=s.then(O=>{for(const R of O)void 0!==R.titleObj&&Object.defineProperty(R,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),R.titleObj.str)}),void 0!==R.contentsObj&&Object.defineProperty(R,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),R.contentsObj.str)});return O})),s}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}getXfa(){var o=this;return _asyncToGenerator(function*(){return o._transport._htmlForXfa?.children[o._pageIndex]||null})()}render({canvasContext:o,viewport:x,intent:s="display",annotationMode:O=_util.AnnotationMode.ENABLE,transform:R=null,imageLayer:H=null,canvasFactory:E=null,background:T=null,optionalContentConfigPromise:v=null,annotationCanvasMap:D=null,pageColors:W=null}){void 0!==arguments[0]?.renderInteractiveForms&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&O===_util.AnnotationMode.ENABLE&&(O=_util.AnnotationMode.ENABLE_FORMS)),void 0!==arguments[0]?.includeAnnotationStorage&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&O===_util.AnnotationMode.ENABLE&&(O=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const z=this._transport.getRenderingIntent(s,O);this.pendingCleanup=!1,v||(v=this._transport.getOptionalContentConfig());let N=this._intentStates.get(z.cacheKey);N||(N=Object.create(null),this._intentStates.set(z.cacheKey,N)),N.streamReaderCancelTimeout&&(clearTimeout(N.streamReaderCancelTimeout),N.streamReaderCancelTimeout=null);const B=E||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),_=!!(z.renderingIntent&_util.RenderingIntentFlag.PRINT);N.displayReadyCapability||(N.displayReadyCapability=(0,_util.createPromiseCapability)(),N.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(z));const t=y=>{N.renderTasks.delete(A),(this.cleanupAfterRender||_)&&(this.pendingCleanup=!0),this._tryCleanup(),y?(A.capability.reject(y),this._abortOperatorList({intentState:N,reason:y instanceof Error?y:new Error(y)})):A.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},A=new InternalRenderTask({callback:t,params:{canvasContext:o,viewport:x,transform:R,imageLayer:H,background:T},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:D,operatorList:N.operatorList,pageIndex:this._pageIndex,canvasFactory:B,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:W});(N.renderTasks||=new Set).add(A);const C=A.task;return Promise.all([N.displayReadyCapability.promise,v]).then(([y,P])=>{this.pendingCleanup?t():(this._stats&&this._stats.time("Rendering"),A.initializeGraphics({transparency:y,optionalContentConfig:P}),A.operatorListChanged())}).catch(t),C}getOperatorList({intent:o="display",annotationMode:x=_util.AnnotationMode.ENABLE}={}){const O=this._transport.getRenderingIntent(o,x,!0);let H,R=this._intentStates.get(O.cacheKey);return R||(R=Object.create(null),this._intentStates.set(O.cacheKey,R)),R.opListReadCapability||(H=Object.create(null),H.operatorListChanged=function s(){R.operatorList.lastChunk&&(R.opListReadCapability.resolve(R.operatorList),R.renderTasks.delete(H))},R.opListReadCapability=(0,_util.createPromiseCapability)(),(R.renderTasks||=new Set).add(H),R.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(O)),R.opListReadCapability.promise}streamTextContent({disableCombineTextItems:o=!1,includeMarkedContent:x=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==o,includeMarkedContent:!0===x},{highWaterMark:100,size:O=>O.items.length})}getTextContent(o={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>_xfa_text.XfaText.textContent(s));const x=this.streamTextContent(o);return new Promise(function(s,O){const H=x.getReader(),E={items:[],styles:Object.create(null)};!function R(){H.read().then(function({value:T,done:v}){v?s(E):(Object.assign(E.styles,T.styles),E.items.push(...T.items),R())},O)}()})}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const o=[];for(const x of this._intentStates.values())if(this._abortOperatorList({intentState:x,reason:new Error("Page was destroyed."),force:!0}),!x.opListReadCapability)for(const s of x.renderTasks)o.push(s.completed),s.cancel();this.objs.clear();for(const x of this._bitmaps)x.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(o)}cleanup(o=!1){return this.pendingCleanup=!0,this._tryCleanup(o)}_tryCleanup(o=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:x,operatorList:s}of this._intentStates.values())if(x.size>0||!s.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,o&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const x of this._bitmaps)x.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(o,x){const s=this._intentStates.get(x);s&&(this._stats&&this._stats.timeEnd("Page Request"),s.displayReadyCapability&&s.displayReadyCapability.resolve(o))}_renderPageChunk(o,x){for(let s=0,O=o.length;s<O;s++)x.operatorList.fnArray.push(o.fnArray[s]),x.operatorList.argsArray.push(o.argsArray[s]);x.operatorList.lastChunk=o.lastChunk;for(const s of x.renderTasks)s.operatorListChanged();o.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:o,cacheKey:x}){const O=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:o,cacheKey:x,annotationStorage:o&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),R=this._intentStates.get(x);R.streamReader=O;const H=()=>{O.read().then(({value:E,done:T})=>{T?R.streamReader=null:this._transport.destroyed||(this._renderPageChunk(E,R),H())},E=>{if(R.streamReader=null,!this._transport.destroyed){if(R.operatorList){R.operatorList.lastChunk=!0;for(const T of R.renderTasks)T.operatorListChanged();this._tryCleanup()}if(R.displayReadyCapability)R.displayReadyCapability.reject(E);else{if(!R.opListReadCapability)throw E;R.opListReadCapability.reject(E)}}})};H()}_abortOperatorList({intentState:o,reason:x,force:s=!1}){if(o.streamReader){if(!s){if(o.renderTasks.size>0)return;if(x instanceof _display_utils.RenderingCancelledException)return void(o.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:o,reason:x,force:!0}),o.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(o.streamReader.cancel(new _util.AbortException(x.message)).catch(()=>{}),o.streamReader=null,!this._transport.destroyed){for(const[O,R]of this._intentStates)if(R===o){this._intentStates.delete(O);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(o,x){const s={data:structuredClone(o,x)};this._deferred.then(()=>{for(const O of this._listeners)O.call(this,s)})}addEventListener(o,x){this._listeners.push(x)}removeEventListener(o,x){const s=this._listeners.indexOf(x);this._listeners.splice(s,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const G=document?.currentScript?.src;G&&(PDFWorkerUtil.fallbackWorkerSrc=G.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(G,o){let x;try{if(x=new URL(G),!x.origin||"null"===x.origin)return!1}catch{return!1}const s=new URL(o,x);return x.origin===s.origin},PDFWorkerUtil.createCDNWrapper=function(G){return URL.createObjectURL(new Blob([`importScripts("${G}");`]))};class _PDFWorker{constructor({name:G=null,port:o=null,verbosity:x=(0,_util.getVerbosityLevel)()}={}){if(o&&_classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).has(o))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=G,this.destroyed=!1,this.verbosity=x,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,o)return _classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).set(o,this),void this._initializeFromPort(o);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(G){this._port=G,this._messageHandler=new _message_handler.MessageHandler("main","worker",G),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let G=_PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,G)||(G=PDFWorkerUtil.createCDNWrapper(new URL(G,window.location).href));const o=new Worker(G),x=new _message_handler.MessageHandler("main","worker",o),s=()=>{o.removeEventListener("error",O),x.destroy(),o.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},O=()=>{this._webWorker||s()};o.addEventListener("error",O),x.on("test",H=>{o.removeEventListener("error",O),this.destroyed?s():H?(this._messageHandler=x,this._port=o,this._webWorker=o,this._readyCapability.resolve(),x.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),x.destroy(),o.terminate())}),x.on("ready",H=>{if(o.removeEventListener("error",O),this.destroyed)s();else try{R()}catch{this._setupFakeWorker()}});const R=()=>{const H=new Uint8Array;x.send("test",H,[H.buffer])};return void R()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(G=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const o=new LoopbackPort;this._port=o;const x="fake"+PDFWorkerUtil.fakeWorkerId++,s=new _message_handler.MessageHandler(x+"_worker",x,o);G.setup(s,o);const O=new _message_handler.MessageHandler(x,x+"_worker",o);this._messageHandler=O,this._readyCapability.resolve(),O.send("configure",{verbosity:this.verbosity})}).catch(G=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${G.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(G){if(!G?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,_PDFWorker,_workerPorts).has(G.port)?_classStaticPrivateFieldSpecGet(this,_PDFWorker,_workerPorts).get(G.port):new _PDFWorker(G)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function G(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}var _workerPorts={writable:!0,value:new WeakMap};exports.PDFWorker=_PDFWorker,_PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(o,x,s,O){_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=o,this.loadingTask=x,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:x.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:O.ownerDocument,styleElement:O.styleElement}),this._params=O,O.useWorkerFetch||(this.CMapReaderFactory=new O.CMapReaderFactory({baseUrl:O.cMapUrl,isCompressed:O.cMapPacked}),this.StandardFontDataFactory=new O.StandardFontDataFactory({baseUrl:O.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(this,_docStats)}getRenderingIntent(o,x=_util.AnnotationMode.ENABLE,s=!1){let O=_util.RenderingIntentFlag.DISPLAY,R="";switch(o){case"any":O=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":O=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${o}`)}switch(x){case _util.AnnotationMode.DISABLE:O+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:O+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:O+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,R=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${x}`)}return s&&(O+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:O,cacheKey:`${O}_${R}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const o=[];for(const s of _classPrivateFieldGet(this,_pageCache).values())o.push(s._destroy());_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const x=this.messageHandler.sendWithPromise("Terminate",null);return o.push(x),Promise.all(o).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:o,loadingTask:x}=this;o.on("GetReader",(s,O)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=R=>{this._lastProgress={loaded:R.loaded,total:R.total}},O.onPull=()=>{this._fullReader.read().then(function({value:R,done:H}){H?O.close():((0,_util.assert)((0,_util.isArrayBuffer)(R),"GetReader - expected an ArrayBuffer."),O.enqueue(new Uint8Array(R),1,[R]))}).catch(R=>{O.error(R)})},O.onCancel=R=>{this._fullReader.cancel(R),O.ready.catch(H=>{if(!this.destroyed)throw H})}}),o.on("ReaderHeadersReady",s=>{const O=(0,_util.createPromiseCapability)(),R=this._fullReader;return R.headersReady.then(()=>{(!R.isStreamingSupported||!R.isRangeSupported)&&(this._lastProgress&&x.onProgress?.(this._lastProgress),R.onProgress=H=>{x.onProgress?.({loaded:H.loaded,total:H.total})}),O.resolve({isStreamingSupported:R.isStreamingSupported,isRangeSupported:R.isRangeSupported,contentLength:R.contentLength})},O.reject),O.promise}),o.on("GetRangeReader",(s,O)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const R=this._networkStream.getRangeReader(s.begin,s.end);R?(O.onPull=()=>{R.read().then(function({value:H,done:E}){E?O.close():((0,_util.assert)((0,_util.isArrayBuffer)(H),"GetRangeReader - expected an ArrayBuffer."),O.enqueue(new Uint8Array(H),1,[H]))}).catch(H=>{O.error(H)})},O.onCancel=H=>{R.cancel(H),O.ready.catch(E=>{if(!this.destroyed)throw E})}):O.close()}),o.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,x._capability.resolve(new PDFDocumentProxy(s,this))}),o.on("DocException",function(s){let O;switch(s.name){case"PasswordException":O=new _util.PasswordException(s.message,s.code);break;case"InvalidPDFException":O=new _util.InvalidPDFException(s.message);break;case"MissingPDFException":O=new _util.MissingPDFException(s.message);break;case"UnexpectedResponseException":O=new _util.UnexpectedResponseException(s.message,s.status);break;case"UnknownErrorException":O=new _util.UnknownErrorException(s.message,s.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}x._capability.reject(O)}),o.on("PasswordRequest",s=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),x.onPassword){const O=R=>{R instanceof Error?this._passwordCapability.reject(R):this._passwordCapability.resolve({password:R})};try{x.onPassword(O,s.code)}catch(R){this._passwordCapability.reject(R)}}else this._passwordCapability.reject(new _util.PasswordException(s.message,s.code));return this._passwordCapability.promise}),o.on("DataLoaded",s=>{x.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),o.on("StartRenderPage",s=>{this.destroyed||_classPrivateFieldGet(this,_pageCache).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),o.on("commonobj",([s,O,R])=>{if(!this.destroyed&&!this.commonObjs.has(s))switch(O){case"Font":const H=this._params;if("error"in R){const v=R.error;(0,_util.warn)(`Error during font loading: ${v}`),this.commonObjs.resolve(s,v);break}let E=null;H.pdfBug&&globalThis.FontInspector?.enabled&&(E={registerFont(v,D){globalThis.FontInspector.fontAdded(v,D)}});const T=new _font_loader.FontFaceObject(R,{isEvalSupported:H.isEvalSupported,disableFontFace:H.disableFontFace,ignoreErrors:H.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:E});this.fontLoader.bind(T).catch(v=>o.sendWithPromise("FontFallback",{id:s})).finally(()=>{!H.fontExtraProperties&&T.data&&(T.data=null),this.commonObjs.resolve(s,T)});break;case"FontPath":case"Image":this.commonObjs.resolve(s,R);break;default:throw new Error(`Got unknown common object type ${O}`)}}),o.on("obj",([s,O,R,H])=>{if(this.destroyed)return;const E=_classPrivateFieldGet(this,_pageCache).get(O);if(!E.objs.has(s))switch(R){case"Image":E.objs.resolve(s,H);const T=8e6;if(H){let v;if(H.bitmap){const{bitmap:D,width:W,height:z}=H;v=W*z*4,E._bitmaps.add(D)}else v=H.data?.length||0;v>T&&(E.cleanupAfterRender=!0)}break;case"Pattern":E.objs.resolve(s,H);break;default:throw new Error(`Got unknown object type ${R}`)}}),o.on("DocProgress",s=>{this.destroyed||x.onProgress?.({loaded:s.loaded,total:s.total})}),o.on("DocStats",s=>{this.destroyed||_classPrivateFieldSet(this,_docStats,Object.freeze({streamTypes:Object.freeze(s.streamTypes),fontTypes:Object.freeze(s.fontTypes)}))}),o.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),o.on("FetchBuiltInCMap",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(s):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),o.on("FetchStandardFontData",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(s):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:o}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(o)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(o){if(!Number.isInteger(o)||o<=0||o>this._numPages)return Promise.reject(new Error("Invalid page request."));const x=o-1,s=_classPrivateFieldGet(this,_pagePromises).get(x);if(s)return s;const O=this.messageHandler.sendWithPromise("GetPage",{pageIndex:x}).then(R=>{if(this.destroyed)throw new Error("Transport destroyed");const H=new PDFPageProxy(x,R,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(this,_pageCache).set(x,H),H});return _classPrivateFieldGet(this,_pagePromises).set(x,O),O}getPageIndex(o){return"object"!=typeof o||null===o||!Number.isInteger(o.num)||o.num<0||!Number.isInteger(o.gen)||o.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:o.num,gen:o.gen})}getAnnotations(o,x){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:o,intent:x})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(o){return"string"!=typeof o?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:o})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(o){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:o})}getStructTree(o){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:o})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(o=>new _optional_content_config.OptionalContentConfig(o))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(o=>({info:o[0],metadata:o[1]?new _metadata.Metadata(o[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(o=!1){var x=this;return _asyncToGenerator(function*(){if(yield x.messageHandler.sendWithPromise("Cleanup",null),!x.destroyed){for(const s of _classPrivateFieldGet(x,_pageCache).values())if(!s.cleanup())throw new Error(`startCleanup: Page ${s.pageNumber} is currently rendering.`);x.commonObjs.clear(),o||x.fontLoader.clear(),_classPrivateFieldSet(x,_metadataPromise,null),x._getFieldObjectsPromise=null,x._hasJSActionsPromise=null}})()}get loadingParams(){const o=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:o.disableAutoFetch,enableXfa:o.enableXfa})}}var _objs=new WeakMap,_ensureObj=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(o,x=null){if(x){const O=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,o);return O.capability.promise.then(()=>x(O.data)),null}const s=_classPrivateFieldGet(this,_objs)[o];if(!s?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${o}.`);return s.data}has(o){return _classPrivateFieldGet(this,_objs)[o]?.capability.settled||!1}resolve(o,x=null){const s=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,o);s.data=x,s.capability.resolve()}clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}}function _ensureObj2(G){return _classPrivateFieldGet(this,_objs)[G]||(_classPrivateFieldGet(this,_objs)[G]={capability:(0,_util.createPromiseCapability)(),data:null})}class RenderTask{constructor(o){this._internalRenderTask=o,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor({callback:o,params:x,objs:s,commonObjs:O,annotationCanvasMap:R,operatorList:H,pageIndex:E,canvasFactory:T,useRequestAnimationFrame:v=!1,pdfBug:D=!1,pageColors:W=null}){this.callback=o,this.params=x,this.objs=s,this.commonObjs=O,this.annotationCanvasMap=R,this.operatorListIdx=null,this.operatorList=H,this._pageIndex=E,this.canvasFactory=T,this._pdfBug=D,this.pageColors=W,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===v&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=x.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:o=!1,optionalContentConfig:x}){if(this.cancelled)return;if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:O,transform:R,imageLayer:H,background:E}=this.params;this.gfx=new _canvas.CanvasGraphics(s,this.commonObjs,this.objs,this.canvasFactory,H,x,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:R,viewport:O,transparency:o,background:E}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(o=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback(o||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var o=this;return _asyncToGenerator(function*(){o.cancelled||(o.operatorListIdx=o.gfx.executeOperatorList(o.operatorList,o.operatorListIdx,o._continueBound,o.stepper),o.operatorListIdx===o.operatorList.argsArray.length&&(o.running=!1,o.operatorList.lastChunk&&(o.gfx.endDrawing(),o._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(o._canvas),o.callback())))})()}}var _canvasInUse={writable:!0,value:new WeakSet};const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.StatTimer=o.RenderingCancelledException=o.PixelsPerInch=o.PageViewport=o.PDFDateString=o.DOMStandardFontDataFactory=o.DOMSVGFactory=o.DOMCanvasFactory=o.DOMCMapReaderFactory=void 0,o.deprecated=function i(b){console.log("Deprecated API usage: "+b)},o.getFilenameFromUrl=function A(b){const f=b.indexOf("#"),u=b.indexOf("?"),w=Math.min(f>0?f:b.length,u>0?u:b.length);return b.substring(b.lastIndexOf("/",w)+1,w)},o.getPdfFilenameFromUrl=function C(b,f="document.pdf"){if("string"!=typeof b)return f;if(_(b))return(0,O.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),f;const w=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,k=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(b);let j=w.exec(k[1])||w.exec(k[2])||w.exec(k[3]);if(j&&(j=j[0],j.includes("%")))try{j=w.exec(decodeURIComponent(j))[0]}catch{}return j||f},o.getXfaPageViewport=function d(b,{scale:f=1,rotation:u=0}){const{width:w,height:k}=b.attributes.style,j=[0,0,parseInt(w),parseInt(k)];return new N({viewBox:j,scale:f,rotation:u})},o.isDataScheme=_,o.isPdfFile=function t(b){return"string"==typeof b&&/\.pdf$/i.test(b)},o.isValidFetchUrl=P,o.loadScript=function n(b,f=!1){return new Promise((u,w)=>{const k=document.createElement("script");k.src=b,k.onload=function(j){f&&k.remove(),u(j)},k.onerror=function(){w(new Error(`Cannot load script at: ${k.src}`))},(document.head||document.documentElement).appendChild(k)})};var s=x(6),O=x(1);class H{}function T(b){return v.apply(this,arguments)}function v(){return(v=_asyncToGenerator(function*(b,f=!1){if(P(b,document.baseURI)){const u=yield fetch(b);if(!u.ok)throw new Error(u.statusText);return f?new Uint8Array(yield u.arrayBuffer()):(0,O.stringToBytes)(yield u.text())}return new Promise((u,w)=>{const k=new XMLHttpRequest;k.open("GET",b,!0),f&&(k.responseType="arraybuffer"),k.onreadystatechange=()=>{if(k.readyState===XMLHttpRequest.DONE){if(200===k.status||0===k.status){let j;if(f&&k.response?j=new Uint8Array(k.response):!f&&k.responseText&&(j=(0,O.stringToBytes)(k.responseText)),j)return void u(j)}w(new Error(k.statusText))}},k.send(null)})})).apply(this,arguments)}_defineProperty(H,"CSS",96),_defineProperty(H,"PDF",72),_defineProperty(H,"PDF_TO_CSS_UNITS",H.CSS/H.PDF),o.PixelsPerInch=H,o.DOMCanvasFactory=class E extends s.BaseCanvasFactory{constructor({ownerDocument:f=globalThis.document}={}){super(),this._document=f}_createCanvas(f,u){const w=this._document.createElement("canvas");return w.width=f,w.height=u,w}},o.DOMCMapReaderFactory=class D extends s.BaseCMapReaderFactory{_fetchData(f,u){return T(f,this.isCompressed).then(w=>({cMapData:w,compressionType:u}))}},o.DOMStandardFontDataFactory=class W extends s.BaseStandardFontDataFactory{_fetchData(f){return T(f,!0)}},o.DOMSVGFactory=class z extends s.BaseSVGFactory{_createSVG(f){return document.createElementNS("http://www.w3.org/2000/svg",f)}};class N{constructor({viewBox:f,scale:u,rotation:w,offsetX:k=0,offsetY:j=0,dontFlip:$=!1}){this.viewBox=f,this.scale=u,this.rotation=w,this.offsetX=k,this.offsetY=j;const ee=(f[2]+f[0])/2,te=(f[3]+f[1])/2;let ae,ge,de,F,a,e,r,l;switch((w%=360)<0&&(w+=360),w){case 180:ae=-1,ge=0,de=0,F=1;break;case 90:ae=0,ge=1,de=1,F=0;break;case 270:ae=0,ge=-1,de=-1,F=0;break;case 0:ae=1,ge=0,de=0,F=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}$&&(de=-de,F=-F),0===ae?(a=Math.abs(te-f[1])*u+k,e=Math.abs(ee-f[0])*u+j,r=Math.abs(f[3]-f[1])*u,l=Math.abs(f[2]-f[0])*u):(a=Math.abs(ee-f[0])*u+k,e=Math.abs(te-f[1])*u+j,r=Math.abs(f[2]-f[0])*u,l=Math.abs(f[3]-f[1])*u),this.transform=[ae*u,ge*u,de*u,F*u,a-ae*u*ee-de*u*te,e-ge*u*ee-F*u*te],this.width=r,this.height=l}clone({scale:f=this.scale,rotation:u=this.rotation,offsetX:w=this.offsetX,offsetY:k=this.offsetY,dontFlip:j=!1}={}){return new N({viewBox:this.viewBox.slice(),scale:f,rotation:u,offsetX:w,offsetY:k,dontFlip:j})}convertToViewportPoint(f,u){return O.Util.applyTransform([f,u],this.transform)}convertToViewportRectangle(f){const u=O.Util.applyTransform([f[0],f[1]],this.transform),w=O.Util.applyTransform([f[2],f[3]],this.transform);return[u[0],u[1],w[0],w[1]]}convertToPdfPoint(f,u){return O.Util.applyInverseTransform([f,u],this.transform)}}function _(b){const f=b.length;let u=0;for(;u<f&&""===b[u].trim();)u++;return"data:"===b.substring(u,u+5).toLowerCase()}function P(b,f){try{const{protocol:u}=f?new URL(b,f):new URL(b);return"http:"===u||"https:"===u}catch{return!1}}let h;o.PageViewport=N,o.RenderingCancelledException=class B extends O.BaseException{constructor(f,u){super(f,"RenderingCancelledException"),this.type=u}},o.StatTimer=class y{constructor(){this.started=Object.create(null),this.times=[]}time(f){f in this.started&&(0,O.warn)(`Timer is already running for ${f}`),this.started[f]=Date.now()}timeEnd(f){f in this.started||(0,O.warn)(`Timer has not been started for ${f}`),this.times.push({name:f,start:this.started[f],end:Date.now()}),delete this.started[f]}toString(){const f=[];let u=0;for(const w of this.times){const k=w.name;k.length>u&&(u=k.length)}for(const w of this.times){const k=w.end-w.start;f.push(`${w.name.padEnd(u)} ${k}ms\n`)}return f.join("")}},o.PDFDateString=class m{static toDateObject(f){if(!f||"string"!=typeof f)return null;h||(h=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const u=h.exec(f);if(!u)return null;const w=parseInt(u[1],10);let k=parseInt(u[2],10);k=k>=1&&k<=12?k-1:0;let j=parseInt(u[3],10);j=j>=1&&j<=31?j:1;let $=parseInt(u[4],10);$=$>=0&&$<=23?$:0;let ee=parseInt(u[5],10);ee=ee>=0&&ee<=59?ee:0;let te=parseInt(u[6],10);te=te>=0&&te<=59?te:0;const ae=u[7]||"Z";let ge=parseInt(u[8],10);ge=ge>=0&&ge<=23?ge:0;let de=parseInt(u[9],10)||0;return de=de>=0&&de<=59?de:0,"-"===ae?($+=ge,ee+=de):"+"===ae&&($-=ge,ee-=de),new Date(Date.UTC(w,k,j,$,ee,te))}}},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BaseStandardFontDataFactory=o.BaseSVGFactory=o.BaseCanvasFactory=o.BaseCMapReaderFactory=void 0;var s=x(1);class O{constructor(){this.constructor===O&&(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}create(v,D){if(v<=0||D<=0)throw new Error("Invalid canvas size");const W=this._createCanvas(v,D);return{canvas:W,context:W.getContext("2d")}}reset(v,D,W){if(!v.canvas)throw new Error("Canvas is not specified");if(D<=0||W<=0)throw new Error("Invalid canvas size");v.canvas.width=D,v.canvas.height=W}destroy(v){if(!v.canvas)throw new Error("Canvas is not specified");v.canvas.width=0,v.canvas.height=0,v.canvas=null,v.context=null}_createCanvas(v,D){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}o.BaseCanvasFactory=O;class R{constructor({baseUrl:v=null,isCompressed:D=!1}){this.constructor===R&&(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=v,this.isCompressed=D}fetch({name:v}){var D=this;return _asyncToGenerator(function*(){if(!D.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!v)throw new Error("CMap name must be specified.");const W=D.baseUrl+v+(D.isCompressed?".bcmap":"");return D._fetchData(W,D.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE).catch(N=>{throw new Error(`Unable to load ${D.isCompressed?"binary ":""}CMap at: ${W}`)})})()}_fetchData(v,D){(0,s.unreachable)("Abstract method `_fetchData` called.")}}o.BaseCMapReaderFactory=R;class H{constructor({baseUrl:v=null}){this.constructor===H&&(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=v}fetch({filename:v}){var D=this;return _asyncToGenerator(function*(){if(!D.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!v)throw new Error("Font filename must be specified.");const W=`${D.baseUrl}${v}`;return D._fetchData(W).catch(z=>{throw new Error(`Unable to load font data at: ${W}`)})})()}_fetchData(v){(0,s.unreachable)("Abstract method `_fetchData` called.")}}o.BaseStandardFontDataFactory=H;class E{constructor(){this.constructor===E&&(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}create(v,D){if(v<=0||D<=0)throw new Error("Invalid SVG dimensions");const W=this._createSVG("svg:svg");return W.setAttribute("version","1.1"),W.setAttribute("width",`${v}px`),W.setAttribute("height",`${D}px`),W.setAttribute("preserveAspectRatio","none"),W.setAttribute("viewBox",`0 0 ${v} ${D}`),W}createElement(v){if("string"!=typeof v)throw new Error("Invalid SVG element type");return this._createSVG(v)}_createSVG(v){(0,s.unreachable)("Abstract method `_createSVG` called.")}}o.BaseSVGFactory=E},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FontLoader=o.FontFaceObject=void 0;var s=x(1);class O{constructor({docId:T,onUnsupportedFeature:v,ownerDocument:D=globalThis.document,styleElement:W=null}){this.constructor===O&&(0,s.unreachable)("Cannot initialize BaseFontLoader."),this.docId=T,this._onUnsupportedFeature=v,this._document=D,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(T){this.nativeFontFaces.push(T),this._document.fonts.add(T)}insertRule(T){let v=this.styleElement;v||(v=this.styleElement=this._document.createElement("style"),v.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(v));const D=v.sheet;D.insertRule(T,D.cssRules.length)}clear(){for(const T of this.nativeFontFaces)this._document.fonts.delete(T);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(T){var v=this;return _asyncToGenerator(function*(){if(T.attached||T.missingFile)return;if(T.attached=!0,v.isFontLoadingAPISupported){const W=T.createNativeFontFace();if(W){v.addNativeFontFace(W);try{yield W.loaded}catch(z){throw v._onUnsupportedFeature({featureId:s.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,s.warn)(`Failed to load font '${W.family}': '${z}'.`),T.disableFontFace=!0,z}}return}const D=T.createFontFaceRule();if(D){if(v.insertRule(D),v.isSyncFontLoadingSupported)return;yield new Promise(W=>{const z=v._queueLoadingCallback(W);v._prepareFontLoadEvent([D],[T],z)})}})()}_queueLoadingCallback(T){(0,s.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){return(0,s.shadow)(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){(0,s.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,s.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(T,v,D){(0,s.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let R;o.FontLoader=R,o.FontLoader=R=class extends O{constructor(T){super(T),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let T=!1;return(typeof navigator>"u"||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(T=!0),(0,s.shadow)(this,"isSyncFontLoadingSupported",T)}_queueLoadingCallback(T){const D=this.loadingContext,W={id:"pdfjs-font-loading-"+D.nextRequestId++,done:!1,complete:function v(){for((0,s.assert)(!W.done,"completeRequest() cannot be called twice."),W.done=!0;D.requests.length>0&&D.requests[0].done;){const z=D.requests.shift();setTimeout(z.callback,0)}},callback:T};return D.requests.push(W),W}get _loadTestFont(){return(0,s.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(T,v,D){function W(w,k){return w.charCodeAt(k)<<24|w.charCodeAt(k+1)<<16|w.charCodeAt(k+2)<<8|255&w.charCodeAt(k+3)}function z(w,k,j,$){return w.substring(0,k)+$+w.substring(k+j)}let N,B;const _=this._document.createElement("canvas");_.width=1,_.height=1;const t=_.getContext("2d");let A=0;const y=`lt${Date.now()}${this.loadTestFontId++}`;let P=this._loadTestFont;P=z(P,976,y.length,y);const h=1482184792;let m=W(P,16);for(N=0,B=y.length-3;N<B;N+=4)m=m-h+W(y,N)|0;N<y.length&&(m=m-h+W(y+"XXX",N)|0),P=z(P,16,4,(0,s.string32)(m));const d=`url(data:font/opentype;base64,${btoa(P)});`;this.insertRule(`@font-face {font-family:"${y}";src:${d}}`);const f=[];for(const w of v)f.push(w.loadedName);f.push(y);const u=this._document.createElement("div");u.style.visibility="hidden",u.style.width=u.style.height="10px",u.style.position="absolute",u.style.top=u.style.left="0px";for(const w of f){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=w,u.appendChild(k)}this._document.body.appendChild(u),function C(w,k){if(A++,A>30)return(0,s.warn)("Load test font never loaded."),void k();t.font="30px "+w,t.fillText(".",0,20),t.getImageData(0,0,1,1).data[3]>0?k():setTimeout(C.bind(null,w,k))}(y,()=>{u.remove(),D.complete()})}},o.FontFaceObject=class H{constructor(T,{isEvalSupported:v=!0,disableFontFace:D=!1,ignoreErrors:W=!1,onUnsupportedFeature:z,fontRegistry:N=null}){this.compiledGlyphs=Object.create(null);for(const B in T)this[B]=T[B];this.isEvalSupported=!1!==v,this.disableFontFace=!0===D,this.ignoreErrors=!0===W,this._onUnsupportedFeature=z,this.fontRegistry=N}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let T;if(this.cssFontInfo){const v={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(v.style=`oblique ${this.cssFontInfo.italicAngle}deg`),T=new FontFace(this.cssFontInfo.fontFamily,this.data,v)}else T=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),T}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const T=(0,s.bytesToString)(this.data),v=`url(data:${this.mimetype};base64,${btoa(T)});`;let D;if(this.cssFontInfo){let W=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(W+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),D=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${W}src:${v}}`}else D=`@font-face {font-family:"${this.loadedName}";src:${v}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,v),D}getPathGenerator(T,v){if(void 0!==this.compiledGlyphs[v])return this.compiledGlyphs[v];let D;try{D=T.get(this.loadedName+"_path_"+v)}catch(W){if(!this.ignoreErrors)throw W;return this._onUnsupportedFeature({featureId:s.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,s.warn)(`getPathGenerator - ignoring character: "${W}".`),this.compiledGlyphs[v]=function(z,N){}}if(this.isEvalSupported&&s.FeatureTest.isEvalSupported){const W=[];for(const z of D){const N=void 0!==z.args?z.args.join(","):"";W.push("c.",z.cmd,"(",N,");\n")}return this.compiledGlyphs[v]=new Function("c","size",W.join(""))}return this.compiledGlyphs[v]=function(W,z){for(const N of D)"scale"===N.cmd&&(N.args=[z,-z]),W[N.cmd].apply(W,N.args)}}}},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationStorage=void 0;var s=x(9),O=x(1);o.AnnotationStorage=class R{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(E,T){const v=this._storage.get(E);return void 0===v?T:Object.assign(T,v)}getRawValue(E){return this._storage.get(E)}setValue(E,T){const v=this._storage.get(E);let D=!1;if(void 0!==v)for(const[W,z]of Object.entries(T))v[W]!==z&&(D=!0,v[W]=z);else D=!0,this._storage.set(E,T);D&&this._setModified()}getAll(){return this._storage.size>0?(0,O.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const E=new s.MurmurHash3_64;for(const[T,v]of this._storage)E.update(`${T}:${JSON.stringify(v)}`);return E.hexdigest()}}},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MurmurHash3_64=void 0;var s=x(1);const O=3285377520,R=4294901760,H=65535;o.MurmurHash3_64=class E{constructor(v){this.h1=v?4294967295&v:O,this.h2=v?4294967295&v:O}update(v){let D,W;if("string"==typeof v){D=new Uint8Array(2*v.length),W=0;for(let h=0,m=v.length;h<m;h++){const d=v.charCodeAt(h);d<=255?D[W++]=d:(D[W++]=d>>>8,D[W++]=255&d)}}else{if(!(0,s.isArrayBuffer)(v))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");D=v.slice(),W=D.byteLength}const z=W>>2,N=W-4*z,B=new Uint32Array(D.buffer,0,z);let _=0,t=0,A=this.h1,C=this.h2;const y=3432918353,P=461845907,n=y&H,i=P&H;for(let h=0;h<z;h++)1&h?(_=B[h],_=_*y&R|_*n&H,_=_<<15|_>>>17,_=_*P&R|_*i&H,A^=_,A=A<<13|A>>>19,A=5*A+3864292196):(t=B[h],t=t*y&R|t*n&H,t=t<<15|t>>>17,t=t*P&R|t*i&H,C^=t,C=C<<13|C>>>19,C=5*C+3864292196);switch(_=0,N){case 3:_^=D[4*z+2]<<16;case 2:_^=D[4*z+1]<<8;case 1:_^=D[4*z],_=_*y&R|_*n&H,_=_<<15|_>>>17,_=_*P&R|_*i&H,1&z?A^=_:C^=_}this.h1=A,this.h2=C}hexdigest(){let v=this.h1,D=this.h2;v^=D>>>1,v=3981806797*v&R|36045*v&H,D=4283543511*D&R|(2950163797*(D<<16|v>>>16)&R)>>>16,v^=D>>>1,v=444984403*v&R|60499*v&H,D=3301882366*D&R|(3120437893*(D<<16|v>>>16)&R)>>>16,v^=D>>>1;const W=(v>>>0).toString(16),z=(D>>>0).toString(16);return W.padStart(8,"0")+z.padStart(8,"0")}}},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CanvasGraphics=void 0;var s=x(1),O=x(11),R=x(12),H=x(3),E=x(5);const D=4096,_=16;function C(F){if(F._transformStack&&(F._transformStack=[]),!F.mozCurrentTransform){F._originalSave=F.save,F._originalRestore=F.restore,F._originalRotate=F.rotate,F._originalScale=F.scale,F._originalTranslate=F.translate,F._originalTransform=F.transform,F._originalSetTransform=F.setTransform,F._originalResetTransform=F.resetTransform,F._transformMatrix=F._transformMatrix||[1,0,0,1,0,0],F._transformStack=[];try{const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(F),"lineWidth");F._setLineWidth=a.set,F._getLineWidth=a.get,Object.defineProperty(F,"lineWidth",{set:function(r){this._setLineWidth(1.000001*r)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(F,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(F,"mozCurrentTransformInverse",{get:function(){const[e,r,l,p,g,c]=this._transformMatrix,L=e*p-r*l,Z=r*l-e*p;return[p/L,r/Z,l/Z,e/L,(p*g-l*c)/Z,(r*g-e*c)/L]}}),F.save=function(){const e=this._transformMatrix;this._transformStack.push(e),this._transformMatrix=e.slice(0,6),this._originalSave()},F.restore=function(){0===this._transformStack.length&&(0,s.warn)("Tried to restore a ctx when the stack was already empty.");const e=this._transformStack.pop();e&&(this._transformMatrix=e,this._originalRestore())},F.translate=function(e,r){const l=this._transformMatrix;l[4]=l[0]*e+l[2]*r+l[4],l[5]=l[1]*e+l[3]*r+l[5],this._originalTranslate(e,r)},F.scale=function(e,r){const l=this._transformMatrix;l[0]*=e,l[1]*=e,l[2]*=r,l[3]*=r,this._originalScale(e,r)},F.transform=function(e,r,l,p,g,c){const L=this._transformMatrix;this._transformMatrix=[L[0]*e+L[2]*r,L[1]*e+L[3]*r,L[0]*l+L[2]*p,L[1]*l+L[3]*p,L[0]*g+L[2]*c+L[4],L[1]*g+L[3]*c+L[5]],F._originalTransform(e,r,l,p,g,c)},F.setTransform=function(e,r,l,p,g,c){this._transformMatrix=[e,r,l,p,g,c],F._originalSetTransform(e,r,l,p,g,c)},F.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],F._originalResetTransform()},F.rotate=function(e){const r=Math.cos(e),l=Math.sin(e),p=this._transformMatrix;this._transformMatrix=[p[0]*r+p[2]*l,p[1]*r+p[3]*l,p[0]*-l+p[2]*r,p[1]*-l+p[3]*r,p[4],p[5]],this._originalRotate(e)}}}class y{constructor(a){this.canvasFactory=a,this.cache=Object.create(null)}getCanvas(a,e,r,l){let p;return void 0!==this.cache[a]?(p=this.cache[a],this.canvasFactory.reset(p,e,r),p.context.setTransform(1,0,0,1,0,0)):(p=this.canvasFactory.create(e,r),this.cache[a]=p),l&&C(p.context),p}delete(a){delete this.cache[a]}clear(){for(const a in this.cache)this.canvasFactory.destroy(this.cache[a]),delete this.cache[a]}}function P(F,a,e,r,l,p,g,c,L,Z){const[U,Y,Q,ie,se,_e]=F.mozCurrentTransform;if(0===Y&&0===Q){const ue=Math.round(g*U+se),Te=Math.round(c*ie+_e),he=Math.abs(Math.round((g+L)*U+se)-ue)||1,Pe=Math.abs(Math.round((c+Z)*ie+_e)-Te)||1;return F.setTransform(Math.sign(U),0,0,Math.sign(ie),ue,Te),F.drawImage(a,e,r,l,p,0,0,he,Pe),F.setTransform(U,Y,Q,ie,se,_e),[he,Pe]}if(0===U&&0===ie){const ue=Math.round(c*Q+se),Te=Math.round(g*Y+_e),he=Math.abs(Math.round((c+Z)*Q+se)-ue)||1,Pe=Math.abs(Math.round((g+L)*Y+_e)-Te)||1;return F.setTransform(0,Math.sign(Y),Math.sign(Q),0,ue,Te),F.drawImage(a,e,r,l,p,0,0,Pe,he),F.setTransform(U,Y,Q,ie,se,_e),[Pe,he]}return F.drawImage(a,e,r,l,p,g,c,L,Z),[Math.hypot(U,Y)*L,Math.hypot(Q,ie)*Z]}class i{constructor(a,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,a,e])}clone(){const a=Object.create(this);return a.clipBox=this.clipBox.slice(),a}setCurrentPoint(a,e){this.x=a,this.y=e}updatePathMinMax(a,e,r){[e,r]=s.Util.applyTransform([e,r],a),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(a,e){const r=s.Util.applyTransform(e,a),l=s.Util.applyTransform(e.slice(2),a);this.minX=Math.min(this.minX,r[0],l[0]),this.minY=Math.min(this.minY,r[1],l[1]),this.maxX=Math.max(this.maxX,r[0],l[0]),this.maxY=Math.max(this.maxY,r[1],l[1])}updateScalingPathMinMax(a,e){s.Util.scaleMinMax(a,e),this.minX=Math.min(this.minX,e[0]),this.maxX=Math.max(this.maxX,e[1]),this.minY=Math.min(this.minY,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(a,e,r,l,p,g,c,L,Z,U){const Y=s.Util.bezierBoundingBox(e,r,l,p,g,c,L,Z);if(U)return U[0]=Math.min(U[0],Y[0],Y[2]),U[1]=Math.max(U[1],Y[0],Y[2]),U[2]=Math.min(U[2],Y[1],Y[3]),void(U[3]=Math.max(U[3],Y[1],Y[3]));this.updateRectMinMax(a,Y)}getPathBoundingBox(a=O.PathType.FILL,e=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(a===O.PathType.STROKE){e||(0,s.unreachable)("Stroke bounding box must include transform.");const l=s.Util.singularValueDecompose2dScale(e),p=l[0]*this.lineWidth/2,g=l[1]*this.lineWidth/2;r[0]-=p,r[1]-=g,r[2]+=p,r[3]+=g}return r}updateClipFromPath(){const a=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(a||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(a){this.clipBox=a,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(a=O.PathType.FILL,e=null){return s.Util.intersect(this.clipBox,this.getPathBoundingBox(a,e))}}function h(F,a,e=null){if(typeof ImageData<"u"&&a instanceof ImageData)return void F.putImageData(a,0,0);const r=a.height,l=a.width,p=r%_,g=(r-p)/_,c=0===p?g:g+1,L=F.createImageData(l,_);let U,Z=0;const Y=a.data,Q=L.data;let ie,se,_e,Ae,xe,Se,ue,Me;if(e)switch(e.length){case 1:xe=e[0],Se=e[0],ue=e[0],Me=e[0];break;case 4:xe=e[0],Se=e[1],ue=e[2],Me=e[3]}if(a.kind===s.ImageKind.GRAYSCALE_1BPP){const Te=Y.byteLength,ye=new Uint32Array(Q.buffer,0,Q.byteLength>>2),he=ye.length,me=l+7>>3;let Pe=4294967295,le=s.FeatureTest.isLittleEndian?4278190080:255;for(Me&&255===Me[0]&&0===Me[255]&&([Pe,le]=[le,Pe]),ie=0;ie<c;ie++){for(_e=ie<g?_:p,U=0,se=0;se<_e;se++){const M=Te-Z;let J=0;const fe=M>me?l:8*M-7,ve=-8&fe;let q=0,I=0;for(;J<ve;J+=8)I=Y[Z++],ye[U++]=128&I?Pe:le,ye[U++]=64&I?Pe:le,ye[U++]=32&I?Pe:le,ye[U++]=16&I?Pe:le,ye[U++]=8&I?Pe:le,ye[U++]=4&I?Pe:le,ye[U++]=2&I?Pe:le,ye[U++]=1&I?Pe:le;for(;J<fe;J++)0===q&&(I=Y[Z++],q=128),ye[U++]=I&q?Pe:le,q>>=1}for(;U<he;)ye[U++]=0;F.putImageData(L,0,ie*_)}}else if(a.kind===s.ImageKind.RGBA_32BPP){const Te=!!(xe||Se||ue);for(se=0,Ae=l*_*4,ie=0;ie<g;ie++){if(Q.set(Y.subarray(Z,Z+Ae)),Z+=Ae,Te)for(let ye=0;ye<Ae;ye+=4)xe&&(Q[ye+0]=xe[Q[ye+0]]),Se&&(Q[ye+1]=Se[Q[ye+1]]),ue&&(Q[ye+2]=ue[Q[ye+2]]);F.putImageData(L,0,se),se+=_}if(ie<c){if(Ae=l*p*4,Q.set(Y.subarray(Z,Z+Ae)),Te)for(let ye=0;ye<Ae;ye+=4)xe&&(Q[ye+0]=xe[Q[ye+0]]),Se&&(Q[ye+1]=Se[Q[ye+1]]),ue&&(Q[ye+2]=ue[Q[ye+2]]);F.putImageData(L,0,se)}}else{if(a.kind!==s.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${a.kind}`);{const Te=!!(xe||Se||ue);for(_e=_,Ae=l*_e,ie=0;ie<c;ie++){for(ie>=g&&(_e=p,Ae=l*_e),U=0,se=Ae;se--;)Q[U++]=Y[Z++],Q[U++]=Y[Z++],Q[U++]=Y[Z++],Q[U++]=255;if(Te)for(let ye=0;ye<U;ye+=4)xe&&(Q[ye+0]=xe[Q[ye+0]]),Se&&(Q[ye+1]=Se[Q[ye+1]]),ue&&(Q[ye+2]=ue[Q[ye+2]]);F.putImageData(L,0,ie*_)}}}}function m(F,a){if(a.bitmap)return void F.drawImage(a.bitmap,0,0);const e=a.height,r=a.width,l=e%_,p=(e-l)/_,g=0===l?p:p+1,c=F.createImageData(r,_);let L=0;const Z=a.data,U=c.data;for(let Y=0;Y<g;Y++){const Q=Y<p?_:l;({srcPos:L}=(0,R.applyMaskImageData)({src:Z,srcPos:L,dest:U,width:r,height:Q})),F.putImageData(c,0,Y*_)}}function d(F,a){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let r=0,l=e.length;r<l;r++){const p=e[r];void 0!==F[p]&&(a[p]=F[p])}void 0!==F.setLineDash&&(a.setLineDash(F.getLineDash()),a.lineDashOffset=F.lineDashOffset)}function b(F,a){F.strokeStyle=F.fillStyle=a||"#000000",F.fillRule="nonzero",F.globalAlpha=1,F.lineWidth=1,F.lineCap="butt",F.lineJoin="miter",F.miterLimit=10,F.globalCompositeOperation="source-over",F.font="10px sans-serif",void 0!==F.setLineDash&&(F.setLineDash([]),F.lineDashOffset=0)}function f(F,a,e,r){const l=F.length;for(let p=3;p<l;p+=4){const g=F[p];if(0===g)F[p-3]=a,F[p-2]=e,F[p-1]=r;else if(g<255){const c=255-g;F[p-3]=F[p-3]*g+a*c>>8,F[p-2]=F[p-2]*g+e*c>>8,F[p-1]=F[p-1]*g+r*c>>8}}}function u(F,a,e){const r=F.length;for(let p=3;p<r;p+=4)a[p]=a[p]*(e?e[F[p]]:F[p])*.00392156862745098|0}function w(F,a,e){const r=F.length;for(let l=3;l<r;l+=4){const p=77*F[l-3]+152*F[l-2]+28*F[l-1];a[l]=e?a[l]*e[p>>8]>>8:a[l]*p>>16}}function $(F,a){const e=s.Util.singularValueDecompose2dScale(F);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*E.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==a?a:e[0]<=r||e[1]<=r}const ee=["butt","round","square"],te=["miter","round","bevel"],ae={},ge={};class de{constructor(a,e,r,l,p,g,c,L){this.ctx=a,this.current=new i(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=r,this.canvasFactory=l,this.imageLayer=p,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=g,this.cachedCanvases=new y(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=L?.background||null,this.foregroundColor=L?.foreground||null,a&&C(a),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(a,e=null){return"string"==typeof a?a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a):e}beginDrawing({transform:a,viewport:e,transparency:r=!1,background:l=null}){const p=this.ctx.canvas.width,g=this.ctx.canvas.height,c=l||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const L=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const Z=this.backgroundColor=this.ctx.fillStyle;let U=!0,Y=c;if(this.ctx.fillStyle=c,Y=this.ctx.fillStyle,U="string"==typeof Y&&/^#[0-9A-Fa-f]{6}$/.test(Y),"#000000"===L&&"#ffffff"===Z||L===Z||!U)this.foregroundColor=this.backgroundColor=null;else{const Q=parseInt(Y.slice(1),16),se=(Q&&65280)>>8,_e=Q&&255,Ae=Se=>(Se/=255)<=.03928?Se/12.92:((Se+.055)/1.055)**2.4,xe=Math.round(.2126*Ae((Q&&16711680)>>16)+.7152*Ae(se)+.0722*Ae(_e));this.selectColor=(Se,ue,Me)=>{const Te=.2126*Ae(Se)+.7152*Ae(ue)+.0722*Ae(Me);return Math.round(Te)===xe?Z:L}}}if(this.ctx.fillStyle=this.backgroundColor||c,this.ctx.fillRect(0,0,p,g),this.ctx.restore(),r){const L=this.cachedCanvases.getCanvas("transparent",p,g,!0);this.compositeCtx=this.ctx,this.transparentCanvas=L.canvas,this.ctx=L.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),b(this.ctx,this.foregroundColor),a&&(this.ctx.transform.apply(this.ctx,a),this.outputScaleX=a[0],this.outputScaleY=a[0]),this.ctx.transform.apply(this.ctx,e.transform),this.viewportScale=e.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(a,e,r,l){const p=a.argsArray,g=a.fnArray;let c=e||0;const L=p.length;if(L===c)return c;const Z=L-c>10&&"function"==typeof r,U=Z?Date.now()+15:0;let Y=0;const Q=this.commonObjs,ie=this.objs;let se;for(;;){if(void 0!==l&&c===l.nextBreakPoint)return l.breakIt(c,r),c;if(se=g[c],se!==s.OPS.dependency)this[se].apply(this,p[c]);else for(const _e of p[c]){const Ae=_e.startsWith("g_")?Q:ie;if(!Ae.has(_e))return Ae.get(_e,r),c}if(c++,c===L)return c;if(Z&&++Y>10){if(Date.now()>U)return r(),c;Y=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const a of this._cachedBitmapsMap.values()){for(const e of a.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);a.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(a,e){const r=a.width,l=a.height;let U,Y,p=Math.max(Math.hypot(e[0],e[1]),1),g=Math.max(Math.hypot(e[2],e[3]),1),c=r,L=l,Z="prescale1";for(;p>2&&c>1||g>2&&L>1;){let Q=c,ie=L;p>2&&c>1&&(Q=Math.ceil(c/2),p/=c/Q),g>2&&L>1&&(ie=Math.ceil(L/2),g/=L/ie),U=this.cachedCanvases.getCanvas(Z,Q,ie,!1),Y=U.context,Y.clearRect(0,0,Q,ie),Y.drawImage(a,0,0,c,L,0,0,Q,ie),a=U.canvas,c=Q,L=ie,Z="prescale1"===Z?"prescale2":"prescale1"}return{img:a,paintWidth:c,paintHeight:L}}_createMaskCanvas(a){const e=this.ctx,{width:r,height:l}=a,p=this.current.fillColor,g=this.current.patternFill,c=e.mozCurrentTransform;let L,Z,U,Y;if((a.bitmap||a.data)&&a.count>1){const he=a.bitmap||a.data.buffer,me=c.slice(0,4);Z=JSON.stringify(g?me:[me,p]),L=this._cachedBitmapsMap.get(he),L||(L=new Map,this._cachedBitmapsMap.set(he,L));const Pe=L.get(Z);if(Pe&&!g)return{canvas:Pe,offsetX:Math.round(Math.min(c[0],c[2])+c[4]),offsetY:Math.round(Math.min(c[1],c[3])+c[5])};U=Pe}U||(Y=this.cachedCanvases.getCanvas("maskCanvas",r,l,!1),m(Y.context,a));let Q=s.Util.transform(c,[1/r,0,0,-1/l,0,0]);Q=s.Util.transform(Q,[1,0,0,1,0,-l]);const ie=s.Util.applyTransform([0,0],Q),se=s.Util.applyTransform([r,l],Q),_e=s.Util.normalizeRect([ie[0],ie[1],se[0],se[1]]),Ae=Math.round(_e[2]-_e[0])||1,xe=Math.round(_e[3]-_e[1])||1,Se=this.cachedCanvases.getCanvas("fillCanvas",Ae,xe,!0),ue=Se.context,Me=Math.min(ie[0],se[0]),Te=Math.min(ie[1],se[1]);ue.translate(-Me,-Te),ue.transform.apply(ue,Q),U||(U=this._scaleImage(Y.canvas,ue.mozCurrentTransformInverse),U=U.img,L&&g&&L.set(Z,U)),ue.imageSmoothingEnabled=$(ue.mozCurrentTransform,a.interpolate),P(ue,U,0,0,U.width,U.height,0,0,r,l),ue.globalCompositeOperation="source-in";const ye=s.Util.transform(ue.mozCurrentTransformInverse,[1,0,0,1,-Me,-Te]);return ue.fillStyle=g?p.getPattern(e,this,ye,O.PathType.FILL):p,ue.fillRect(0,0,r,l),L&&!g&&(this.cachedCanvases.delete("fillCanvas"),L.set(Z,Se.canvas)),{canvas:Se.canvas,offsetX:Math.round(Me),offsetY:Math.round(Te)}}setLineWidth(a){a!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=a,this.ctx.lineWidth=a}setLineCap(a){this.ctx.lineCap=ee[a]}setLineJoin(a){this.ctx.lineJoin=te[a]}setMiterLimit(a){this.ctx.miterLimit=a}setDash(a,e){const r=this.ctx;void 0!==r.setLineDash&&(r.setLineDash(a),r.lineDashOffset=e)}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(let e=0,r=a.length;e<r;e++){const l=a[e],g=l[1];switch(l[0]){case"LW":this.setLineWidth(g);break;case"LC":this.setLineCap(g);break;case"LJ":this.setLineJoin(g);break;case"ML":this.setMiterLimit(g);break;case"D":this.setDash(g[0],g[1]);break;case"RI":this.setRenderingIntent(g);break;case"FL":this.setFlatness(g);break;case"Font":this.setFont(g[0],g[1]);break;case"CA":this.current.strokeAlpha=l[1];break;case"ca":this.current.fillAlpha=l[1],this.ctx.globalAlpha=l[1];break;case"BM":this.ctx.globalCompositeOperation=g;break;case"SMask":this.current.activeSMask=g?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=g}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const a=this.inSMaskMode;this.current.activeSMask&&!a?this.beginSMaskMode():!this.current.activeSMask&&a&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const l=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height,!0);this.suspendedCtx=this.ctx,this.ctx=l.context;const p=this.ctx;p.setTransform.apply(p,this.suspendedCtx.mozCurrentTransform),d(this.suspendedCtx,p),function A(F,a){if(F._removeMirroring)throw new Error("Context is already forwarding operations.");F.__originalSave=F.save,F.__originalRestore=F.restore,F.__originalRotate=F.rotate,F.__originalScale=F.scale,F.__originalTranslate=F.translate,F.__originalTransform=F.transform,F.__originalSetTransform=F.setTransform,F.__originalResetTransform=F.resetTransform,F.__originalClip=F.clip,F.__originalMoveTo=F.moveTo,F.__originalLineTo=F.lineTo,F.__originalBezierCurveTo=F.bezierCurveTo,F.__originalRect=F.rect,F.__originalClosePath=F.closePath,F.__originalBeginPath=F.beginPath,F._removeMirroring=()=>{F.save=F.__originalSave,F.restore=F.__originalRestore,F.rotate=F.__originalRotate,F.scale=F.__originalScale,F.translate=F.__originalTranslate,F.transform=F.__originalTransform,F.setTransform=F.__originalSetTransform,F.resetTransform=F.__originalResetTransform,F.clip=F.__originalClip,F.moveTo=F.__originalMoveTo,F.lineTo=F.__originalLineTo,F.bezierCurveTo=F.__originalBezierCurveTo,F.rect=F.__originalRect,F.closePath=F.__originalClosePath,F.beginPath=F.__originalBeginPath,delete F._removeMirroring},F.save=function(){a.save(),this.__originalSave()},F.restore=function(){a.restore(),this.__originalRestore()},F.translate=function(r,l){a.translate(r,l),this.__originalTranslate(r,l)},F.scale=function(r,l){a.scale(r,l),this.__originalScale(r,l)},F.transform=function(r,l,p,g,c,L){a.transform(r,l,p,g,c,L),this.__originalTransform(r,l,p,g,c,L)},F.setTransform=function(r,l,p,g,c,L){a.setTransform(r,l,p,g,c,L),this.__originalSetTransform(r,l,p,g,c,L)},F.resetTransform=function(){a.resetTransform(),this.__originalResetTransform()},F.rotate=function(r){a.rotate(r),this.__originalRotate(r)},F.clip=function(r){a.clip(r),this.__originalClip(r)},F.moveTo=function(e,r){a.moveTo(e,r),this.__originalMoveTo(e,r)},F.lineTo=function(e,r){a.lineTo(e,r),this.__originalLineTo(e,r)},F.bezierCurveTo=function(e,r,l,p,g,c){a.bezierCurveTo(e,r,l,p,g,c),this.__originalBezierCurveTo(e,r,l,p,g,c)},F.rect=function(e,r,l,p){a.rect(e,r,l,p),this.__originalRect(e,r,l,p)},F.closePath=function(){a.closePath(),this.__originalClosePath()},F.beginPath=function(){a.beginPath(),this.__originalBeginPath()}}(p,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),d(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(a){this.current.activeSMask&&(a?(a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.ceil(a[2]),a[3]=Math.ceil(a[3])):a=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function j(F,a,e,r){const l=r[0],p=r[1],g=r[2]-l,c=r[3]-p;0===g||0===c||(function k(F,a,e,r,l,p,g,c,L,Z,U){const Y=!!p,Q=Y?p[0]:0,ie=Y?p[1]:0,se=Y?p[2]:0;let _e;_e="Luminosity"===l?w:u;const xe=Math.min(r,Math.ceil(1048576/e));for(let Se=0;Se<r;Se+=xe){const ue=Math.min(xe,r-Se),Me=F.getImageData(c-Z,Se+(L-U),e,ue),Te=a.getImageData(c,Se+L,e,ue);Y&&f(Me.data,Q,ie,se),_e(Me.data,Te.data,g),a.putImageData(Te,c,Se+L)}}(a.context,e,g,c,a.subtype,a.backdrop,a.transferMap,l,p,a.offsetX,a.offsetY),F.save(),F.globalAlpha=1,F.globalCompositeOperation="source-over",F.setTransform(1,0,0,1,0,0),F.drawImage(e.canvas,0,0),F.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,a),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(d(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const a=this.current;this.stateStack.push(a),this.current=a.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),d(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(a,e,r,l,p,g){this.ctx.transform(a,e,r,l,p,g),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(a,e,r){const l=this.ctx,p=this.current;let L,Z,g=p.x,c=p.y;const U=l.mozCurrentTransform,Y=0===U[0]&&0===U[3]||0===U[1]&&0===U[2],Q=Y?r.slice(0):null;for(let ie=0,se=0,_e=a.length;ie<_e;ie++)switch(0|a[ie]){case s.OPS.rectangle:g=e[se++],c=e[se++];const Ae=e[se++],xe=e[se++],Se=g+Ae,ue=c+xe;l.moveTo(g,c),0===Ae||0===xe?l.lineTo(Se,ue):(l.lineTo(Se,c),l.lineTo(Se,ue),l.lineTo(g,ue)),Y||p.updateRectMinMax(U,[g,c,Se,ue]),l.closePath();break;case s.OPS.moveTo:g=e[se++],c=e[se++],l.moveTo(g,c),Y||p.updatePathMinMax(U,g,c);break;case s.OPS.lineTo:g=e[se++],c=e[se++],l.lineTo(g,c),Y||p.updatePathMinMax(U,g,c);break;case s.OPS.curveTo:L=g,Z=c,g=e[se+4],c=e[se+5],l.bezierCurveTo(e[se],e[se+1],e[se+2],e[se+3],g,c),p.updateCurvePathMinMax(U,L,Z,e[se],e[se+1],e[se+2],e[se+3],g,c,Q),se+=6;break;case s.OPS.curveTo2:L=g,Z=c,l.bezierCurveTo(g,c,e[se],e[se+1],e[se+2],e[se+3]),p.updateCurvePathMinMax(U,L,Z,g,c,e[se],e[se+1],e[se+2],e[se+3],Q),g=e[se+2],c=e[se+3],se+=4;break;case s.OPS.curveTo3:L=g,Z=c,g=e[se+2],c=e[se+3],l.bezierCurveTo(e[se],e[se+1],g,c,g,c),p.updateCurvePathMinMax(U,L,Z,e[se],e[se+1],g,c,g,c,Q),se+=4;break;case s.OPS.closePath:l.closePath()}Y&&p.updateScalingPathMinMax(U,Q),p.setCurrentPoint(g,c)}closePath(){this.ctx.closePath()}stroke(a){a=!(typeof a<"u")||a;const e=this.ctx,r=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof r&&r?.getPattern?(e.save(),e.strokeStyle=r.getPattern(e,this,e.mozCurrentTransformInverse,O.PathType.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),a&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(a){a=!(typeof a<"u")||a;const e=this.ctx,r=this.current.fillColor;let p=!1;this.current.patternFill&&(e.save(),e.fillStyle=r.getPattern(e,this,e.mozCurrentTransformInverse,O.PathType.FILL),p=!0);const g=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==g&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),p&&e.restore(),a&&this.consumePath(g)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ae}eoClip(){this.pendingClip=ge}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const a=this.pendingTextPaths,e=this.ctx;if(void 0!==a){e.save(),e.beginPath();for(let r=0;r<a.length;r++){const l=a[r];e.setTransform.apply(e,l.transform),e.translate(l.x,l.y),l.addToPath(e,l.fontSize)}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(a){this.current.charSpacing=a}setWordSpacing(a){this.current.wordSpacing=a}setHScale(a){this.current.textHScale=a/100}setLeading(a){this.current.leading=-a}setFont(a,e){const r=this.commonObjs.get(a),l=this.current;if(!r)throw new Error(`Can't find font for ${a}`);if(l.fontMatrix=r.fontMatrix||s.FONT_IDENTITY_MATRIX,(0===l.fontMatrix[0]||0===l.fontMatrix[3])&&(0,s.warn)("Invalid font matrix for font "+a),e<0?(e=-e,l.fontDirection=-1):l.fontDirection=1,this.current.font=r,this.current.fontSize=e,r.isType3Font)return;let g="normal";r.black?g="900":r.bold&&(g="bold");const c=r.italic?"italic":"normal",L=`"${r.loadedName||"sans-serif"}", ${r.fallbackName}`;let Z=e;e<16?Z=16:e>100&&(Z=100),this.current.fontSizeScale=e/Z,this.ctx.font=`${c} ${g} ${Z}px ${L}`}setTextRenderingMode(a){this.current.textRenderingMode=a}setTextRise(a){this.current.textRise=a}moveText(a,e){this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=e}setLeadingMoveText(a,e){this.setLeading(-e),this.moveText(a,e)}setTextMatrix(a,e,r,l,p,g){this.current.textMatrix=[a,e,r,l,p,g],this.current.textMatrixScale=Math.hypot(a,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(a,e,r,l){const p=this.ctx,g=this.current,c=g.font,L=g.textRenderingMode,Z=g.fontSize/g.fontSizeScale,U=L&s.TextRenderingMode.FILL_STROKE_MASK,Y=!!(L&s.TextRenderingMode.ADD_TO_PATH_FLAG),Q=g.patternFill&&!c.missingFile;let ie;(c.disableFontFace||Y||Q)&&(ie=c.getPathGenerator(this.commonObjs,a)),c.disableFontFace||Q?(p.save(),p.translate(e,r),p.beginPath(),ie(p,Z),l&&p.setTransform.apply(p,l),(U===s.TextRenderingMode.FILL||U===s.TextRenderingMode.FILL_STROKE)&&p.fill(),(U===s.TextRenderingMode.STROKE||U===s.TextRenderingMode.FILL_STROKE)&&p.stroke(),p.restore()):((U===s.TextRenderingMode.FILL||U===s.TextRenderingMode.FILL_STROKE)&&p.fillText(a,e,r),(U===s.TextRenderingMode.STROKE||U===s.TextRenderingMode.FILL_STROKE)&&p.strokeText(a,e,r)),Y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:p.mozCurrentTransform,x:e,y:r,fontSize:Z,addToPath:ie})}get isFontSubpixelAAEnabled(){const{context:a}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);a.scale(1.5,1),a.fillText("I",0,10);const e=a.getImageData(0,0,10,10).data;let r=!1;for(let l=3;l<e.length;l+=4)if(e[l]>0&&e[l]<255){r=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",r)}showText(a){const e=this.current,r=e.font;if(r.isType3Font)return this.showType3Text(a);const l=e.fontSize;if(0===l)return;const p=this.ctx,g=e.fontSizeScale,c=e.charSpacing,L=e.wordSpacing,Z=e.fontDirection,U=e.textHScale*Z,Y=a.length,Q=r.vertical,ie=Q?1:-1,se=r.defaultVMetrics,_e=l*e.fontMatrix[0],Ae=e.textRenderingMode===s.TextRenderingMode.FILL&&!r.disableFontFace&&!e.patternFill;let xe;if(p.save(),p.transform.apply(p,e.textMatrix),p.translate(e.x,e.y+e.textRise),p.scale(U,Z>0?-1:1),e.patternFill){p.save();const ye=e.fillColor.getPattern(p,this,p.mozCurrentTransformInverse,O.PathType.FILL);xe=p.mozCurrentTransform,p.restore(),p.fillStyle=ye}let Se=e.lineWidth;const ue=e.textMatrixScale;if(0===ue||0===Se){const ye=e.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;(ye===s.TextRenderingMode.STROKE||ye===s.TextRenderingMode.FILL_STROKE)&&(Se=this.getSinglePixelWidth())}else Se/=ue;1!==g&&(p.scale(g,g),Se/=g),p.lineWidth=Se;let Te,Me=0;for(Te=0;Te<Y;++Te){const ye=a[Te];if("number"==typeof ye){Me+=ie*ye*l/1e3;continue}let he=!1;const me=(ye.isSpace?L:0)+c,Pe=ye.fontChar,le=ye.accent;let M,J,ve,fe=ye.width;if(Q){const q=ye.vmetric||se,I=-(ye.vmetric?q[1]:.5*fe)*_e;fe=q?-q[0]:fe,M=I/g,J=(Me+q[2]*_e)/g}else M=Me/g,J=0;if(r.remeasure&&fe>0){const q=1e3*p.measureText(Pe).width/l*g;if(fe<q&&this.isFontSubpixelAAEnabled){const I=fe/q;he=!0,p.save(),p.scale(I,1),M/=I}else fe!==q&&(M+=(fe-q)/2e3*l/g)}this.contentVisible&&(ye.isInFont||r.missingFile)&&(Ae&&!le?p.fillText(Pe,M,J):(this.paintChar(Pe,M,J,xe),le&&this.paintChar(le.fontChar,M+l*le.offset.x/g,J-l*le.offset.y/g,xe))),ve=Q?fe*_e-me*Z:fe*_e+me*Z,Me+=ve,he&&p.restore()}Q?e.y-=Me:e.x+=Me*U,p.restore(),this.compose()}showType3Text(a){const e=this.ctx,r=this.current,l=r.font,p=r.fontSize,g=r.fontDirection,c=l.vertical?1:-1,L=r.charSpacing,Z=r.wordSpacing,U=r.textHScale*g,Y=r.fontMatrix||s.FONT_IDENTITY_MATRIX,Q=a.length;let se,_e,Ae,xe;if(r.textRenderingMode!==s.TextRenderingMode.INVISIBLE&&0!==p){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,e.save(),e.transform.apply(e,r.textMatrix),e.translate(r.x,r.y),e.scale(U,g),se=0;se<Q;++se){if(_e=a[se],"number"==typeof _e){xe=c*_e*p/1e3,this.ctx.translate(xe,0),r.x+=xe*U;continue}const Se=(_e.isSpace?Z:0)+L,ue=l.charProcOperatorList[_e.operatorListId];ue?(this.contentVisible&&(this.processingType3=_e,this.save(),e.scale(p,p),e.transform.apply(e,Y),this.executeOperatorList(ue),this.restore()),Ae=s.Util.applyTransform([_e.width,0],Y)[0]*p+Se,e.translate(Ae,0),r.x+=Ae*U):(0,s.warn)(`Type3 character "${_e.operatorListId}" is not available.`)}e.restore(),this.processingType3=null}}setCharWidth(a,e){}setCharWidthAndBounds(a,e,r,l,p,g){this.ctx.rect(r,l,p-r,g-l),this.ctx.clip(),this.endPath()}getColorN_Pattern(a){let e;if("TilingPattern"===a[0]){const r=a[1],l=this.baseTransform||this.ctx.mozCurrentTransform.slice();e=new O.TilingPattern(a,r,this.ctx,{createCanvasGraphics:g=>new de(g,this.commonObjs,this.objs,this.canvasFactory)},l)}else e=this._getPattern(a[1],a[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(a,e,r){const l=this.selectColor?.(a,e,r)||s.Util.makeHexColor(a,e,r);this.ctx.strokeStyle=l,this.current.strokeColor=l}setFillRGBColor(a,e,r){const l=this.selectColor?.(a,e,r)||s.Util.makeHexColor(a,e,r);this.ctx.fillStyle=l,this.current.fillColor=l,this.current.patternFill=!1}_getPattern(a,e=null){let r;return this.cachedPatterns.has(a)?r=this.cachedPatterns.get(a):(r=(0,O.getShadingPattern)(this.objs.get(a)),this.cachedPatterns.set(a,r)),e&&(r.matrix=e),r}shadingFill(a){if(!this.contentVisible)return;const e=this.ctx;this.save();const r=this._getPattern(a);e.fillStyle=r.getPattern(e,this,e.mozCurrentTransformInverse,O.PathType.SHADING);const l=e.mozCurrentTransformInverse;if(l){const p=e.canvas,g=p.width,c=p.height,L=s.Util.applyTransform([0,0],l),Z=s.Util.applyTransform([0,c],l),U=s.Util.applyTransform([g,0],l),Y=s.Util.applyTransform([g,c],l),Q=Math.min(L[0],Z[0],U[0],Y[0]),ie=Math.min(L[1],Z[1],U[1],Y[1]),se=Math.max(L[0],Z[0],U[0],Y[0]),_e=Math.max(L[1],Z[1],U[1],Y[1]);this.ctx.fillRect(Q,ie,se-Q,_e-ie)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(a,e){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(a)&&6===a.length&&this.transform.apply(this,a),this.baseTransform=this.ctx.mozCurrentTransform,e)&&(this.ctx.rect(e[0],e[1],e[2]-e[0],e[3]-e[1]),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,e),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(a){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;a.isolated||(0,s.info)("TODO: Support non-isolated groups."),a.knockout&&(0,s.warn)("Knockout groups not supported.");const r=e.mozCurrentTransform;if(a.matrix&&e.transform.apply(e,a.matrix),!a.bbox)throw new Error("Bounding box is required.");let l=s.Util.getAxialAlignedBoundingBox(a.bbox,e.mozCurrentTransform);l=s.Util.intersect(l,[0,0,e.canvas.width,e.canvas.height])||[0,0,0,0];const g=Math.floor(l[0]),c=Math.floor(l[1]);let L=Math.max(Math.ceil(l[2])-g,1),Z=Math.max(Math.ceil(l[3])-c,1),U=1,Y=1;L>D&&(U=L/D,L=D),Z>D&&(Y=Z/D,Z=D),this.current.startNewPathAndClipBox([0,0,L,Z]);let Q="groupAt"+this.groupLevel;a.smask&&(Q+="_smask_"+this.smaskCounter++%2);const ie=this.cachedCanvases.getCanvas(Q,L,Z,!0),se=ie.context;se.scale(1/U,1/Y),se.translate(-g,-c),se.transform.apply(se,r),a.smask?this.smaskStack.push({canvas:ie.canvas,context:se,offsetX:g,offsetY:c,scaleX:U,scaleY:Y,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(g,c),e.scale(U,Y),e.save()),d(e,se),this.ctx=se,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(a){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,a.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const l=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,l);const p=s.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],l);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(p)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(a,e,r,l,p){if(this.save(),Array.isArray(e)&&4===e.length){const g=e[2]-e[0],c=e[3]-e[1];if(p&&this.annotationCanvasMap){(r=r.slice())[4]-=e[0],r[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=g,e[3]=c;const[L,Z]=s.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:U}=this,Y=Math.ceil(g*this.outputScaleX*U),Q=Math.ceil(c*this.outputScaleY*U);this.annotationCanvas=this.canvasFactory.create(Y,Q);const{canvas:ie,context:se}=this.annotationCanvas,_e=`var(--zoom-factor) * ${E.PixelsPerInch.PDF_TO_CSS_UNITS}`;ie.style.width=`calc(${g}px * ${_e})`,ie.style.height=`calc(${c}px * ${_e})`,this.annotationCanvasMap.set(a,ie),this.annotationCanvas.savedCtx=this.ctx,this.ctx=se,this.ctx.setTransform(L,0,0,-Z,0,c*Z),C(this.ctx),b(this.ctx,this.foregroundColor)}else b(this.ctx,this.foregroundColor),this.ctx.rect(e[0],e[1],g,c),this.ctx.clip(),this.endPath()}this.current=new i(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,r),this.transform.apply(this,l)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(a){if(!this.contentVisible)return;const e=a.count;(a=this.getObject(a.data,a)).count=e;const r=this.ctx,l=this.processingType3;if(l&&(void 0===l.compiled&&(l.compiled=function n(F){const{width:a,height:e}=F;if(a>1e3||e>1e3)return null;const l=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),p=a+1;let c,L,Z,g=new Uint8Array(p*(e+1));const U=a+7&-8;let Y=new Uint8Array(U*e),Q=0;for(const ue of F.data){let Me=128;for(;Me>0;)Y[Q++]=ue&Me?0:255,Me>>=1}let ie=0;for(Q=0,0!==Y[Q]&&(g[0]=1,++ie),L=1;L<a;L++)Y[Q]!==Y[Q+1]&&(g[L]=Y[Q]?2:1,++ie),Q++;for(0!==Y[Q]&&(g[L]=2,++ie),c=1;c<e;c++){Q=c*U,Z=c*p,Y[Q-U]!==Y[Q]&&(g[Z]=Y[Q]?1:8,++ie);let ue=(Y[Q]?4:0)+(Y[Q-U]?8:0);for(L=1;L<a;L++)ue=(ue>>2)+(Y[Q+1]?4:0)+(Y[Q-U+1]?8:0),l[ue]&&(g[Z+L]=l[ue],++ie),Q++;if(Y[Q-U]!==Y[Q]&&(g[Z+L]=Y[Q]?2:4,++ie),ie>1e3)return null}for(Q=U*(e-1),Z=c*p,0!==Y[Q]&&(g[Z]=8,++ie),L=1;L<a;L++)Y[Q]!==Y[Q+1]&&(g[Z+L]=Y[Q]?4:8,++ie),Q++;if(0!==Y[Q]&&(g[Z+L]=4,++ie),ie>1e3)return null;const se=new Int32Array([0,p,-1,0,-p,0,0,0,1]);let _e,Ae,xe;for(H.isNodeJS?Ae=[]:_e=new Path2D,c=0;ie&&c<=e;c++){let ue=c*p;const Me=ue+a;for(;ue<Me&&!g[ue];)ue++;if(ue===Me)continue;_e?_e.moveTo(ue%p,c):xe=[ue%p,c];const Te=ue;let ye=g[ue];do{const he=se[ye];do{ue+=he}while(!g[ue]);const me=g[ue];5!==me&&10!==me?(ye=me,g[ue]=0):(ye=me&51*ye>>4,g[ue]&=ye>>2|ye<<2),_e?_e.lineTo(ue%p,ue/p|0):xe.push(ue%p,ue/p|0),g[ue]||--ie}while(Te!==ue);_e||Ae.push(xe),--c}return Y=null,g=null,function(ue){if(ue.save(),ue.scale(1/a,-1/e),ue.translate(0,-e),_e)ue.fill(_e);else{ue.beginPath();for(const Me of Ae){ue.moveTo(Me[0],Me[1]);for(let Te=2,ye=Me.length;Te<ye;Te+=2)ue.lineTo(Me[Te],Me[Te+1])}ue.fill()}ue.beginPath(),ue.restore()}}(a)),l.compiled))return void l.compiled(r);const p=this._createMaskCanvas(a),g=p.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(g,p.offsetX,p.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(a,e,r=0,l=0,p,g){if(!this.contentVisible)return;a=this.getObject(a.data,a);const c=this.ctx;c.save();const L=c.mozCurrentTransform;c.transform(e,r,l,p,0,0);const Z=this._createMaskCanvas(a);c.setTransform(1,0,0,1,0,0);for(let U=0,Y=g.length;U<Y;U+=2){const Q=s.Util.transform(L,[e,r,l,p,g[U],g[U+1]]),[ie,se]=s.Util.applyTransform([0,0],Q);c.drawImage(Z.canvas,ie,se)}c.restore(),this.compose()}paintImageMaskXObjectGroup(a){if(!this.contentVisible)return;const e=this.ctx,r=this.current.fillColor,l=this.current.patternFill;for(let p=0,g=a.length;p<g;p++){const c=a[p],L=c.width,Z=c.height,U=this.cachedCanvases.getCanvas("maskCanvas",L,Z,!1),Y=U.context;Y.save(),m(Y,c),Y.globalCompositeOperation="source-in",Y.fillStyle=l?r.getPattern(Y,this,e.mozCurrentTransformInverse,O.PathType.FILL):r,Y.fillRect(0,0,L,Z),Y.restore(),e.save(),e.transform.apply(e,c.transform),e.scale(1,-1),P(e,U.canvas,0,0,L,Z,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(a){if(!this.contentVisible)return;const e=this.getObject(a);e?this.paintInlineImageXObject(e):(0,s.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(a,e,r,l){if(!this.contentVisible)return;const p=this.getObject(a);if(!p)return void(0,s.warn)("Dependent image isn't ready yet");const g=p.width,c=p.height,L=[];for(let Z=0,U=l.length;Z<U;Z+=2)L.push({transform:[e,0,0,r,l[Z],l[Z+1]],x:0,y:0,w:g,h:c});this.paintInlineImageXObjectGroup(p,L)}paintInlineImageXObject(a){if(!this.contentVisible)return;const e=a.width,r=a.height,l=this.ctx;let p;if(this.save(),l.scale(1/e,-1/r),"function"==typeof HTMLElement&&a instanceof HTMLElement||!a.data)p=a;else{const Z=this.cachedCanvases.getCanvas("inlineImage",e,r,!1);h(Z.context,a,this.current.transferMaps),p=Z.canvas}const g=this._scaleImage(p,l.mozCurrentTransformInverse);l.imageSmoothingEnabled=$(l.mozCurrentTransform,a.interpolate);const[c,L]=P(l,g.img,0,0,g.paintWidth,g.paintHeight,0,-r,e,r);if(this.imageLayer){const Z=this.getCanvasPosition(0,-r);this.imageLayer.appendImage({imgData:a,left:Z[0],top:Z[1],width:c,height:L})}this.compose(),this.restore()}paintInlineImageXObjectGroup(a,e){if(!this.contentVisible)return;const r=this.ctx,l=a.width,p=a.height,g=this.cachedCanvases.getCanvas("inlineImage",l,p,!1);h(g.context,a,this.current.transferMaps);for(let L=0,Z=e.length;L<Z;L++){const U=e[L];if(r.save(),r.transform.apply(r,U.transform),r.scale(1,-1),P(r,g.canvas,U.x,U.y,U.w,U.h,0,-1,1,1),this.imageLayer){const Y=this.getCanvasPosition(U.x,U.y);this.imageLayer.appendImage({imgData:a,left:Y[0],top:Y[1],width:l,height:p})}r.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(a){}markPointProps(a,e){}beginMarkedContent(a){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(a,e){this.markedContentStack.push("OC"===a?{visible:this.optionalContentConfig.isVisible(e)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(a){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(a);const r=this.ctx;this.pendingClip&&(e||(this.pendingClip===ge?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const a=this.ctx.mozCurrentTransform;if(0===a[1]&&0===a[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(a[0]),Math.abs(a[3]));else{const e=Math.abs(a[0]*a[3]-a[2]*a[1]),r=Math.hypot(a[0],a[2]),l=Math.hypot(a[1],a[3]);this._cachedGetSinglePixelWidth=Math.max(r,l)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:a}=this.current,e=this.ctx.mozCurrentTransform;let r,l;if(0===e[1]&&0===e[2]){const p=Math.abs(e[0]),g=Math.abs(e[3]);if(0===a)r=1/p,l=1/g;else{const c=p*a,L=g*a;r=c<1?1/c:1,l=L<1?1/L:1}}else{const p=Math.abs(e[0]*e[3]-e[2]*e[1]),g=Math.hypot(e[0],e[1]),c=Math.hypot(e[2],e[3]);if(0===a)r=c/p,l=g/p;else{const L=a*p;r=c>L?c/L:1,l=g>L?g/L:1}}this._cachedScaleForStroking=[r,l]}return this._cachedScaleForStroking}rescaleAndStroke(a){const{ctx:e}=this,{lineWidth:r}=this.current,[l,p]=this.getScaleForStroking();if(e.lineWidth=r||1,1===l&&1===p)return void e.stroke();let g,c,L;a&&(g=e.mozCurrentTransform.slice(),c=e.getLineDash().slice(),L=e.lineDashOffset),e.scale(l,p);const Z=Math.max(l,p);e.setLineDash(e.getLineDash().map(U=>U/Z)),e.lineDashOffset/=Z,e.stroke(),a&&(e.setTransform(...g),e.setLineDash(c),e.lineDashOffset=L)}getCanvasPosition(a,e){const r=this.ctx.mozCurrentTransform;return[r[0]*a+r[2]*e+r[4],r[1]*a+r[3]*e+r[5]]}isContentVisible(){for(let a=this.markedContentStack.length-1;a>=0;a--)if(!this.markedContentStack[a].visible)return!1;return!0}}o.CanvasGraphics=de;for(const F in s.OPS)void 0!==de.prototype[F]&&(de.prototype[s.OPS[F]]=de.prototype[F])},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TilingPattern=o.PathType=void 0,o.getShadingPattern=function N(t){switch(t[0]){case"RadialAxial":return new T(t);case"Mesh":return new W(t);case"Dummy":return new z}throw new Error(`Unknown IR type: ${t[0]}`)};var s=x(1),O=x(3);const R={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function H(t,A){if(!A||O.isNodeJS)return;const C=A[2]-A[0],y=A[3]-A[1],P=new Path2D;P.rect(A[0],A[1],C,y),t.clip(P)}o.PathType=R;class E{constructor(){this.constructor===E&&(0,s.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,s.unreachable)("Abstract method `getPattern` called.")}}class T extends E{constructor(A){super(),this._type=A[1],this._bbox=A[2],this._colorStops=A[3],this._p0=A[4],this._p1=A[5],this._r0=A[6],this._r1=A[7],this.matrix=null}_createGradient(A){let C;"axial"===this._type?C=A.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(C=A.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const y of this._colorStops)C.addColorStop(y[0],y[1]);return C}getPattern(A,C,y,P){let n;if(P===R.STROKE||P===R.FILL){const i=C.current.getClippedPathBoundingBox(P,A.mozCurrentTransform)||[0,0,0,0],h=Math.ceil(i[2]-i[0])||1,m=Math.ceil(i[3]-i[1])||1,d=C.cachedCanvases.getCanvas("pattern",h,m,!0),b=d.context;b.clearRect(0,0,b.canvas.width,b.canvas.height),b.beginPath(),b.rect(0,0,b.canvas.width,b.canvas.height),b.translate(-i[0],-i[1]),y=s.Util.transform(y,[1,0,0,1,i[0],i[1]]),b.transform.apply(b,C.baseTransform),this.matrix&&b.transform.apply(b,this.matrix),H(b,this._bbox),b.fillStyle=this._createGradient(b),b.fill(),n=A.createPattern(d.canvas,"no-repeat");const f=new DOMMatrix(y);try{n.setTransform(f)}catch(u){(0,s.warn)(`RadialAxialShadingPattern.getPattern: "${u?.message}".`)}}else H(A,this._bbox),n=this._createGradient(A);return n}}function v(t,A,C,y,P,n,i,h){const m=A.coords,d=A.colors,b=t.data,f=4*t.width;let u;m[C+1]>m[y+1]&&(u=C,C=y,y=u,u=n,n=i,i=u),m[y+1]>m[P+1]&&(u=y,y=P,P=u,u=i,i=h,h=u),m[C+1]>m[y+1]&&(u=C,C=y,y=u,u=n,n=i,i=u);const w=(m[C]+A.offsetX)*A.scaleX,k=(m[C+1]+A.offsetY)*A.scaleY,j=(m[y]+A.offsetX)*A.scaleX,$=(m[y+1]+A.offsetY)*A.scaleY,ee=(m[P]+A.offsetX)*A.scaleX,te=(m[P+1]+A.offsetY)*A.scaleY;if(k>=te)return;const ae=d[n],ge=d[n+1],de=d[n+2],F=d[i],a=d[i+1],e=d[i+2],r=d[h],l=d[h+1],p=d[h+2],g=Math.round(k),c=Math.round(te);let L,Z,U,Y,Q,ie,se,_e;for(let Ae=g;Ae<=c;Ae++){if(Ae<$){let Te;Te=Ae<k?0:(k-Ae)/(k-$),L=w-(w-j)*Te,Z=ae-(ae-F)*Te,U=ge-(ge-a)*Te,Y=de-(de-e)*Te}else{let Te;Te=Ae>te?1:$===te?0:($-Ae)/($-te),L=j-(j-ee)*Te,Z=F-(F-r)*Te,U=a-(a-l)*Te,Y=e-(e-p)*Te}let xe;xe=Ae<k?0:Ae>te?1:(k-Ae)/(k-te),Q=w-(w-ee)*xe,ie=ae-(ae-r)*xe,se=ge-(ge-l)*xe,_e=de-(de-p)*xe;const Se=Math.round(Math.min(L,Q)),ue=Math.round(Math.max(L,Q));let Me=f*Ae+4*Se;for(let Te=Se;Te<=ue;Te++)xe=(L-Te)/(L-Q),xe<0?xe=0:xe>1&&(xe=1),b[Me++]=Z-(Z-ie)*xe|0,b[Me++]=U-(U-se)*xe|0,b[Me++]=Y-(Y-_e)*xe|0,b[Me++]=255}}function D(t,A,C){const y=A.coords,P=A.colors;let n,i;switch(A.type){case"lattice":const h=A.verticesPerRow,m=Math.floor(y.length/h)-1,d=h-1;for(n=0;n<m;n++){let b=n*h;for(let f=0;f<d;f++,b++)v(t,C,y[b],y[b+1],y[b+h],P[b],P[b+1],P[b+h]),v(t,C,y[b+h+1],y[b+1],y[b+h],P[b+h+1],P[b+1],P[b+h])}break;case"triangles":for(n=0,i=y.length;n<i;n+=3)v(t,C,y[n],y[n+1],y[n+2],P[n],P[n+1],P[n+2]);break;default:throw new Error("illegal figure")}}class W extends E{constructor(A){super(),this._coords=A[2],this._colors=A[3],this._figures=A[4],this._bounds=A[5],this._bbox=A[7],this._background=A[8],this.matrix=null}_createMeshCanvas(A,C,y){const h=Math.floor(this._bounds[0]),m=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-h,b=Math.ceil(this._bounds[3])-m,f=Math.min(Math.ceil(Math.abs(d*A[0]*1.1)),3e3),u=Math.min(Math.ceil(Math.abs(b*A[1]*1.1)),3e3),w=d/f,k=b/u,j={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-m,scaleX:1/w,scaleY:1/k},te=y.getCanvas("mesh",f+4,u+4,!1),ae=te.context,ge=ae.createImageData(f,u);if(C){const F=ge.data;for(let a=0,e=F.length;a<e;a+=4)F[a]=C[0],F[a+1]=C[1],F[a+2]=C[2],F[a+3]=255}for(const F of this._figures)D(ge,F,j);return ae.putImageData(ge,2,2),{canvas:te.canvas,offsetX:h-2*w,offsetY:m-2*k,scaleX:w,scaleY:k}}getPattern(A,C,y,P){let n;if(H(A,this._bbox),P===R.SHADING)n=s.Util.singularValueDecompose2dScale(A.mozCurrentTransform);else if(n=s.Util.singularValueDecompose2dScale(C.baseTransform),this.matrix){const h=s.Util.singularValueDecompose2dScale(this.matrix);n=[n[0]*h[0],n[1]*h[1]]}const i=this._createMeshCanvas(n,P===R.SHADING?null:this._background,C.cachedCanvases);return P!==R.SHADING&&(A.setTransform.apply(A,C.baseTransform),this.matrix&&A.transform.apply(A,this.matrix)),A.translate(i.offsetX,i.offsetY),A.scale(i.scaleX,i.scaleY),A.createPattern(i.canvas,"no-repeat")}}class z extends E{getPattern(){return"hotpink"}}class _{static get MAX_PATTERN_SIZE(){return(0,s.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(A,C,y,P,n){this.operatorList=A[2],this.matrix=A[3]||[1,0,0,1,0,0],this.bbox=A[4],this.xstep=A[5],this.ystep=A[6],this.paintType=A[7],this.tilingType=A[8],this.color=C,this.ctx=y,this.canvasGraphicsFactory=P,this.baseTransform=n}createPatternCanvas(A){const C=this.operatorList,y=this.bbox,P=this.xstep,n=this.ystep,i=this.paintType,m=this.color,d=this.canvasGraphicsFactory;(0,s.info)("TilingType: "+this.tilingType);const b=y[0],f=y[1],u=y[2],w=y[3],k=s.Util.singularValueDecompose2dScale(this.matrix),j=s.Util.singularValueDecompose2dScale(this.baseTransform),$=[k[0]*j[0],k[1]*j[1]],ee=this.getSizeAndScale(P,this.ctx.canvas.width,$[0]),te=this.getSizeAndScale(n,this.ctx.canvas.height,$[1]),ae=A.cachedCanvases.getCanvas("pattern",ee.size,te.size,!0),ge=ae.context,de=d.createCanvasGraphics(ge);de.groupLevel=A.groupLevel,this.setFillAndStrokeStyleToContext(de,i,m);let F=b,a=f,e=u,r=w;return b<0&&(F=0,e+=Math.abs(b)),f<0&&(a=0,r+=Math.abs(f)),ge.translate(-ee.scale*F,-te.scale*a),de.transform(ee.scale,0,0,te.scale,0,0),ge.save(),this.clipBbox(de,F,a,e,r),de.baseTransform=de.ctx.mozCurrentTransform.slice(),de.executeOperatorList(C),de.endDrawing(),{canvas:ae.canvas,scaleX:ee.scale,scaleY:te.scale,offsetX:F,offsetY:a}}getSizeAndScale(A,C,y){A=Math.abs(A);const P=Math.max(_.MAX_PATTERN_SIZE,C);let n=Math.ceil(A*y);return n>=P?n=P:y=n/A,{scale:y,size:n}}clipBbox(A,C,y,P,n){A.ctx.rect(C,y,P-C,n-y),A.current.updateRectMinMax(A.ctx.mozCurrentTransform,[C,y,P,n]),A.clip(),A.endPath()}setFillAndStrokeStyleToContext(A,C,y){const P=A.ctx,n=A.current;switch(C){case 1:const i=this.ctx;P.fillStyle=i.fillStyle,P.strokeStyle=i.strokeStyle,n.fillColor=i.fillStyle,n.strokeColor=i.strokeStyle;break;case 2:const h=s.Util.makeHexColor(y[0],y[1],y[2]);P.fillStyle=h,P.strokeStyle=h,n.fillColor=h,n.strokeColor=h;break;default:throw new s.FormatError(`Unsupported paint type: ${C}`)}}getPattern(A,C,y,P){let n=y;P!==R.SHADING&&(n=s.Util.transform(n,C.baseTransform),this.matrix&&(n=s.Util.transform(n,this.matrix)));const i=this.createPatternCanvas(C);let h=new DOMMatrix(n);h=h.translate(i.offsetX,i.offsetY),h=h.scale(1/i.scaleX,1/i.scaleY);const m=A.createPattern(i.canvas,"repeat");try{m.setTransform(h)}catch(d){(0,s.warn)(`TilingPattern.getPattern: "${d?.message}".`)}return m}}o.TilingPattern=_},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.applyMaskImageData=function O({src:R,srcPos:H=0,dest:E,destPos:T=0,width:v,height:D,inverseDecode:W=!1}){const z=s.FeatureTest.isLittleEndian?4278190080:255,[N,B]=W?[0,z]:[z,0],_=v>>3,t=7&v,A=R.length;E=new Uint32Array(E.buffer);for(let C=0;C<D;C++){for(const P=H+_;H<P;H++){const n=H<A?R[H]:255;E[T++]=128&n?B:N,E[T++]=64&n?B:N,E[T++]=32&n?B:N,E[T++]=16&n?B:N,E[T++]=8&n?B:N,E[T++]=4&n?B:N,E[T++]=2&n?B:N,E[T++]=1&n?B:N}if(0===t)continue;const y=H<A?R[H++]:255;for(let P=0;P<t;P++)E[T++]=y&1<<7-P?B:N}return{srcPos:H,destPos:T}};var s=x(1)},(G,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GlobalWorkerOptions=void 0;const x=Object.create(null);o.GlobalWorkerOptions=x,x.workerPort=void 0===x.workerPort?null:x.workerPort,x.workerSrc=void 0===x.workerSrc?"":x.workerSrc},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MessageHandler=void 0;var s=x(1);function H(T){switch(T instanceof Error||"object"==typeof T&&null!==T||(0,s.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),T.name){case"AbortException":return new s.AbortException(T.message);case"MissingPDFException":return new s.MissingPDFException(T.message);case"PasswordException":return new s.PasswordException(T.message,T.code);case"UnexpectedResponseException":return new s.UnexpectedResponseException(T.message,T.status);case"UnknownErrorException":return new s.UnknownErrorException(T.message,T.details);default:return new s.UnknownErrorException(T.message,T.toString())}}o.MessageHandler=class E{constructor(v,D,W){this.sourceName=v,this.targetName=D,this.comObj=W,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=z=>{const N=z.data;if(N.targetName!==this.sourceName)return;if(N.stream)return void this._processStreamMessage(N);if(N.callback){const _=N.callbackId,t=this.callbackCapabilities[_];if(!t)throw new Error(`Cannot resolve callback ${_}`);if(delete this.callbackCapabilities[_],1===N.callback)t.resolve(N.data);else{if(2!==N.callback)throw new Error("Unexpected callback case");t.reject(H(N.reason))}return}const B=this.actionHandler[N.action];if(!B)throw new Error(`Unknown action from worker: ${N.action}`);if(N.callbackId){const _=this.sourceName,t=N.sourceName;new Promise(function(A){A(B(N.data))}).then(function(A){W.postMessage({sourceName:_,targetName:t,callback:1,callbackId:N.callbackId,data:A})},function(A){W.postMessage({sourceName:_,targetName:t,callback:2,callbackId:N.callbackId,reason:H(A)})})}else N.streamId?this._createStreamSink(N):B(N.data)},W.addEventListener("message",this._onComObjOnMessage)}on(v,D){const W=this.actionHandler;if(W[v])throw new Error(`There is already an actionName called "${v}"`);W[v]=D}send(v,D,W){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,data:D},W)}sendWithPromise(v,D,W){const z=this.callbackId++,N=(0,s.createPromiseCapability)();this.callbackCapabilities[z]=N;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,callbackId:z,data:D},W)}catch(B){N.reject(B)}return N.promise}sendWithStream(v,D,W,z){const N=this.streamId++,B=this.sourceName,_=this.targetName,t=this.comObj;return new ReadableStream({start:A=>{const C=(0,s.createPromiseCapability)();return this.streamControllers[N]={controller:A,startCall:C,pullCall:null,cancelCall:null,isClosed:!1},t.postMessage({sourceName:B,targetName:_,action:v,streamId:N,data:D,desiredSize:A.desiredSize},z),C.promise},pull:A=>{const C=(0,s.createPromiseCapability)();return this.streamControllers[N].pullCall=C,t.postMessage({sourceName:B,targetName:_,stream:6,streamId:N,desiredSize:A.desiredSize}),C.promise},cancel:A=>{(0,s.assert)(A instanceof Error,"cancel must have a valid reason");const C=(0,s.createPromiseCapability)();return this.streamControllers[N].cancelCall=C,this.streamControllers[N].isClosed=!0,t.postMessage({sourceName:B,targetName:_,stream:1,streamId:N,reason:H(A)}),C.promise}},W)}_createStreamSink(v){const D=v.streamId,W=this.sourceName,z=v.sourceName,N=this.comObj,B=this,_=this.actionHandler[v.action],t={enqueue(A,C=1,y){if(this.isCancelled)return;const P=this.desiredSize;this.desiredSize-=C,P>0&&this.desiredSize<=0&&(this.sinkCapability=(0,s.createPromiseCapability)(),this.ready=this.sinkCapability.promise),N.postMessage({sourceName:W,targetName:z,stream:4,streamId:D,chunk:A},y)},close(){this.isCancelled||(this.isCancelled=!0,N.postMessage({sourceName:W,targetName:z,stream:3,streamId:D}),delete B.streamSinks[D])},error(A){(0,s.assert)(A instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,N.postMessage({sourceName:W,targetName:z,stream:5,streamId:D,reason:H(A)}))},sinkCapability:(0,s.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:v.desiredSize,ready:null};t.sinkCapability.resolve(),t.ready=t.sinkCapability.promise,this.streamSinks[D]=t,new Promise(function(A){A(_(v.data,t))}).then(function(){N.postMessage({sourceName:W,targetName:z,stream:8,streamId:D,success:!0})},function(A){N.postMessage({sourceName:W,targetName:z,stream:8,streamId:D,reason:H(A)})})}_processStreamMessage(v){const D=v.streamId,W=this.sourceName,z=v.sourceName,N=this.comObj,B=this.streamControllers[D],_=this.streamSinks[D];switch(v.stream){case 8:v.success?B.startCall.resolve():B.startCall.reject(H(v.reason));break;case 7:v.success?B.pullCall.resolve():B.pullCall.reject(H(v.reason));break;case 6:if(!_){N.postMessage({sourceName:W,targetName:z,stream:7,streamId:D,success:!0});break}_.desiredSize<=0&&v.desiredSize>0&&_.sinkCapability.resolve(),_.desiredSize=v.desiredSize,new Promise(function(t){t(_.onPull&&_.onPull())}).then(function(){N.postMessage({sourceName:W,targetName:z,stream:7,streamId:D,success:!0})},function(t){N.postMessage({sourceName:W,targetName:z,stream:7,streamId:D,reason:H(t)})});break;case 4:if((0,s.assert)(B,"enqueue should have stream controller"),B.isClosed)break;B.controller.enqueue(v.chunk);break;case 3:if((0,s.assert)(B,"close should have stream controller"),B.isClosed)break;B.isClosed=!0,B.controller.close(),this._deleteStreamController(B,D);break;case 5:(0,s.assert)(B,"error should have stream controller"),B.controller.error(H(v.reason)),this._deleteStreamController(B,D);break;case 2:v.success?B.cancelCall.resolve():B.cancelCall.reject(H(v.reason)),this._deleteStreamController(B,D);break;case 1:if(!_)break;new Promise(function(t){t(_.onCancel&&_.onCancel(H(v.reason)))}).then(function(){N.postMessage({sourceName:W,targetName:z,stream:2,streamId:D,success:!0})},function(t){N.postMessage({sourceName:W,targetName:z,stream:2,streamId:D,reason:H(t)})}),_.sinkCapability.reject(H(v.reason)),_.isCancelled=!0,delete this.streamSinks[D];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(v,D){var W=this;return _asyncToGenerator(function*(){yield Promise.allSettled([v.startCall&&v.startCall.promise,v.pullCall&&v.pullCall.promise,v.cancelCall&&v.cancelCall.promise]),delete W.streamControllers[D]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Metadata=void 0;var s=x(1),O=new WeakMap,R=new WeakMap;o.Metadata=class H{constructor({parsedData:T,rawData:v}){_classPrivateFieldInitSpec(this,O,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,R,{writable:!0,value:void 0}),_classPrivateFieldSet(this,O,T),_classPrivateFieldSet(this,R,v)}getRaw(){return _classPrivateFieldGet(this,R)}get(T){return _classPrivateFieldGet(this,O).get(T)??null}getAll(){return(0,s.objectFromMap)(_classPrivateFieldGet(this,O))}has(T){return _classPrivateFieldGet(this,O).has(T)}}},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionalContentConfig=void 0;var s=x(1);class O{constructor(E,T){this.visible=!0,this.name=E,this.intent=T}}o.OptionalContentConfig=class R{constructor(E){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==E){this.name=E.name,this.creator=E.creator,this._order=E.order;for(const T of E.groups)this._groups.set(T.id,new O(T.name,T.intent));if("OFF"===E.baseState)for(const T of this._groups)T.visible=!1;for(const T of E.on)this._groups.get(T).visible=!0;for(const T of E.off)this._groups.get(T).visible=!1}}_evaluateVisibilityExpression(E){const T=E.length;if(T<2)return!0;const v=E[0];for(let D=1;D<T;D++){const W=E[D];let z;if(Array.isArray(W))z=this._evaluateVisibilityExpression(W);else{if(!this._groups.has(W))return(0,s.warn)(`Optional content group not found: ${W}`),!0;z=this._groups.get(W).visible}switch(v){case"And":if(!z)return!1;break;case"Or":if(z)return!0;break;case"Not":return!z;default:return!0}}return"And"===v}isVisible(E){if(0===this._groups.size)return!0;if(!E)return(0,s.warn)("Optional content group not defined."),!0;if("OCG"===E.type)return this._groups.has(E.id)?this._groups.get(E.id).visible:((0,s.warn)(`Optional content group not found: ${E.id}`),!0);if("OCMD"===E.type){if(E.expression)return this._evaluateVisibilityExpression(E.expression);if(!E.policy||"AnyOn"===E.policy){for(const T of E.ids){if(!this._groups.has(T))return(0,s.warn)(`Optional content group not found: ${T}`),!0;if(this._groups.get(T).visible)return!0}return!1}if("AllOn"===E.policy){for(const T of E.ids){if(!this._groups.has(T))return(0,s.warn)(`Optional content group not found: ${T}`),!0;if(!this._groups.get(T).visible)return!1}return!0}if("AnyOff"===E.policy){for(const T of E.ids){if(!this._groups.has(T))return(0,s.warn)(`Optional content group not found: ${T}`),!0;if(!this._groups.get(T).visible)return!0}return!1}if("AllOff"===E.policy){for(const T of E.ids){if(!this._groups.has(T))return(0,s.warn)(`Optional content group not found: ${T}`),!0;if(this._groups.get(T).visible)return!1}return!0}return(0,s.warn)(`Unknown optional content policy ${E.policy}.`),!0}return(0,s.warn)(`Unknown group type ${E.type}.`),!0}setVisibility(E,T=!0){this._groups.has(E)?this._groups.get(E).visible=!!T:(0,s.warn)(`Optional content group not found: ${E}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,s.objectFromMap)(this._groups):null}getGroup(E){return this._groups.get(E)||null}}},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFDataTransportStream=void 0;var s=x(1),O=x(5);o.PDFDataTransportStream=class R{constructor(v,D){(0,s.assert)(D,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=v.progressiveDone||!1,this._contentDispositionFilename=v.contentDispositionFilename||null;const W=v.initialData;if(W?.length>0){const z=new Uint8Array(W).buffer;this._queuedChunks.push(z)}this._pdfDataRangeTransport=D,this._isStreamingSupported=!v.disableStream,this._isRangeSupported=!v.disableRange,this._contentLength=v.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((z,N)=>{this._onReceiveData({begin:z,chunk:N})}),this._pdfDataRangeTransport.addProgressListener((z,N)=>{this._onProgress({loaded:z,total:N})}),this._pdfDataRangeTransport.addProgressiveReadListener(z=>{this._onReceiveData({chunk:z})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(v){const D=new Uint8Array(v.chunk).buffer;if(void 0===v.begin)this._fullRequestReader?this._fullRequestReader._enqueue(D):this._queuedChunks.push(D);else{const W=this._rangeReaders.some(function(z){return z._begin===v.begin&&(z._enqueue(D),!0)});(0,s.assert)(W,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(v){if(void 0===v.total){const D=this._rangeReaders[0];D?.onProgress&&D.onProgress({loaded:v.loaded})}else{const D=this._fullRequestReader;D?.onProgress&&D.onProgress({loaded:v.loaded,total:v.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(v){const D=this._rangeReaders.indexOf(v);D>=0&&this._rangeReaders.splice(D,1)}getFullReader(){(0,s.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const v=this._queuedChunks;return this._queuedChunks=null,new H(this,v,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(v,D){if(D<=this._progressiveDataLength)return null;const W=new E(this,v,D);return this._pdfDataRangeTransport.requestDataRange(v,D),this._rangeReaders.push(W),W}cancelAllRequests(v){this._fullRequestReader&&this._fullRequestReader.cancel(v);for(const D of this._rangeReaders.slice(0))D.cancel(v);this._pdfDataRangeTransport.abort()}};class H{constructor(v,D,W=!1,z=null){this._stream=v,this._done=W||!1,this._filename=(0,O.isPdfFile)(z)?z:null,this._queuedChunks=D||[],this._loaded=0;for(const N of this._queuedChunks)this._loaded+=N.byteLength;this._requests=[],this._headersReady=Promise.resolve(),v._fullRequestReader=this,this.onProgress=null}_enqueue(v){this._done||(this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunks.push(v),this._loaded+=v.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var v=this;return _asyncToGenerator(function*(){if(v._queuedChunks.length>0)return{value:v._queuedChunks.shift(),done:!1};if(v._done)return{value:void 0,done:!0};const D=(0,s.createPromiseCapability)();return v._requests.push(D),D.promise})()}cancel(v){this._done=!0;for(const D of this._requests)D.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class E{constructor(v,D,W){this._stream=v,this._begin=D,this._end=W,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(v){if(!this._done){if(0===this._requests.length)this._queuedChunk=v;else{this._requests.shift().resolve({value:v,done:!1});for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var v=this;return _asyncToGenerator(function*(){if(v._queuedChunk){const W=v._queuedChunk;return v._queuedChunk=null,{value:W,done:!1}}if(v._done)return{value:void 0,done:!0};const D=(0,s.createPromiseCapability)();return v._requests.push(D),D.promise})()}cancel(v){this._done=!0;for(const D of this._requests)D.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(G,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaText=void 0;class x{static textContent(O){const R=[],H={items:R,styles:Object.create(null)};return function E(T){if(!T)return;let v=null;const D=T.name;if("#text"===D)v=T.value;else{if(!x.shouldBuildText(D))return;T?.attributes?.textContent?v=T.attributes.textContent:T.value&&(v=T.value)}if(null!==v&&R.push({str:v}),T.children)for(const W of T.children)E(W)}(O),H}static shouldBuildText(O){return!("textarea"===O||"input"===O||"option"===O||"select"===O)}}o.XfaText=x},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.NodeStandardFontDataFactory=o.NodeCanvasFactory=o.NodeCMapReaderFactory=void 0;var s=x(6);const O=function(T){return new Promise((v,D)=>{__webpack_require__(172).readFile(T,(z,N)=>{!z&&N?v(new Uint8Array(N)):D(new Error(z))})})};o.NodeCanvasFactory=class R extends s.BaseCanvasFactory{_createCanvas(v,D){return __webpack_require__(3414).createCanvas(v,D)}},o.NodeCMapReaderFactory=class H extends s.BaseCMapReaderFactory{_fetchData(v,D){return O(v).then(W=>({cMapData:W,compressionType:D}))}},o.NodeStandardFontDataFactory=class E extends s.BaseStandardFontDataFactory{_fetchData(v){return O(v)}}},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationLayer=void 0;var s=x(1),O=x(5),R=x(8),H=x(21),E=x(22);const T=1e3,v=new WeakSet;function D(a){return{width:a[2]-a[0],height:a[3]-a[1]}}class W{static create(e){switch(e.data.annotationType){case s.AnnotationType.LINK:return new N(e);case s.AnnotationType.TEXT:return new B(e);case s.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new t(e);case"Btn":return e.data.radioButton?new C(e):e.data.checkBox?new A(e):new y(e);case"Ch":return new P(e)}return new _(e);case s.AnnotationType.POPUP:return new n(e);case s.AnnotationType.FREETEXT:return new h(e);case s.AnnotationType.LINE:return new m(e);case s.AnnotationType.SQUARE:return new d(e);case s.AnnotationType.CIRCLE:return new b(e);case s.AnnotationType.POLYLINE:return new f(e);case s.AnnotationType.CARET:return new w(e);case s.AnnotationType.INK:return new k(e);case s.AnnotationType.POLYGON:return new u(e);case s.AnnotationType.HIGHLIGHT:return new j(e);case s.AnnotationType.UNDERLINE:return new $(e);case s.AnnotationType.SQUIGGLY:return new ee(e);case s.AnnotationType.STRIKEOUT:return new te(e);case s.AnnotationType.STAMP:return new ae(e);case s.AnnotationType.FILEATTACHMENT:return new ge(e);default:return new z(e)}}}class z{constructor(e,{isRenderable:r=!1,ignoreBorder:l=!1,createQuadrilaterals:p=!1}={}){this.isRenderable=r,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this._mouseState=e.mouseState,r&&(this.container=this._createContainer(l)),p&&(this.quadrilaterals=this._createQuadrilaterals(l))}_createContainer(e=!1){const r=this.data,l=this.page,p=this.viewport,g=document.createElement("section");let{width:c,height:L}=D(r.rect);g.setAttribute("data-annotation-id",r.id);const Z=s.Util.normalizeRect([r.rect[0],l.view[3]-r.rect[1]+l.view[1],r.rect[2],l.view[3]-r.rect[3]+l.view[1]]);if(r.hasOwnCanvas){const U=p.transform.slice(),[Y,Q]=s.Util.singularValueDecompose2dScale(U);c=Math.ceil(c*Y),L=Math.ceil(L*Q),Z[0]*=Y,Z[1]*=Q;for(let ie=0;ie<4;ie++)U[ie]=Math.sign(U[ie]);g.style.transform=`matrix(${U.join(",")})`}else g.style.transform=`matrix(${p.transform.join(",")})`;if(g.style.transformOrigin=`${-Z[0]}px ${-Z[1]}px`,!e&&r.borderStyle.width>0){g.style.borderWidth=`${r.borderStyle.width}px`,r.borderStyle.style!==s.AnnotationBorderStyleType.UNDERLINE&&(c-=2*r.borderStyle.width,L-=2*r.borderStyle.width);const U=r.borderStyle.horizontalCornerRadius,Y=r.borderStyle.verticalCornerRadius;switch((U>0||Y>0)&&(g.style.borderRadius=`${U}px / ${Y}px`),r.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:g.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:g.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:g.style.borderBottomStyle="solid"}r.borderColor||r.color?g.style.borderColor=s.Util.makeHexColor(0|r.color[0],0|r.color[1],0|r.color[2]):g.style.borderWidth=0}return g.style.left=`${Z[0]}px`,g.style.top=`${Z[1]}px`,r.hasOwnCanvas?g.style.width=g.style.height="auto":(g.style.width=`${c}px`,g.style.height=`${L}px`),g}get _commonActions(){const e=(r,l,p)=>{const g=p.detail[r];p.target.style[l]=H.ColorConverters[`${g[0]}_HTML`](g.slice(1))};return(0,s.shadow)(this,"_commonActions",{display:r=>{const l=r.detail.display%2==1;r.target.style.visibility=l?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:l,print:0===r.detail.display||3===r.detail.display})},print:r=>{this.annotationStorage.setValue(this.data.id,{print:r.detail.print})},hidden:r=>{r.target.style.visibility=r.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:r.detail.hidden})},focus:r=>{setTimeout(()=>r.target.focus({preventScroll:!1}),0)},userName:r=>{r.target.title=r.detail.userName},readonly:r=>{r.detail.readonly?r.target.setAttribute("readonly",""):r.target.removeAttribute("readonly")},required:r=>{r.detail.required?r.target.setAttribute("required",""):r.target.removeAttribute("required")},bgColor:r=>{e("bgColor","backgroundColor",r)},fillColor:r=>{e("fillColor","backgroundColor",r)},fgColor:r=>{e("fgColor","color",r)},textColor:r=>{e("textColor","color",r)},borderColor:r=>{e("borderColor","borderColor",r)},strokeColor:r=>{e("strokeColor","borderColor",r)}})}_dispatchEventFromSandbox(e,r){const l=this._commonActions;for(const p of Object.keys(r.detail)){const g=e[p]||l[p];g&&g(r)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const r=this.annotationStorage.getRawValue(this.data.id);if(!r)return;const l=this._commonActions;for(const[p,g]of Object.entries(r)){const c=l[p];c&&(c({detail:g,target:e}),delete r[p])}}_createQuadrilaterals(e=!1){if(!this.data.quadPoints)return null;const r=[],l=this.data.rect;for(const p of this.data.quadPoints)this.data.rect=[p[2].x,p[2].y,p[1].x,p[1].y],r.push(this._createContainer(e));return this.data.rect=l,r}_createPopup(e,r){let l=this.container;this.quadrilaterals&&(e=e||this.quadrilaterals,l=this.quadrilaterals[0]),e||((e=document.createElement("div")).style.height=l.style.height,e.style.width=l.style.width,l.appendChild(e));const g=new i({container:l,trigger:e,color:r.color,titleObj:r.titleObj,modificationDate:r.modificationDate,contentsObj:r.contentsObj,richText:r.richText,hideWrapper:!0}).render();g.style.left=l.style.width,l.appendChild(g)}_renderQuadrilaterals(e){for(const r of this.quadrilaterals)r.className=e;return this.quadrilaterals}render(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,r=null){const l=[];if(this._fieldObjects){const p=this._fieldObjects[e];if(p)for(const{page:g,id:c,exportValues:L}of p){if(-1===g||c===r)continue;const Z="string"==typeof L?L:null,U=document.getElementById(c);!U||v.has(U)?l.push({id:c,exportValue:Z,domElement:U}):(0,s.warn)(`_getElementsByName - element not allowed: ${c}`)}return l}for(const p of document.getElementsByName(e)){const{id:g,exportValue:c}=p;g!==r&&v.has(p)&&l.push({id:g,exportValue:c,domElement:p})}return l}static get platform(){const e=typeof navigator<"u"?navigator.platform:"";return(0,s.shadow)(this,"platform",{isWin:e.includes("Win"),isMac:e.includes("Mac")})}}class N extends z{constructor(e,r=null){super(e,{isRenderable:!!(e.data.url||e.data.dest||e.data.action||e.data.isTooltipOnly||e.data.resetForm||e.data.actions&&(e.data.actions.Action||e.data.actions["Mouse Up"]||e.data.actions["Mouse Down"])),ignoreBorder:!!r?.ignoreBorder,createQuadrilaterals:!0})}render(){const{data:e,linkService:r}=this,l=document.createElement("a");if(e.url)r.addLinkAttributes(l,e.url,e.newWindow);else if(e.action)this._bindNamedAction(l,e.action);else if(e.dest)this._bindLink(l,e.dest);else{let p=!1;e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(p=!0,this._bindJSAction(l,e)),e.resetForm?this._bindResetFormAction(l,e.resetForm):p||this._bindLink(l,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((p,g)=>{const c=0===g?l:l.cloneNode();return p.appendChild(c),p}):(this.container.className="linkAnnotation",this.container.appendChild(l),this.container)}_bindLink(e,r){e.href=this.linkService.getDestinationHash(r),e.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||""===r)&&(e.className="internalLink")}_bindNamedAction(e,r){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(r),!1),e.className="internalLink"}_bindJSAction(e,r){e.href=this.linkService.getAnchorUrl("");const l=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const p of Object.keys(r.actions)){const g=l.get(p);g&&(e[g]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:p}}),!1))}e.onclick||(e.onclick=()=>!1),e.className="internalLink"}_bindResetFormAction(e,r){const l=e.onclick;if(l||(e.href=this.linkService.getAnchorUrl("")),e.className="internalLink",!this._fieldObjects)return(0,s.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(l||(e.onclick=()=>!1));e.onclick=()=>{l&&l();const{fields:p,refs:g,include:c}=r,L=[];if(0!==p.length||0!==g.length){const Y=new Set(g);for(const Q of p){const ie=this._fieldObjects[Q]||[];for(const{id:se}of ie)Y.add(se)}for(const Q of Object.values(this._fieldObjects))for(const ie of Q)Y.has(ie.id)===c&&L.push(ie)}else for(const Y of Object.values(this._fieldObjects))L.push(...Y);const Z=this.annotationStorage,U=[];for(const Y of L){const{id:Q}=Y;switch(U.push(Q),Y.type){case"text":case"combobox":case"listbox":Z.setValue(Q,{value:Y.defaultValue||""});break;case"checkbox":case"radiobutton":Z.setValue(Q,{value:Y.defaultValue===Y.exportValues});break;default:continue}const ie=document.getElementById(Q);!ie||!v.has(ie)||ie.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:U,name:"ResetForm"}}),!1}}}class B extends z{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str)})}render(){this.container.className="textAnnotation";const e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(e,this.data),this.container.appendChild(e),this.container}}class _ extends z{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(e){const{isWin:r,isMac:l}=z.platform;return r&&e.ctrlKey||l&&e.metaKey}_setEventListener(e,r,l,p){r.includes("mouse")?e.addEventListener(r,g=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:l,value:p(g),shift:g.shiftKey,modifier:this._getKeyModifier(g)}})}):e.addEventListener(r,g=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:l,value:p(g)}})})}_setEventListeners(e,r,l){for(const[p,g]of r)("Action"===g||this.data.actions?.[g])&&this._setEventListener(e,p,g,l)}_setBackgroundColor(e){const r=this.data.backgroundColor||null;e.style.backgroundColor=null===r?"transparent":s.Util.makeHexColor(r[0],r[1],r[2])}}class t extends _{constructor(e){super(e,{isRenderable:e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,r,l,p){const g=this.annotationStorage;for(const c of this._getElementsByName(e.name,e.id))c.domElement&&(c.domElement[r]=l),g.setValue(c.id,{[p]:l})}render(){const e=this.annotationStorage,r=this.data.id;this.container.className="textWidgetAnnotation";let l=null;if(this.renderForms){const p=e.getValue(r,{value:this.data.fieldValue}),g=p.formattedValue||p.value||"",c={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(l=document.createElement("textarea"),l.textContent=g):(l=document.createElement("input"),l.type="text",l.setAttribute("value",g)),v.add(l),l.disabled=this.data.readOnly,l.name=this.data.fieldName,l.tabIndex=T,c.userValue=g,l.setAttribute("id",r),l.addEventListener("input",Z=>{e.setValue(r,{value:Z.target.value}),this.setPropertyOnSiblings(l,"value",Z.target.value,"value")}),l.addEventListener("resetform",Z=>{l.value=c.userValue=this.data.defaultFieldValue??"",c.formattedValue=null});let L=Z=>{const{formattedValue:U}=c;null!=U&&(Z.target.value=U),Z.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){l.addEventListener("focus",U=>{c.userValue&&(U.target.value=c.userValue),c.valueOnFocus=U.target.value}),l.addEventListener("updatefromsandbox",U=>{this._dispatchEventFromSandbox({value(Q){c.userValue=Q.detail.value??"",e.setValue(r,{value:c.userValue.toString()}),Q.target.value=c.userValue},formattedValue(Q){const{formattedValue:ie}=Q.detail;c.formattedValue=ie,null!=ie&&Q.target!==document.activeElement&&(Q.target.value=ie),e.setValue(r,{formattedValue:ie})},selRange(Q){Q.target.setSelectionRange(...Q.detail.selRange)}},U)}),l.addEventListener("keydown",U=>{let Y=-1;if("Escape"===U.key?Y=0:"Enter"===U.key?Y=2:"Tab"===U.key&&(Y=3),-1===Y)return;const{value:Q}=U.target;c.valueOnFocus!==Q&&(c.userValue=Q,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:Q,willCommit:!0,commitKey:Y,selStart:U.target.selectionStart,selEnd:U.target.selectionEnd}}))});const Z=L;L=null,l.addEventListener("blur",U=>{const{value:Y}=U.target;c.userValue=Y,this._mouseState.isDown&&c.valueOnFocus!==Y&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:Y,willCommit:!0,commitKey:1,selStart:U.target.selectionStart,selEnd:U.target.selectionEnd}}),Z(U)}),this.data.actions?.Keystroke&&l.addEventListener("beforeinput",U=>{const{data:Y,target:Q}=U,{value:ie,selectionStart:se,selectionEnd:_e}=Q;let Ae=se,xe=_e;switch(U.inputType){case"deleteWordBackward":{const Se=ie.substring(0,se).match(/\w*[^\w]*$/);Se&&(Ae-=Se[0].length);break}case"deleteWordForward":{const Se=ie.substring(se).match(/^[^\w]*\w*/);Se&&(xe+=Se[0].length);break}case"deleteContentBackward":se===_e&&(Ae-=1);break;case"deleteContentForward":se===_e&&(xe+=1)}U.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:ie,change:Y||"",willCommit:!1,selStart:Ae,selEnd:xe}})}),this._setEventListeners(l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],U=>U.target.value)}if(L&&l.addEventListener("blur",L),null!==this.data.maxLen&&(l.maxLength=this.data.maxLen),this.data.comb){const U=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;l.classList.add("comb"),l.style.letterSpacing=`calc(${U}px - 1ch)`}}else l=document.createElement("div"),l.textContent=this.data.fieldValue,l.style.verticalAlign="middle",l.style.display="table-cell";return this._setTextStyle(l),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.appendChild(l),this.container}_setTextStyle(e){const{fontSize:l,fontColor:p}=this.data.defaultAppearanceData,g=e.style;l&&(g.fontSize=`${l}px`),g.color=s.Util.makeHexColor(p[0],p[1],p[2]),null!==this.data.textAlignment&&(g.textAlign=["left","center","right"][this.data.textAlignment])}}class A extends _{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,r=this.data,l=r.id;let p=e.getValue(l,{value:r.exportValue===r.fieldValue}).value;"string"==typeof p&&(p="Off"!==p,e.setValue(l,{value:p})),this.container.className="buttonWidgetAnnotation checkBox";const g=document.createElement("input");return v.add(g),g.disabled=r.readOnly,g.type="checkbox",g.name=r.fieldName,p&&g.setAttribute("checked",!0),g.setAttribute("id",l),g.setAttribute("exportValue",r.exportValue),g.tabIndex=T,g.addEventListener("change",c=>{const{name:L,checked:Z}=c.target;for(const U of this._getElementsByName(L,l)){const Y=Z&&U.exportValue===r.exportValue;U.domElement&&(U.domElement.checked=Y),e.setValue(U.id,{value:Y})}e.setValue(l,{value:Z})}),g.addEventListener("resetform",c=>{c.target.checked=(r.defaultFieldValue||"Off")===r.exportValue}),this.enableScripting&&this.hasJSActions&&(g.addEventListener("updatefromsandbox",c=>{this._dispatchEventFromSandbox({value(Z){Z.target.checked="Off"!==Z.detail.value,e.setValue(l,{value:Z.target.checked})}},c)}),this._setEventListeners(g,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(g),this._setDefaultPropertiesFromJS(g),this.container.appendChild(g),this.container}}class C extends _{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const e=this.annotationStorage,r=this.data,l=r.id;let p=e.getValue(l,{value:r.fieldValue===r.buttonValue}).value;"string"==typeof p&&(p=p!==r.buttonValue,e.setValue(l,{value:p}));const g=document.createElement("input");if(v.add(g),g.disabled=r.readOnly,g.type="radio",g.name=r.fieldName,p&&g.setAttribute("checked",!0),g.setAttribute("id",l),g.tabIndex=T,g.addEventListener("change",c=>{const{name:L,checked:Z}=c.target;for(const U of this._getElementsByName(L,l))e.setValue(U.id,{value:!1});e.setValue(l,{value:Z})}),g.addEventListener("resetform",c=>{const L=r.defaultFieldValue;c.target.checked=null!=L&&L===r.buttonValue}),this.enableScripting&&this.hasJSActions){const c=r.buttonValue;g.addEventListener("updatefromsandbox",L=>{this._dispatchEventFromSandbox({value:U=>{const Y=c===U.detail.value;for(const Q of this._getElementsByName(U.target.name)){const ie=Y&&Q.id===l;Q.domElement&&(Q.domElement.checked=ie),e.setValue(Q.id,{value:ie})}}},L)}),this._setEventListeners(g,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],L=>L.target.checked)}return this._setBackgroundColor(g),this._setDefaultPropertiesFromJS(g),this.container.appendChild(g),this.container}}class y extends N{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();return e.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(e.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(e),e}}class P extends _{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const e=this.annotationStorage,r=this.data.id,l=e.getValue(r,{value:this.data.fieldValue});let{fontSize:p}=this.data.defaultAppearanceData;p||(p=9);const g=`calc(${p}px * var(--zoom-factor))`,c=document.createElement("select");v.add(c),c.disabled=this.data.readOnly,c.name=this.data.fieldName,c.setAttribute("id",r),c.tabIndex=T,c.style.fontSize=`${p}px`,this.data.combo||(c.size=this.data.options.length,this.data.multiSelect&&(c.multiple=!0)),c.addEventListener("resetform",U=>{const Y=this.data.defaultFieldValue;for(const Q of c.options)Q.selected=Q.value===Y});for(const U of this.data.options){const Y=document.createElement("option");Y.textContent=U.displayValue,Y.value=U.exportValue,this.data.combo&&(Y.style.fontSize=g),l.value.includes(U.exportValue)&&Y.setAttribute("selected",!0),c.appendChild(Y)}const L=(U,Y)=>{const Q=Y?"value":"textContent",ie=U.target.options;return U.target.multiple?Array.prototype.filter.call(ie,se=>se.selected).map(se=>se[Q]):-1===ie.selectedIndex?null:ie[ie.selectedIndex][Q]},Z=U=>Array.prototype.map.call(U.target.options,Q=>({displayValue:Q.textContent,exportValue:Q.value}));return this.enableScripting&&this.hasJSActions?(c.addEventListener("updatefromsandbox",U=>{this._dispatchEventFromSandbox({value(Q){const ie=Q.detail.value,se=new Set(Array.isArray(ie)?ie:[ie]);for(const _e of c.options)_e.selected=se.has(_e.value);e.setValue(r,{value:L(Q,!0)})},multipleSelection(Q){c.multiple=!0},remove(Q){const ie=c.options,se=Q.detail.remove;ie[se].selected=!1,c.remove(se),ie.length>0&&-1===Array.prototype.findIndex.call(ie,Ae=>Ae.selected)&&(ie[0].selected=!0),e.setValue(r,{value:L(Q,!0),items:Z(Q)})},clear(Q){for(;0!==c.length;)c.remove(0);e.setValue(r,{value:null,items:[]})},insert(Q){const{index:ie,displayValue:se,exportValue:_e}=Q.detail.insert,Ae=document.createElement("option");Ae.textContent=se,Ae.value=_e,c.insertBefore(Ae,c.children[ie]),e.setValue(r,{value:L(Q,!0),items:Z(Q)})},items(Q){const{items:ie}=Q.detail;for(;0!==c.length;)c.remove(0);for(const se of ie){const{displayValue:_e,exportValue:Ae}=se,xe=document.createElement("option");xe.textContent=_e,xe.value=Ae,c.appendChild(xe)}c.options.length>0&&(c.options[0].selected=!0),e.setValue(r,{value:L(Q,!0),items:Z(Q)})},indices(Q){const ie=new Set(Q.detail.indices);for(const se of Q.target.options)se.selected=ie.has(se.index);e.setValue(r,{value:L(Q,!0)})},editable(Q){Q.target.disabled=!Q.detail.editable}},U)}),c.addEventListener("input",U=>{const Y=L(U,!0),Q=L(U,!1);e.setValue(r,{value:Y}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:Q,changeEx:Y,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],U=>U.target.checked)):c.addEventListener("input",function(U){e.setValue(r,{value:L(U,!0)})}),this._setBackgroundColor(c),this._setDefaultPropertiesFromJS(c),this.container.appendChild(c),this.container}}class n extends z{constructor(e){super(e,{isRenderable:!!(e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const l=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===l.length)return this.container;const p=new i({container:this.container,trigger:Array.from(l),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),g=this.page,c=s.Util.normalizeRect([this.data.parentRect[0],g.view[3]-this.data.parentRect[1]+g.view[1],this.data.parentRect[2],g.view[3]-this.data.parentRect[3]+g.view[1]]),L=c[0]+this.data.parentRect[2]-this.data.parentRect[0],Z=c[1];return this.container.style.transformOrigin=`${-L}px ${-Z}px`,this.container.style.left=`${L}px`,this.container.style.top=`${Z}px`,this.container.appendChild(p.render()),this.container}}class i{constructor(e){this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.titleObj=e.titleObj,this.modificationDate=e.modificationDate,this.contentsObj=e.contentsObj,this.richText=e.richText,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}render(){const r=document.createElement("div");r.className="popupWrapper",this.hideElement=this.hideWrapper?r:this.container,this.hideElement.hidden=!0;const l=document.createElement("div");l.className="popup";const p=this.color;p&&(l.style.backgroundColor=s.Util.makeHexColor(0|.7*(255-p[0])+p[0],0|.7*(255-p[1])+p[1],0|.7*(255-p[2])+p[2]));const g=document.createElement("h1");g.dir=this.titleObj.dir,g.textContent=this.titleObj.str,l.appendChild(g);const c=O.PDFDateString.toDateObject(this.modificationDate);if(c){const L=document.createElement("span");L.className="popupDate",L.textContent="{{date}}, {{time}}",L.dataset.l10nId="annotation_date_string",L.dataset.l10nArgs=JSON.stringify({date:c.toLocaleDateString(),time:c.toLocaleTimeString()}),l.appendChild(L)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const L=this._formatContents(this.contentsObj);l.appendChild(L)}else E.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:l}),l.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const L of this.trigger)L.addEventListener("click",this._toggle.bind(this)),L.addEventListener("mouseover",this._show.bind(this,!1)),L.addEventListener("mouseout",this._hide.bind(this,!1));return l.addEventListener("click",this._hide.bind(this,!0)),r.appendChild(l),r}_formatContents({str:e,dir:r}){const l=document.createElement("p");l.className="popupContent",l.dir=r;const p=e.split(/(?:\r\n?|\n)/);for(let g=0,c=p.length;g<c;++g)l.appendChild(document.createTextNode(p[g])),g<c-1&&l.appendChild(document.createElement("br"));return l}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(e=!1){e&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(e=!0){e&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class h extends z{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class m extends z{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const e=this.data,{width:r,height:l}=D(e.rect),p=this.svgFactory.create(r,l),g=this.svgFactory.createElement("svg:line");return g.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),g.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),g.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),g.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),g.setAttribute("stroke-width",e.borderStyle.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),p.appendChild(g),this.container.append(p),this._createPopup(g,e),this.container}}class d extends z{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const e=this.data,{width:r,height:l}=D(e.rect),p=this.svgFactory.create(r,l),g=e.borderStyle.width,c=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",g/2),c.setAttribute("y",g/2),c.setAttribute("width",r-g),c.setAttribute("height",l-g),c.setAttribute("stroke-width",g||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),p.appendChild(c),this.container.append(p),this._createPopup(c,e),this.container}}class b extends z{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const e=this.data,{width:r,height:l}=D(e.rect),p=this.svgFactory.create(r,l),g=e.borderStyle.width,c=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",r/2),c.setAttribute("cy",l/2),c.setAttribute("rx",r/2-g/2),c.setAttribute("ry",l/2-g/2),c.setAttribute("stroke-width",g||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),p.appendChild(c),this.container.append(p),this._createPopup(c,e),this.container}}class f extends z{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:r,height:l}=D(e.rect),p=this.svgFactory.create(r,l);let g=[];for(const L of e.vertices)g.push(L.x-e.rect[0]+","+(e.rect[3]-L.y));g=g.join(" ");const c=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",g),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),p.appendChild(c),this.container.append(p),this._createPopup(c,e),this.container}}class u extends f{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class w extends z{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class k extends z{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:r,height:l}=D(e.rect),p=this.svgFactory.create(r,l);for(const g of e.inkLists){let c=[];for(const Z of g)c.push(`${Z.x-e.rect[0]},${e.rect[3]-Z.y}`);c=c.join(" ");const L=this.svgFactory.createElement(this.svgElementName);L.setAttribute("points",c),L.setAttribute("stroke-width",e.borderStyle.width||1),L.setAttribute("stroke","transparent"),L.setAttribute("fill","transparent"),this._createPopup(L,e),p.appendChild(L)}return this.container.append(p),this.container}}class j extends z{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class $ extends z{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class ee extends z{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class te extends z{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class ae extends z{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ge extends z{constructor(e){super(e,{isRenderable:!0});const{filename:r,content:l}=this.data.file;this.filename=(0,O.getFilenameFromUrl)(r),this.content=l,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:r,content:l})}render(){this.container.className="fileAttachmentAnnotation";const e=document.createElement("div");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(e,this.data),this.container.appendChild(e),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class de{static render(e){const r=[],l=[];for(const g of e.annotations){if(!g)continue;const{width:c,height:L}=D(g.rect);if(!(c<=0||L<=0)){if(g.annotationType===s.AnnotationType.POPUP){l.push(g);continue}r.push(g)}}l.length&&r.push(...l);const p=e.div;for(const g of r){const c=W.create({data:g,layer:p,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new O.DOMSVGFactory,annotationStorage:e.annotationStorage||new R.AnnotationStorage,enableScripting:e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,mouseState:e.mouseState||{isDown:!1}});if(c.isRenderable){const L=c.render();if(g.hidden&&(L.style.visibility="hidden"),Array.isArray(L))for(const Z of L)p.appendChild(Z);else c instanceof n?p.prepend(L):p.appendChild(L)}}_classStaticPrivateMethodGet(this,de,F).call(this,p,e.annotationCanvasMap)}static update(e){const{page:r,viewport:l,annotations:p,annotationCanvasMap:g,div:c}=e,L=l.transform,Z=`matrix(${L.join(",")})`;let U,Y;for(const Q of p){const ie=c.querySelectorAll(`[data-annotation-id="${Q.id}"]`);if(ie)for(const se of ie)if(Q.hasOwnCanvas){const _e=s.Util.normalizeRect([Q.rect[0],r.view[3]-Q.rect[1]+r.view[1],Q.rect[2],r.view[3]-Q.rect[3]+r.view[1]]);if(!Y){U=Math.abs(L[0]||L[1]);const Se=L.slice();for(let ue=0;ue<4;ue++)Se[ue]=Math.sign(Se[ue]);Y=`matrix(${Se.join(",")})`}const Ae=_e[0]*U,xe=_e[1]*U;se.style.left=`${Ae}px`,se.style.top=`${xe}px`,se.style.transformOrigin=`${-Ae}px ${-xe}px`,se.style.transform=Y}else se.style.transform=Z}_classStaticPrivateMethodGet(this,de,F).call(this,c,g),c.hidden=!1}}function F(a,e){if(e){for(const[r,l]of e){const p=a.querySelector(`[data-annotation-id="${r}"]`);if(!p)continue;const{firstChild:g}=p;"CANVAS"===g.nodeName?p.replaceChild(l,g):p.insertBefore(l,g)}e.clear()}}o.AnnotationLayer=de},(G,o)=>{function x(O){return Math.floor(255*Math.max(0,Math.min(1,O))).toString(16).padStart(2,"0")}Object.defineProperty(o,"__esModule",{value:!0}),o.ColorConverters=void 0,o.ColorConverters=class s{static CMYK_G([R,H,E,T]){return["G",1-Math.min(1,.3*R+.59*E+.11*H+T)]}static G_CMYK([R]){return["CMYK",0,0,0,1-R]}static G_RGB([R]){return["RGB",R,R,R]}static G_HTML([R]){const H=x(R);return`#${H}${H}${H}`}static RGB_G([R,H,E]){return["G",.3*R+.59*H+.11*E]}static RGB_HTML([R,H,E]){return`#${x(R)}${x(H)}${x(E)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([R,H,E,T]){return["RGB",1-Math.min(1,R+T),1-Math.min(1,E+T),1-Math.min(1,H+T)]}static CMYK_HTML(R){return this.RGB_HTML(this.CMYK_RGB(R))}static RGB_CMYK([R,H,E]){const T=1-R,v=1-H,D=1-E;return["CMYK",T,v,D,Math.min(T,v,D)]}}},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaLayer=void 0;var s=x(18);o.XfaLayer=class O{static setupStorage(H,E,T,v,D){const W=v.getValue(E,{value:null});switch(T.name){case"textarea":if(null!==W.value&&(H.textContent=W.value),"print"===D)break;H.addEventListener("input",z=>{v.setValue(E,{value:z.target.value})});break;case"input":if("radio"===T.attributes.type||"checkbox"===T.attributes.type){if(W.value===T.attributes.xfaOn?H.setAttribute("checked",!0):W.value===T.attributes.xfaOff&&H.removeAttribute("checked"),"print"===D)break;H.addEventListener("change",z=>{v.setValue(E,{value:z.target.getAttribute(z.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==W.value&&H.setAttribute("value",W.value),"print"===D)break;H.addEventListener("input",z=>{v.setValue(E,{value:z.target.value})})}break;case"select":if(null!==W.value)for(const z of T.children)z.attributes.value===W.value&&(z.attributes.selected=!0);H.addEventListener("input",z=>{const N=z.target.options;v.setValue(E,{value:-1===N.selectedIndex?"":N[N.selectedIndex].value})})}}static setAttributes({html:H,element:E,storage:T=null,intent:v,linkService:D}){const{attributes:W}=E,z=H instanceof HTMLAnchorElement;"radio"===W.type&&(W.name=`${W.name}-${v}`);for(const[N,B]of Object.entries(W))if(null!=B&&"dataId"!==N)if("style"!==N)if("textContent"===N)H.textContent=B;else if("class"===N)B.length&&H.setAttribute(N,B.join(" "));else{if(z&&("href"===N||"newWindow"===N))continue;H.setAttribute(N,B)}else Object.assign(H.style,B);z&&D.addLinkAttributes(H,W.href,W.newWindow),T&&W.dataId&&this.setupStorage(H,W.dataId,E,T)}static render(H){const E=H.annotationStorage,T=H.linkService,v=H.xfaHtml,D=H.intent||"display",W=document.createElement(v.name);v.attributes&&this.setAttributes({html:W,element:v,intent:D,linkService:T});const z=[[v,-1,W]],N=H.div;if(N.appendChild(W),H.viewport){const _=`matrix(${H.viewport.transform.join(",")})`;N.style.transform=_}"richText"!==D&&N.setAttribute("class","xfaLayer xfaFont");const B=[];for(;z.length>0;){const[_,t,A]=z[z.length-1];if(t+1===_.children.length){z.pop();continue}const C=_.children[++z[z.length-1][1]];if(null===C)continue;const{name:y}=C;if("#text"===y){const n=document.createTextNode(C.value);B.push(n),A.appendChild(n);continue}let P;if(P=C?.attributes?.xmlns?document.createElementNS(C.attributes.xmlns,y):document.createElement(y),A.appendChild(P),C.attributes&&this.setAttributes({html:P,element:C,storage:E,intent:D,linkService:T}),C.children&&C.children.length>0)z.push([C,-1,P]);else if(C.value){const n=document.createTextNode(C.value);s.XfaText.shouldBuildText(y)&&B.push(n),P.appendChild(n)}}for(const _ of N.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:B}}static update(H){const E=`matrix(${H.viewport.transform.join(",")})`;H.div.style.transform=E,H.div.hidden=!1}}},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.renderTextLayer=function A(C){const y=new t({textContent:C.textContent,textContentStream:C.textContentStream,container:C.container,viewport:C.viewport,textDivs:C.textDivs,textContentItemsStr:C.textContentItemsStr,enhanceTextSelection:C.enhanceTextSelection});return y._render(C.timeout),y};var s=x(1);const R=30,E=new Map,T=/^\s+$/g;function D(C,y,P,n){const i=document.createElement("span"),h=C._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==y.str,hasEOL:y.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==y.str,hasEOL:y.hasEOL};C._textDivs.push(i);const m=s.Util.transform(C._viewport.transform,y.transform);let d=Math.atan2(m[1],m[0]);const b=P[y.fontName];b.vertical&&(d+=Math.PI/2);const f=Math.hypot(m[2],m[3]),u=f*function v(C,y){const P=E.get(C);if(P)return P;y.save(),y.font=`30px ${C}`;const n=y.measureText("");let i=n.fontBoundingBoxAscent,h=Math.abs(n.fontBoundingBoxDescent);if(i){y.restore();const d=i/(i+h);return E.set(C,d),d}y.strokeStyle="red",y.clearRect(0,0,R,R),y.strokeText("g",0,0);let m=y.getImageData(0,0,R,R).data;h=0;for(let d=m.length-1-3;d>=0;d-=4)if(m[d]>0){h=Math.ceil(d/4/R);break}y.clearRect(0,0,R,R),y.strokeText("A",0,R),m=y.getImageData(0,0,R,R).data,i=0;for(let d=0,b=m.length;d<b;d+=4)if(m[d]>0){i=R-Math.floor(d/4/R);break}if(y.restore(),i){const d=i/(i+h);return E.set(C,d),d}return E.set(C,.8),.8}(b.fontFamily,n);let w,k;0===d?(w=m[4],k=m[5]-u):(w=m[4]+u*Math.sin(d),k=m[5]-u*Math.cos(d)),i.style.left=`${w}px`,i.style.top=`${k}px`,i.style.fontSize=`${f}px`,i.style.fontFamily=b.fontFamily,i.setAttribute("role","presentation"),i.textContent=y.str,i.dir=y.dir,C._fontInspectorEnabled&&(i.dataset.fontName=y.fontName),0!==d&&(h.angle=d*(180/Math.PI));let j=!1;if(y.str.length>1||C._enhanceTextSelection&&T.test(y.str))j=!0;else if(" "!==y.str&&y.transform[0]!==y.transform[3]){const $=Math.abs(y.transform[0]),ee=Math.abs(y.transform[3]);$!==ee&&Math.max($,ee)/Math.min($,ee)>1.5&&(j=!0)}if(j&&(h.canvasWidth=b.vertical?y.height*C._viewport.scale:y.width*C._viewport.scale),C._textDivProperties.set(i,h),C._textContentStream&&C._layoutText(i),C._enhanceTextSelection&&h.hasText){let $=1,ee=0;0!==d&&($=Math.cos(d),ee=Math.sin(d));const te=(b.vertical?y.height:y.width)*C._viewport.scale,ae=f;let ge,de;0!==d?(ge=[$,ee,-ee,$,w,k],de=s.Util.getAxialAlignedBoundingBox([0,0,te,ae],ge)):de=[w,k,w+te,k+ae],C._bounds.push({left:de[0],top:de[1],right:de[2],bottom:de[3],div:i,size:[te,ae],m:ge})}}function W(C){if(C._canceled)return;const y=C._textDivs,P=C._capability,n=y.length;if(n>1e5)return C._renderingDone=!0,void P.resolve();if(!C._textContentStream)for(let i=0;i<n;i++)C._layoutText(y[i]);C._renderingDone=!0,P.resolve()}function z(C,y,P){let n=0;for(let i=0;i<P;i++){const h=C[y++];h>0&&(n=n?Math.min(h,n):h)}return n}function _(C,y){y.sort(function(i,h){return i.x1-h.x1||i.index-h.index});const n=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const i of y){let h=0;for(;h<n.length&&n[h].end<=i.y1;)h++;let m=n.length-1;for(;m>=0&&n[m].start>=i.y2;)m--;let d,b,f,u,w=-1/0;for(f=h;f<=m;f++){let $;d=n[f],b=d.boundary,$=b.x2>i.x1?b.index>i.index?b.x1New:i.x1:void 0===b.x2New?(b.x2+i.x1)/2:b.x2New,$>w&&(w=$)}for(i.x1New=w,f=h;f<=m;f++)d=n[f],b=d.boundary,void 0===b.x2New?b.x2>i.x1?b.index>i.index&&(b.x2New=b.x2):b.x2New=w:b.x2New>w&&(b.x2New=Math.max(w,b.x2));const k=[];let j=null;for(f=h;f<=m;f++){d=n[f],b=d.boundary;const $=b.x2>i.x2?b:i;j===$?k[k.length-1].end=d.end:(k.push({start:d.start,end:d.end,boundary:$}),j=$)}for(n[h].start<i.y1&&(k[0].start=i.y1,k.unshift({start:n[h].start,end:i.y1,boundary:n[h].boundary})),i.y2<n[m].end&&(k[k.length-1].end=i.y2,k.push({start:i.y2,end:n[m].end,boundary:n[m].boundary})),f=h;f<=m;f++){if(d=n[f],b=d.boundary,void 0!==b.x2New)continue;let $=!1;for(u=h-1;!$&&u>=0&&n[u].start>=b.y1;u--)$=n[u].boundary===b;for(u=m+1;!$&&u<n.length&&n[u].end<=b.y2;u++)$=n[u].boundary===b;for(u=0;!$&&u<k.length;u++)$=k[u].boundary===b;$||(b.x2New=w)}Array.prototype.splice.apply(n,[h,m-h+1].concat(k))}for(const i of n){const h=i.boundary;void 0===h.x2New&&(h.x2New=Math.max(C,h.x2))}}class t{constructor({textContent:y,textContentStream:P,container:n,viewport:i,textDivs:h,textContentItemsStr:m,enhanceTextSelection:d}){this._textContent=y,this._textContentStream=P,this._container=n,this._document=n.ownerDocument,this._viewport=i,this._textDivs=h||[],this._textContentItemsStr=m||[],this._enhanceTextSelection=!!d,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,s.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new s.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(y,P){for(let n=0,i=y.length;n<i;n++)if(void 0!==y[n].str)this._textContentItemsStr.push(y[n].str),D(this,y[n],P,this._layoutTextCtx);else if("beginMarkedContentProps"===y[n].type||"beginMarkedContent"===y[n].type){const h=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==y[n].id&&this._container.setAttribute("id",`${y[n].id}`),h.appendChild(this._container)}else"endMarkedContent"===y[n].type&&(this._container=this._container.parentNode)}_layoutText(y){const P=this._textDivProperties.get(y);let n="";if(0!==P.canvasWidth&&P.hasText){const{fontSize:i,fontFamily:h}=y.style;(i!==this._layoutTextLastFontSize||h!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${i} ${h}`,this._layoutTextLastFontSize=i,this._layoutTextLastFontFamily=h);const{width:m}=this._layoutTextCtx.measureText(y.textContent);if(m>0){const d=P.canvasWidth/m;this._enhanceTextSelection&&(P.scale=d),n=`scaleX(${d})`}}if(0!==P.angle&&(n=`rotate(${P.angle}deg) ${n}`),n.length>0&&(this._enhanceTextSelection&&(P.originalTransform=n),y.style.transform=n),P.hasText&&this._container.appendChild(y),P.hasEOL){const i=document.createElement("br");i.setAttribute("role","presentation"),this._container.appendChild(i)}}_render(y=0){const P=(0,s.createPromiseCapability)();let n=Object.create(null);const i=this._document.createElement("canvas");if(i.height=i.width=R,this._layoutTextCtx=i.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),P.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const h=()=>{this._reader.read().then(({value:m,done:d})=>{d?P.resolve():(Object.assign(n,m.styles),this._processItems(m.items,n),h())},P.reject)};this._reader=this._textContentStream.getReader(),h()}}P.promise.then(()=>{n=null,y?this._renderTimer=setTimeout(()=>{W(this),this._renderTimer=null},y):W(this)},this._capability.reject)}expandTextDivs(y=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function N(C){const y=C._bounds,P=C._viewport,n=function B(C,y,P){const n=P.map(function(h,m){return{x1:h.left,y1:h.top,x2:h.right,y2:h.bottom,index:m,x1New:void 0,x2New:void 0}});_(C,n);const i=new Array(P.length);for(const h of n)i[h.index]={left:h.x1New,top:0,right:h.x2New,bottom:0};P.map(function(h,m){const d=i[m],b=n[m];b.x1=h.top,b.y1=C-d.right,b.x2=h.bottom,b.y2=C-d.left,b.index=m,b.x1New=void 0,b.x2New=void 0}),_(y,n);for(const h of n){const m=h.index;i[m].top=h.x1New,i[m].bottom=h.x2New}return i}(P.width,P.height,y);for(let i=0;i<n.length;i++){const h=y[i].div,m=C._textDivProperties.get(h);if(0===m.angle){m.paddingLeft=y[i].left-n[i].left,m.paddingTop=y[i].top-n[i].top,m.paddingRight=n[i].right-y[i].right,m.paddingBottom=n[i].bottom-y[i].bottom,C._textDivProperties.set(h,m);continue}const d=n[i],b=y[i],f=b.m,u=f[0],w=f[1],k=[[0,0],[0,b.size[1]],[b.size[0],0],b.size],j=new Float64Array(64);for(let ee=0,te=k.length;ee<te;ee++){const ae=s.Util.applyTransform(k[ee],f);j[ee+0]=u&&(d.left-ae[0])/u,j[ee+4]=w&&(d.top-ae[1])/w,j[ee+8]=u&&(d.right-ae[0])/u,j[ee+12]=w&&(d.bottom-ae[1])/w,j[ee+16]=w&&(d.left-ae[0])/-w,j[ee+20]=u&&(d.top-ae[1])/u,j[ee+24]=w&&(d.right-ae[0])/-w,j[ee+28]=u&&(d.bottom-ae[1])/u,j[ee+32]=u&&(d.left-ae[0])/-u,j[ee+36]=w&&(d.top-ae[1])/-w,j[ee+40]=u&&(d.right-ae[0])/-u,j[ee+44]=w&&(d.bottom-ae[1])/-w,j[ee+48]=w&&(d.left-ae[0])/w,j[ee+52]=u&&(d.top-ae[1])/-u,j[ee+56]=w&&(d.right-ae[0])/w,j[ee+60]=u&&(d.bottom-ae[1])/-u}const $=1+Math.min(Math.abs(u),Math.abs(w));m.paddingLeft=z(j,32,16)/$,m.paddingTop=z(j,48,16)/$,m.paddingRight=z(j,0,16)/$,m.paddingBottom=z(j,16,16)/$,C._textDivProperties.set(h,m)}}(this),this._bounds=null);const P=[],n=[];for(let i=0,h=this._textDivs.length;i<h;i++){const m=this._textDivs[i],d=this._textDivProperties.get(m);d.hasText&&(y?(P.length=0,n.length=0,d.originalTransform&&P.push(d.originalTransform),d.paddingTop>0?(n.push(`${d.paddingTop}px`),P.push(`translateY(${-d.paddingTop}px)`)):n.push(0),n.push(d.paddingRight>0?d.paddingRight/d.scale+"px":0),n.push(d.paddingBottom>0?`${d.paddingBottom}px`:0),d.paddingLeft>0?(n.push(d.paddingLeft/d.scale+"px"),P.push(`translateX(${-d.paddingLeft/d.scale}px)`)):n.push(0),m.style.padding=n.join(" "),P.length&&(m.style.transform=P.join(" "))):(m.style.padding=null,m.style.transform=d.originalTransform))}}}},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SVGGraphics=void 0;var s=x(1),O=x(5),R=x(3);let H=class{constructor(){(0,s.unreachable)("Not implemented: SVGGraphics")}};o.SVGGraphics=H;{let _=function(n){let i=[];const h=[];for(const m of n)"save"!==m.fn?"restore"===m.fn?i=h.pop():i.push(m):(i.push({fnId:92,fn:"group",items:[]}),h.push(i),i=i[i.length-1].items);return i},t=function(n){if(Number.isInteger(n))return n.toString();const i=n.toFixed(10);let h=i.length-1;if("0"!==i[h])return i;do{h--}while("0"===i[h]);return i.substring(0,"."===i[h]?h:h+1)},A=function(n){if(0===n[4]&&0===n[5]){if(0===n[1]&&0===n[2])return 1===n[0]&&1===n[3]?"":`scale(${t(n[0])} ${t(n[3])})`;if(n[0]===n[3]&&n[1]===-n[2]){const i=180*Math.acos(n[0])/Math.PI;return`rotate(${t(i)})`}}else if(1===n[0]&&0===n[1]&&0===n[2]&&1===n[3])return`translate(${t(n[4])} ${t(n[5])})`;return`matrix(${t(n[0])} ${t(n[1])} ${t(n[2])} ${t(n[3])} ${t(n[4])} ${t(n[5])})`};const E={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},T="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/1999/xlink",D=["butt","round","square"],W=["miter","round","bevel"],z=function(n,i="",h=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!h)return URL.createObjectURL(new Blob([n],{type:i}));const m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let d=`data:${i};base64,`;for(let b=0,f=n.length;b<f;b+=3){const u=255&n[b],w=255&n[b+1],k=255&n[b+2];d+=m[u>>2]+m[(3&u)<<4|w>>4]+m[b+1<f?(15&w)<<2|k>>6:64]+m[b+2<f?63&k:64]}return d},N=function(){const n=new Uint8Array([137,80,78,71,13,10,26,10]),h=new Int32Array(256);for(let k=0;k<256;k++){let j=k;for(let $=0;$<8;$++)j=1&j?3988292384^j>>1&2147483647:j>>1&2147483647;h[k]=j}function d(k,j,$,ee){let te=ee;const ae=j.length;$[te]=ae>>24&255,$[te+1]=ae>>16&255,$[te+2]=ae>>8&255,$[te+3]=255&ae,te+=4,$[te]=255&k.charCodeAt(0),$[te+1]=255&k.charCodeAt(1),$[te+2]=255&k.charCodeAt(2),$[te+3]=255&k.charCodeAt(3),te+=4,$.set(j,te),te+=j.length;const ge=function m(k,j,$){let ee=-1;for(let te=j;te<$;te++)ee=ee>>>8^h[255&(ee^k[te])];return-1^ee}($,ee+4,te);$[te]=ge>>24&255,$[te+1]=ge>>16&255,$[te+2]=ge>>8&255,$[te+3]=255&ge}function u(k){let j=k.length;const $=65535,ee=Math.ceil(j/$),te=new Uint8Array(2+j+5*ee+4);let ae=0;te[ae++]=120,te[ae++]=156;let ge=0;for(;j>$;)te[ae++]=0,te[ae++]=255,te[ae++]=255,te[ae++]=0,te[ae++]=0,te.set(k.subarray(ge,ge+$),ae),ae+=$,ge+=$,j-=$;te[ae++]=1,te[ae++]=255&j,te[ae++]=j>>8&255,te[ae++]=255&~j,te[ae++]=(65535&~j)>>8&255,te.set(k.subarray(ge),ae),ae+=k.length-ge;const de=function b(k,j,$){let ee=1,te=0;for(let ae=j;ae<$;++ae)ee=(ee+(255&k[ae]))%65521,te=(te+ee)%65521;return te<<16|ee}(k,0,k.length);return te[ae++]=de>>24&255,te[ae++]=de>>16&255,te[ae++]=de>>8&255,te[ae++]=255&de,te}return function(j,$,ee){return function w(k,j,$,ee){const te=k.width,ae=k.height;let ge,de,F;const a=k.data;switch(j){case s.ImageKind.GRAYSCALE_1BPP:de=0,ge=1,F=te+7>>3;break;case s.ImageKind.RGB_24BPP:de=2,ge=8,F=3*te;break;case s.ImageKind.RGBA_32BPP:de=6,ge=8,F=4*te;break;default:throw new Error("invalid format")}const e=new Uint8Array((1+F)*ae);let r=0,l=0;for(let U=0;U<ae;++U)e[r++]=0,e.set(a.subarray(l,l+F),r),l+=F,r+=F;if(j===s.ImageKind.GRAYSCALE_1BPP&&ee){r=0;for(let U=0;U<ae;U++){r++;for(let Y=0;Y<F;Y++)e[r++]^=255}}const p=new Uint8Array([te>>24&255,te>>16&255,te>>8&255,255&te,ae>>24&255,ae>>16&255,ae>>8&255,255&ae,ge,de,0,0,0]),g=function f(k){if(!R.isNodeJS)return u(k);try{let j;j=parseInt(process.versions.node)>=8?k:Buffer.from(k);const $=__webpack_require__(2258).deflateSync(j,{level:9});return $ instanceof Uint8Array?$:new Uint8Array($)}catch(j){(0,s.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+j)}return u(k)}(e),L=new Uint8Array(n.length+36+p.length+g.length);let Z=0;return L.set(n,Z),Z+=n.length,d("IHDR",p,L,Z),Z+=12+p.length,d("IDATA",g,L,Z),Z+=12+g.length,d("IEND",new Uint8Array(0),L,Z),z(L,"image/png",$)}(j,void 0===j.kind?s.ImageKind.GRAYSCALE_1BPP:j.kind,$,ee)}}();class B{constructor(){this.fontSizeScale=1,this.fontWeight=E.fontWeight,this.fontSize=0,this.textMatrix=s.IDENTITY_MATRIX,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=s.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=E.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,h){this.x=i,this.y=h}}let C=0,y=0,P=0;o.SVGGraphics=H=class{constructor(n,i,h=!1){this.svgFactory=new O.DOMSVGFactory,this.current=new B,this.transformMatrix=s.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=n,this.objs=i,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!h,this._operatorIdMapping=[];for(const m in s.OPS)this._operatorIdMapping[s.OPS[m]]=m}save(){this.transformStack.push(this.transformMatrix);const n=this.current;this.extraStack.push(n),this.current=n.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(n){this.save(),this.executeOpTree(n),this.restore()}loadDependencies(n){const i=n.fnArray,h=n.argsArray;for(let m=0,d=i.length;m<d;m++)if(i[m]===s.OPS.dependency)for(const b of h[m]){const f=b.startsWith("g_")?this.commonObjs:this.objs,u=new Promise(w=>{f.get(b,w)});this.current.dependencies.push(u)}return Promise.all(this.current.dependencies)}transform(n,i,h,m,d,b){this.transformMatrix=s.Util.transform(this.transformMatrix,[n,i,h,m,d,b]),this.tgrp=null}getSVG(n,i){this.viewport=i;const h=this._initialize(i);return this.loadDependencies(n).then(()=>(this.transformMatrix=s.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(n)),h))}convertOpList(n){const i=this._operatorIdMapping,h=n.argsArray,m=n.fnArray,d=[];for(let b=0,f=m.length;b<f;b++){const u=m[b];d.push({fnId:u,fn:i[u],args:h[b]})}return _(d)}executeOpTree(n){for(const i of n){const h=i.fn,d=i.args;switch(0|i.fnId){case s.OPS.beginText:this.beginText();break;case s.OPS.dependency:break;case s.OPS.setLeading:this.setLeading(d);break;case s.OPS.setLeadingMoveText:this.setLeadingMoveText(d[0],d[1]);break;case s.OPS.setFont:this.setFont(d);break;case s.OPS.showText:case s.OPS.showSpacedText:this.showText(d[0]);break;case s.OPS.endText:this.endText();break;case s.OPS.moveText:this.moveText(d[0],d[1]);break;case s.OPS.setCharSpacing:this.setCharSpacing(d[0]);break;case s.OPS.setWordSpacing:this.setWordSpacing(d[0]);break;case s.OPS.setHScale:this.setHScale(d[0]);break;case s.OPS.setTextMatrix:this.setTextMatrix(d[0],d[1],d[2],d[3],d[4],d[5]);break;case s.OPS.setTextRise:this.setTextRise(d[0]);break;case s.OPS.setTextRenderingMode:this.setTextRenderingMode(d[0]);break;case s.OPS.setLineWidth:this.setLineWidth(d[0]);break;case s.OPS.setLineJoin:this.setLineJoin(d[0]);break;case s.OPS.setLineCap:this.setLineCap(d[0]);break;case s.OPS.setMiterLimit:this.setMiterLimit(d[0]);break;case s.OPS.setFillRGBColor:this.setFillRGBColor(d[0],d[1],d[2]);break;case s.OPS.setStrokeRGBColor:this.setStrokeRGBColor(d[0],d[1],d[2]);break;case s.OPS.setStrokeColorN:this.setStrokeColorN(d);break;case s.OPS.setFillColorN:this.setFillColorN(d);break;case s.OPS.shadingFill:this.shadingFill(d[0]);break;case s.OPS.setDash:this.setDash(d[0],d[1]);break;case s.OPS.setRenderingIntent:this.setRenderingIntent(d[0]);break;case s.OPS.setFlatness:this.setFlatness(d[0]);break;case s.OPS.setGState:this.setGState(d[0]);break;case s.OPS.fill:this.fill();break;case s.OPS.eoFill:this.eoFill();break;case s.OPS.stroke:this.stroke();break;case s.OPS.fillStroke:this.fillStroke();break;case s.OPS.eoFillStroke:this.eoFillStroke();break;case s.OPS.clip:this.clip("nonzero");break;case s.OPS.eoClip:this.clip("evenodd");break;case s.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case s.OPS.paintImageXObject:this.paintImageXObject(d[0]);break;case s.OPS.paintInlineImageXObject:this.paintInlineImageXObject(d[0]);break;case s.OPS.paintImageMaskXObject:this.paintImageMaskXObject(d[0]);break;case s.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(d[0],d[1]);break;case s.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case s.OPS.closePath:this.closePath();break;case s.OPS.closeStroke:this.closeStroke();break;case s.OPS.closeFillStroke:this.closeFillStroke();break;case s.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case s.OPS.nextLine:this.nextLine();break;case s.OPS.transform:this.transform(d[0],d[1],d[2],d[3],d[4],d[5]);break;case s.OPS.constructPath:this.constructPath(d[0],d[1]);break;case s.OPS.endPath:this.endPath();break;case 92:this.group(i.items);break;default:(0,s.warn)(`Unimplemented operator ${h}`)}}}setWordSpacing(n){this.current.wordSpacing=n}setCharSpacing(n){this.current.charSpacing=n}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(n,i,h,m,d,b){const f=this.current;f.textMatrix=f.lineMatrix=[n,i,h,m,d,b],f.textMatrixScale=Math.hypot(n,i),f.x=f.lineX=0,f.y=f.lineY=0,f.xcoords=[],f.ycoords=[],f.tspan=this.svgFactory.createElement("svg:tspan"),f.tspan.setAttributeNS(null,"font-family",f.fontFamily),f.tspan.setAttributeNS(null,"font-size",`${t(f.fontSize)}px`),f.tspan.setAttributeNS(null,"y",t(-f.y)),f.txtElement=this.svgFactory.createElement("svg:text"),f.txtElement.appendChild(f.tspan)}beginText(){const n=this.current;n.x=n.lineX=0,n.y=n.lineY=0,n.textMatrix=s.IDENTITY_MATRIX,n.lineMatrix=s.IDENTITY_MATRIX,n.textMatrixScale=1,n.tspan=this.svgFactory.createElement("svg:tspan"),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtgrp=this.svgFactory.createElement("svg:g"),n.xcoords=[],n.ycoords=[]}moveText(n,i){const h=this.current;h.x=h.lineX+=n,h.y=h.lineY+=i,h.xcoords=[],h.ycoords=[],h.tspan=this.svgFactory.createElement("svg:tspan"),h.tspan.setAttributeNS(null,"font-family",h.fontFamily),h.tspan.setAttributeNS(null,"font-size",`${t(h.fontSize)}px`),h.tspan.setAttributeNS(null,"y",t(-h.y))}showText(n){const i=this.current,h=i.font,m=i.fontSize;if(0===m)return;const d=i.fontSizeScale,b=i.charSpacing,f=i.wordSpacing,u=i.fontDirection,w=i.textHScale*u,k=h.vertical,j=k?1:-1,$=h.defaultVMetrics,ee=m*i.fontMatrix[0];let te=0;for(const de of n){if(null===de){te+=u*f;continue}if("number"==typeof de){te+=j*de*m/1e3;continue}const F=(de.isSpace?f:0)+b,a=de.fontChar;let e,r,p,l=de.width;if(k){let g;const c=de.vmetric||$;g=de.vmetric?c[1]:.5*l,g=-g*ee,l=c?-c[0]:l,e=g/d,r=(te+c[2]*ee)/d}else e=te/d,r=0;(de.isInFont||h.missingFile)&&(i.xcoords.push(i.x+e),k&&i.ycoords.push(-i.y+r),i.tspan.textContent+=a),p=k?l*ee-F*u:l*ee+F*u,te+=p}i.tspan.setAttributeNS(null,"x",i.xcoords.map(t).join(" ")),i.tspan.setAttributeNS(null,"y",k?i.ycoords.map(t).join(" "):t(-i.y)),k?i.y-=te:i.x+=te*w,i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${t(i.fontSize)}px`),i.fontStyle!==E.fontStyle&&i.tspan.setAttributeNS(null,"font-style",i.fontStyle),i.fontWeight!==E.fontWeight&&i.tspan.setAttributeNS(null,"font-weight",i.fontWeight);const ae=i.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;ae===s.TextRenderingMode.FILL||ae===s.TextRenderingMode.FILL_STROKE?(i.fillColor!==E.fillColor&&i.tspan.setAttributeNS(null,"fill",i.fillColor),i.fillAlpha<1&&i.tspan.setAttributeNS(null,"fill-opacity",i.fillAlpha)):i.tspan.setAttributeNS(null,"fill",i.textRenderingMode===s.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(ae===s.TextRenderingMode.STROKE||ae===s.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(i.tspan,1/(i.textMatrixScale||1));let ge=i.textMatrix;0!==i.textRise&&(ge=ge.slice(),ge[5]+=i.textRise),i.txtElement.setAttributeNS(null,"transform",`${A(ge)} scale(${t(w)}, -1)`),i.txtElement.setAttributeNS(T,"xml:space","preserve"),i.txtElement.appendChild(i.tspan),i.txtgrp.appendChild(i.txtElement),this._ensureTransformGroup().appendChild(i.txtElement)}setLeadingMoveText(n,i){this.setLeading(-i),this.moveText(n,i)}addFontStyle(n){if(!n.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const i=z(n.data,n.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${n.loadedName}"; src: url(${i}); }\n`}setFont(n){const i=this.current,h=this.commonObjs.get(n[0]);let m=n[1];i.font=h,this.embedFonts&&!h.missingFile&&!this.embeddedFonts[h.loadedName]&&(this.addFontStyle(h),this.embeddedFonts[h.loadedName]=h),i.fontMatrix=h.fontMatrix||s.FONT_IDENTITY_MATRIX;let d="normal";h.black?d="900":h.bold&&(d="bold");const b=h.italic?"italic":"normal";m<0?(m=-m,i.fontDirection=-1):i.fontDirection=1,i.fontSize=m,i.fontFamily=h.loadedName,i.fontWeight=d,i.fontStyle=b,i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"y",t(-i.y)),i.xcoords=[],i.ycoords=[]}endText(){const n=this.current;n.textRenderingMode&s.TextRenderingMode.ADD_TO_PATH_FLAG&&n.txtElement?.hasChildNodes()&&(n.element=n.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(n){n>0&&(this.current.lineWidth=n)}setLineCap(n){this.current.lineCap=D[n]}setLineJoin(n){this.current.lineJoin=W[n]}setMiterLimit(n){this.current.miterLimit=n}setStrokeAlpha(n){this.current.strokeAlpha=n}setStrokeRGBColor(n,i,h){this.current.strokeColor=s.Util.makeHexColor(n,i,h)}setFillAlpha(n){this.current.fillAlpha=n}setFillRGBColor(n,i,h){this.current.fillColor=s.Util.makeHexColor(n,i,h),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(n){this.current.strokeColor=this._makeColorN_Pattern(n)}setFillColorN(n){this.current.fillColor=this._makeColorN_Pattern(n)}shadingFill(n){const i=this.viewport.width,h=this.viewport.height,m=s.Util.inverseTransform(this.transformMatrix),d=s.Util.applyTransform([0,0],m),b=s.Util.applyTransform([0,h],m),f=s.Util.applyTransform([i,0],m),u=s.Util.applyTransform([i,h],m),w=Math.min(d[0],b[0],f[0],u[0]),k=Math.min(d[1],b[1],f[1],u[1]),j=Math.max(d[0],b[0],f[0],u[0]),$=Math.max(d[1],b[1],f[1],u[1]),ee=this.svgFactory.createElement("svg:rect");ee.setAttributeNS(null,"x",w),ee.setAttributeNS(null,"y",k),ee.setAttributeNS(null,"width",j-w),ee.setAttributeNS(null,"height",$-k),ee.setAttributeNS(null,"fill",this._makeShadingPattern(n)),this.current.fillAlpha<1&&ee.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(ee)}_makeColorN_Pattern(n){return"TilingPattern"===n[0]?this._makeTilingPattern(n):this._makeShadingPattern(n)}_makeTilingPattern(n){const i=n[1],h=n[2],m=n[3]||s.IDENTITY_MATRIX,[d,b,f,u]=n[4],w=n[5],k=n[6],j=n[7],$="shading"+P++,[ee,te,ae,ge]=s.Util.normalizeRect([...s.Util.applyTransform([d,b],m),...s.Util.applyTransform([f,u],m)]),[de,F]=s.Util.singularValueDecompose2dScale(m),a=w*de,e=k*F,r=this.svgFactory.createElement("svg:pattern");r.setAttributeNS(null,"id",$),r.setAttributeNS(null,"patternUnits","userSpaceOnUse"),r.setAttributeNS(null,"width",a),r.setAttributeNS(null,"height",e),r.setAttributeNS(null,"x",`${ee}`),r.setAttributeNS(null,"y",`${te}`);const l=this.svg,p=this.transformMatrix,g=this.current.fillColor,c=this.current.strokeColor,L=this.svgFactory.create(ae-ee,ge-te);if(this.svg=L,this.transformMatrix=m,2===j){const Z=s.Util.makeHexColor(...i);this.current.fillColor=Z,this.current.strokeColor=Z}return this.executeOpTree(this.convertOpList(h)),this.svg=l,this.transformMatrix=p,this.current.fillColor=g,this.current.strokeColor=c,r.appendChild(L.childNodes[0]),this.defs.appendChild(r),`url(#${$})`}_makeShadingPattern(n){switch("string"==typeof n&&(n=this.objs.get(n)),n[0]){case"RadialAxial":const i="shading"+P++,h=n[3];let m;switch(n[1]){case"axial":const d=n[4],b=n[5];m=this.svgFactory.createElement("svg:linearGradient"),m.setAttributeNS(null,"id",i),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"x1",d[0]),m.setAttributeNS(null,"y1",d[1]),m.setAttributeNS(null,"x2",b[0]),m.setAttributeNS(null,"y2",b[1]);break;case"radial":const f=n[4],u=n[5],w=n[6],k=n[7];m=this.svgFactory.createElement("svg:radialGradient"),m.setAttributeNS(null,"id",i),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"cx",u[0]),m.setAttributeNS(null,"cy",u[1]),m.setAttributeNS(null,"r",k),m.setAttributeNS(null,"fx",f[0]),m.setAttributeNS(null,"fy",f[1]),m.setAttributeNS(null,"fr",w);break;default:throw new Error(`Unknown RadialAxial type: ${n[1]}`)}for(const d of h){const b=this.svgFactory.createElement("svg:stop");b.setAttributeNS(null,"offset",d[0]),b.setAttributeNS(null,"stop-color",d[1]),m.appendChild(b)}return this.defs.appendChild(m),`url(#${i})`;case"Mesh":return(0,s.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${n[0]}`)}}setDash(n,i){this.current.dashArray=n,this.current.dashPhase=i}constructPath(n,i){const h=this.current;let m=h.x,d=h.y,b=[],f=0;for(const u of n)switch(0|u){case s.OPS.rectangle:m=i[f++],d=i[f++];const j=m+i[f++],$=d+i[f++];b.push("M",t(m),t(d),"L",t(j),t(d),"L",t(j),t($),"L",t(m),t($),"Z");break;case s.OPS.moveTo:m=i[f++],d=i[f++],b.push("M",t(m),t(d));break;case s.OPS.lineTo:m=i[f++],d=i[f++],b.push("L",t(m),t(d));break;case s.OPS.curveTo:m=i[f+4],d=i[f+5],b.push("C",t(i[f]),t(i[f+1]),t(i[f+2]),t(i[f+3]),t(m),t(d)),f+=6;break;case s.OPS.curveTo2:b.push("C",t(m),t(d),t(i[f]),t(i[f+1]),t(i[f+2]),t(i[f+3])),m=i[f+2],d=i[f+3],f+=4;break;case s.OPS.curveTo3:m=i[f+2],d=i[f+3],b.push("C",t(i[f]),t(i[f+1]),t(m),t(d),t(m),t(d)),f+=4;break;case s.OPS.closePath:b.push("Z")}b=b.join(" "),h.path&&n.length>0&&n[0]!==s.OPS.rectangle&&n[0]!==s.OPS.moveTo?b=h.path.getAttributeNS(null,"d")+b:(h.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(h.path)),h.path.setAttributeNS(null,"d",b),h.path.setAttributeNS(null,"fill","none"),h.element=h.path,h.setCurrentPoint(m,d)}endPath(){const n=this.current;if(n.path=null,!this.pendingClip)return;if(!n.element)return void(this.pendingClip=null);const i="clippath"+C++,h=this.svgFactory.createElement("svg:clipPath");h.setAttributeNS(null,"id",i),h.setAttributeNS(null,"transform",A(this.transformMatrix));const m=n.element.cloneNode(!0);if(m.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,h.appendChild(m),this.defs.appendChild(h),n.activeClipUrl){n.clipGroup=null;for(const d of this.extraStack)d.clipGroup=null;h.setAttributeNS(null,"clip-path",n.activeClipUrl)}n.activeClipUrl=`url(#${i})`,this.tgrp=null}clip(n){this.pendingClip=n}closePath(){const n=this.current;if(n.path){const i=`${n.path.getAttributeNS(null,"d")}Z`;n.path.setAttributeNS(null,"d",i)}}setLeading(n){this.current.leading=-n}setTextRise(n){this.current.textRise=n}setTextRenderingMode(n){this.current.textRenderingMode=n}setHScale(n){this.current.textHScale=n/100}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[i,h]of n)switch(i){case"LW":this.setLineWidth(h);break;case"LC":this.setLineCap(h);break;case"LJ":this.setLineJoin(h);break;case"ML":this.setMiterLimit(h);break;case"D":this.setDash(h[0],h[1]);break;case"RI":this.setRenderingIntent(h);break;case"FL":this.setFlatness(h);break;case"Font":this.setFont(h);break;case"CA":this.setStrokeAlpha(h);break;case"ca":this.setFillAlpha(h);break;default:(0,s.warn)(`Unimplemented graphic state operator ${i}`)}}fill(){const n=this.current;n.element&&(n.element.setAttributeNS(null,"fill",n.fillColor),n.element.setAttributeNS(null,"fill-opacity",n.fillAlpha),this.endPath())}stroke(){const n=this.current;n.element&&(this._setStrokeAttributes(n.element),n.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(n,i=1){const h=this.current;let m=h.dashArray;1!==i&&m.length>0&&(m=m.map(function(d){return i*d})),n.setAttributeNS(null,"stroke",h.strokeColor),n.setAttributeNS(null,"stroke-opacity",h.strokeAlpha),n.setAttributeNS(null,"stroke-miterlimit",t(h.miterLimit)),n.setAttributeNS(null,"stroke-linecap",h.lineCap),n.setAttributeNS(null,"stroke-linejoin",h.lineJoin),n.setAttributeNS(null,"stroke-width",t(i*h.lineWidth)+"px"),n.setAttributeNS(null,"stroke-dasharray",m.map(t).join(" ")),n.setAttributeNS(null,"stroke-dashoffset",t(i*h.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width","1px"),n.setAttributeNS(null,"height","1px"),n.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(n)}paintImageXObject(n){const i=n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n);i?this.paintInlineImageXObject(i):(0,s.warn)(`Dependent image with object ID ${n} is not ready yet`)}paintInlineImageXObject(n,i){const h=n.width,m=n.height,d=N(n,this.forceDataSchema,!!i),b=this.svgFactory.createElement("svg:rect");b.setAttributeNS(null,"x","0"),b.setAttributeNS(null,"y","0"),b.setAttributeNS(null,"width",t(h)),b.setAttributeNS(null,"height",t(m)),this.current.element=b,this.clip("nonzero");const f=this.svgFactory.createElement("svg:image");f.setAttributeNS(v,"xlink:href",d),f.setAttributeNS(null,"x","0"),f.setAttributeNS(null,"y",t(-m)),f.setAttributeNS(null,"width",t(h)+"px"),f.setAttributeNS(null,"height",t(m)+"px"),f.setAttributeNS(null,"transform",`scale(${t(1/h)} ${t(-1/m)})`),i?i.appendChild(f):this._ensureTransformGroup().appendChild(f)}paintImageMaskXObject(n){const i=this.current,h=n.width,m=n.height,d=i.fillColor;i.maskId="mask"+y++;const b=this.svgFactory.createElement("svg:mask");b.setAttributeNS(null,"id",i.maskId);const f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x","0"),f.setAttributeNS(null,"y","0"),f.setAttributeNS(null,"width",t(h)),f.setAttributeNS(null,"height",t(m)),f.setAttributeNS(null,"fill",d),f.setAttributeNS(null,"mask",`url(#${i.maskId})`),this.defs.appendChild(b),this._ensureTransformGroup().appendChild(f),this.paintInlineImageXObject(n,b)}paintFormXObjectBegin(n,i){if(Array.isArray(n)&&6===n.length&&this.transform(n[0],n[1],n[2],n[3],n[4],n[5]),i){const h=i[2]-i[0],m=i[3]-i[1],d=this.svgFactory.createElement("svg:rect");d.setAttributeNS(null,"x",i[0]),d.setAttributeNS(null,"y",i[1]),d.setAttributeNS(null,"width",t(h)),d.setAttributeNS(null,"height",t(m)),this.current.element=d,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(n){const i=this.svgFactory.create(n.width,n.height),h=this.svgFactory.createElement("svg:defs");i.appendChild(h),this.defs=h;const m=this.svgFactory.createElement("svg:g");return m.setAttributeNS(null,"transform",A(n.transform)),i.appendChild(m),this.svg=m,i}_ensureClipGroup(){if(!this.current.clipGroup){const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(n),this.current.clipGroup=n}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",A(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNodeStream=void 0;var s=x(1),O=x(26);const R=__webpack_require__(172),H=__webpack_require__(2001),E=__webpack_require__(3779),T=__webpack_require__(6558),v=/^file:\/\/\/[a-zA-Z]:\//;o.PDFNodeStream=class W{constructor(P){this.source=P,this.url=function D(y){const P=T.parse(y);return"file:"===P.protocol||P.host?P:/^[a-z]:[/\\]/i.test(y)?T.parse(`file:///${y}`):(P.host||(P.protocol="file:"),P)}(P.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&P.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new A(this):new _(this),this._fullRequestReader}getRangeReader(P,n){if(n<=this._progressiveDataLength)return null;const i=this.isFsUrl?new C(this,P,n):new t(this,P,n);return this._rangeRequestReaders.push(i),i}cancelAllRequests(P){this._fullRequestReader&&this._fullRequestReader.cancel(P);for(const n of this._rangeRequestReaders.slice(0))n.cancel(P)}};class z{constructor(P){this._url=P.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=P.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=(0,s.createPromiseCapability)(),this._headersCapability=(0,s.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var P=this;return _asyncToGenerator(function*(){if(yield P._readCapability.promise,P._done)return{value:void 0,done:!0};if(P._storedError)throw P._storedError;const n=P._readableStream.read();return null===n?(P._readCapability=(0,s.createPromiseCapability)(),P.read()):(P._loaded+=n.length,P.onProgress&&P.onProgress({loaded:P._loaded,total:P._contentLength}),{value:new Uint8Array(n).buffer,done:!1})})()}cancel(P){this._readableStream?this._readableStream.destroy(P):this._error(P)}_error(P){this._storedError=P,this._readCapability.resolve()}_setReadableStream(P){this._readableStream=P,P.on("readable",()=>{this._readCapability.resolve()}),P.on("end",()=>{P.destroy(),this._done=!0,this._readCapability.resolve()}),P.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new s.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class N{constructor(P){this._url=P.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,s.createPromiseCapability)(),this._isStreamingSupported=!P.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var P=this;return _asyncToGenerator(function*(){if(yield P._readCapability.promise,P._done)return{value:void 0,done:!0};if(P._storedError)throw P._storedError;const n=P._readableStream.read();return null===n?(P._readCapability=(0,s.createPromiseCapability)(),P.read()):(P._loaded+=n.length,P.onProgress&&P.onProgress({loaded:P._loaded}),{value:new Uint8Array(n).buffer,done:!1})})()}cancel(P){this._readableStream?this._readableStream.destroy(P):this._error(P)}_error(P){this._storedError=P,this._readCapability.resolve()}_setReadableStream(P){this._readableStream=P,P.on("readable",()=>{this._readCapability.resolve()}),P.on("end",()=>{P.destroy(),this._done=!0,this._readCapability.resolve()}),P.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function B(y,P){return{protocol:y.protocol,auth:y.auth,host:y.hostname,port:y.port,path:y.path,method:"GET",headers:P}}class _ extends z{constructor(P){super(P);const n=i=>{if(404===i.statusCode){const b=new s.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=b,void this._headersCapability.reject(b)}this._headersCapability.resolve(),this._setReadableStream(i);const h=b=>this._readableStream.headers[b.toLowerCase()],{allowRangeRequests:m,suggestedLength:d}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:h,isHttp:P.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=m,this._contentLength=d||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(h)};this._request=null,this._request="http:"===this._url.protocol?H.request(B(this._url,P.httpHeaders),n):E.request(B(this._url,P.httpHeaders),n),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class t extends N{constructor(P,n,i){super(P),this._httpHeaders={};for(const m in P.httpHeaders){const d=P.httpHeaders[m];typeof d>"u"||(this._httpHeaders[m]=d)}this._httpHeaders.Range=`bytes=${n}-${i-1}`;const h=m=>{if(404!==m.statusCode)this._setReadableStream(m);else{const d=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=d}};this._request=null,this._request="http:"===this._url.protocol?H.request(B(this._url,this._httpHeaders),h):E.request(B(this._url,this._httpHeaders),h),this._request.on("error",m=>{this._storedError=m}),this._request.end()}}class A extends z{constructor(P){super(P);let n=decodeURIComponent(this._url.path);v.test(this._url.href)&&(n=n.replace(/^\//,"")),R.lstat(n,(i,h)=>{if(i)return"ENOENT"===i.code&&(i=new s.MissingPDFException(`Missing PDF "${n}".`)),this._storedError=i,void this._headersCapability.reject(i);this._contentLength=h.size,this._setReadableStream(R.createReadStream(n)),this._headersCapability.resolve()})}}class C extends N{constructor(P,n,i){super(P);let h=decodeURIComponent(this._url.path);v.test(this._url.href)&&(h=h.replace(/^\//,"")),this._setReadableStream(R.createReadStream(h,{start:n,end:i-1}))}}},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createResponseStatusError=function T(D,W){return 404===D||0===D&&W.startsWith("file:")?new s.MissingPDFException('Missing PDF "'+W+'".'):new s.UnexpectedResponseException(`Unexpected server response (${D}) while retrieving PDF "${W}".`,D)},o.extractFilenameFromHeader=function E(D){const W=D("Content-Disposition");if(W){let z=(0,O.getFilenameFromContentDispositionHeader)(W);if(z.includes("%"))try{z=decodeURIComponent(z)}catch{}if((0,R.isPdfFile)(z))return z}return null},o.validateRangeRequestCapabilities=function H({getResponseHeader:D,isHttp:W,rangeChunkSize:z,disableRange:N}){const B={allowRangeRequests:!1,suggestedLength:void 0},_=parseInt(D("Content-Length"),10);return!Number.isInteger(_)||(B.suggestedLength=_,_<=2*z)||N||!W||"bytes"!==D("Accept-Ranges")||"identity"!==(D("Content-Encoding")||"identity")||(B.allowRangeRequests=!0),B},o.validateResponseStatus=function v(D){return 200===D||206===D};var s=x(1),O=x(27),R=x(5)},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getFilenameFromContentDispositionHeader=function O(R){let H=!0,E=T("filename\\*","i").exec(R);if(E){E=E[1];let _=z(E);return _=unescape(_),_=N(_),_=B(_),D(_)}if(E=function W(_){const t=[];let A;const C=T("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(A=C.exec(_));){let[,P,n,i]=A;if(P=parseInt(P,10),P in t){if(0===P)break}else t[P]=[n,i]}const y=[];for(let P=0;P<t.length&&P in t;++P){let[n,i]=t[P];i=z(i),n&&(i=unescape(i),0===P&&(i=N(i))),y.push(i)}return y.join("")}(R),E)return D(B(E));if(E=T("filename","i").exec(R),E){E=E[1];let _=z(E);return _=B(_),D(_)}function T(_,t){return new RegExp("(?:^|;)\\s*"+_+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function v(_,t){if(_){if(!/^[\x00-\xFF]+$/.test(t))return t;try{const A=new TextDecoder(_,{fatal:!0}),C=(0,s.stringToBytes)(t);t=A.decode(C),H=!1}catch{}}return t}function D(_){return H&&/[\x80-\xff]/.test(_)&&(_=v("utf-8",_),H&&(_=v("iso-8859-1",_))),_}function z(_){if(_.startsWith('"')){const t=_.slice(1).split('\\"');for(let A=0;A<t.length;++A){const C=t[A].indexOf('"');-1!==C&&(t[A]=t[A].slice(0,C),t.length=A+1),t[A]=t[A].replace(/\\(.)/g,"$1")}_=t.join('"')}return _}function N(_){const t=_.indexOf("'");return-1===t?_:v(_.slice(0,t),_.slice(t+1).replace(/^[^']*'/,""))}function B(_){return!_.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(_)?_:_.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(t,A,C,y){if("q"===C||"Q"===C)return v(A,y=(y=y.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(P,n){return String.fromCharCode(parseInt(n,16))}));try{y=atob(y)}catch{}return v(A,y)})}return""};var s=x(1)},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNetworkStream=void 0;var s=x(1),O=x(26);class T{constructor(N,B={}){this.url=N,this.isHttp=/^https?:/i.test(N),this.httpHeaders=this.isHttp&&B.httpHeaders||Object.create(null),this.withCredentials=B.withCredentials||!1,this.getXhr=B.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(N,B,_){const t={begin:N,end:B};for(const A in _)t[A]=_[A];return this.request(t)}requestFull(N){return this.request(N)}request(N){const B=this.getXhr(),_=this.currXhrId++,t=this.pendingRequests[_]={xhr:B};B.open("GET",this.url),B.withCredentials=this.withCredentials;for(const A in this.httpHeaders){const C=this.httpHeaders[A];typeof C>"u"||B.setRequestHeader(A,C)}return this.isHttp&&"begin"in N&&"end"in N?(B.setRequestHeader("Range",`bytes=${N.begin}-${N.end-1}`),t.expectedStatus=206):t.expectedStatus=200,B.responseType="arraybuffer",N.onError&&(B.onerror=function(A){N.onError(B.status)}),B.onreadystatechange=this.onStateChange.bind(this,_),B.onprogress=this.onProgress.bind(this,_),t.onHeadersReceived=N.onHeadersReceived,t.onDone=N.onDone,t.onError=N.onError,t.onProgress=N.onProgress,B.send(null),_}onProgress(N,B){const _=this.pendingRequests[N];_&&_.onProgress?.(B)}onStateChange(N,B){const _=this.pendingRequests[N];if(!_)return;const t=_.xhr;if(t.readyState>=2&&_.onHeadersReceived&&(_.onHeadersReceived(),delete _.onHeadersReceived),4!==t.readyState||!(N in this.pendingRequests))return;if(delete this.pendingRequests[N],0===t.status&&this.isHttp)return void _.onError?.(t.status);const A=t.status||200;if((200!==A||206!==_.expectedStatus)&&A!==_.expectedStatus)return void _.onError?.(t.status);const y=function E(z){const N=z.response;return"string"!=typeof N?N:(0,s.stringToBytes)(N).buffer}(t);if(206===A){const P=t.getResponseHeader("Content-Range"),n=/bytes (\d+)-(\d+)\/(\d+)/.exec(P);_.onDone({begin:parseInt(n[1],10),chunk:y})}else y?_.onDone({begin:0,chunk:y}):_.onError?.(t.status)}getRequestXhr(N){return this.pendingRequests[N].xhr}isPendingRequest(N){return N in this.pendingRequests}abortRequest(N){const B=this.pendingRequests[N].xhr;delete this.pendingRequests[N],B.abort()}}o.PDFNetworkStream=class v{constructor(N){this._source=N,this._manager=new T(N.url,{httpHeaders:N.httpHeaders,withCredentials:N.withCredentials}),this._rangeChunkSize=N.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(N){const B=this._rangeRequestReaders.indexOf(N);B>=0&&this._rangeRequestReaders.splice(B,1)}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new D(this._manager,this._source),this._fullRequestReader}getRangeReader(N,B){const _=new W(this._manager,N,B);return _.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(_),_}cancelAllRequests(N){this._fullRequestReader?.cancel(N);for(const B of this._rangeRequestReaders.slice(0))B.cancel(N)}};class D{constructor(N,B){this._manager=N;const _={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=B.url,this._fullRequestId=N.requestFull(_),this._headersReceivedCapability=(0,s.createPromiseCapability)(),this._disableRange=B.disableRange||!1,this._contentLength=B.length,this._rangeChunkSize=B.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const N=this._fullRequestId,B=this._manager.getRequestXhr(N),_=C=>B.getResponseHeader(C),{allowRangeRequests:t,suggestedLength:A}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});t&&(this._isRangeSupported=!0),this._contentLength=A||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(_),this._isRangeSupported&&this._manager.abortRequest(N),this._headersReceivedCapability.resolve()}_onDone(N){if(N&&(this._requests.length>0?this._requests.shift().resolve({value:N.chunk,done:!1}):this._cachedChunks.push(N.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(N){this._storedError=(0,O.createResponseStatusError)(N,this._url),this._headersReceivedCapability.reject(this._storedError);for(const B of this._requests)B.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(N){this.onProgress?.({loaded:N.loaded,total:N.lengthComputable?N.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var N=this;return _asyncToGenerator(function*(){if(N._storedError)throw N._storedError;if(N._cachedChunks.length>0)return{value:N._cachedChunks.shift(),done:!1};if(N._done)return{value:void 0,done:!0};const B=(0,s.createPromiseCapability)();return N._requests.push(B),B.promise})()}cancel(N){this._done=!0,this._headersReceivedCapability.reject(N);for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class W{constructor(N,B,_){this._manager=N;const t={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=N.url,this._requestId=N.requestRange(B,_,t),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(N){const B=N.chunk;this._requests.length>0?this._requests.shift().resolve({value:B,done:!1}):this._queuedChunk=B,this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(N){this._storedError=(0,O.createResponseStatusError)(N,this._url);for(const B of this._requests)B.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(N){this.isStreamingSupported||this.onProgress?.({loaded:N.loaded})}get isStreamingSupported(){return!1}read(){var N=this;return _asyncToGenerator(function*(){if(N._storedError)throw N._storedError;if(null!==N._queuedChunk){const _=N._queuedChunk;return N._queuedChunk=null,{value:_,done:!1}}if(N._done)return{value:void 0,done:!0};const B=(0,s.createPromiseCapability)();return N._requests.push(B),B.promise})()}cancel(N){this._done=!0;for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(G,o,x)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFFetchStream=void 0;var s=x(1),O=x(26);function R(D,W,z){return{method:"GET",headers:D,signal:z?.signal,mode:"cors",credentials:W?"include":"same-origin",redirect:"follow"}}function H(D){const W=new Headers;for(const z in D){const N=D[z];typeof N>"u"||W.append(z,N)}return W}o.PDFFetchStream=class E{constructor(W){this.source=W,this.isHttp=/^https?:/i.test(W.url),this.httpHeaders=this.isHttp&&W.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new T(this),this._fullRequestReader}getRangeReader(W,z){if(z<=this._progressiveDataLength)return null;const N=new v(this,W,z);return this._rangeRequestReaders.push(N),N}cancelAllRequests(W){this._fullRequestReader&&this._fullRequestReader.cancel(W);for(const z of this._rangeRequestReaders.slice(0))z.cancel(W)}};class T{constructor(W){this._stream=W,this._reader=null,this._loaded=0,this._filename=null;const z=W.source;this._withCredentials=z.withCredentials||!1,this._contentLength=z.length,this._headersCapability=(0,s.createPromiseCapability)(),this._disableRange=z.disableRange||!1,this._rangeChunkSize=z.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!z.disableStream,this._isRangeSupported=!z.disableRange,this._headers=H(this._stream.httpHeaders);const N=z.url;fetch(N,R(this._headers,this._withCredentials,this._abortController)).then(B=>{if(!(0,O.validateResponseStatus)(B.status))throw(0,O.createResponseStatusError)(B.status,N);this._reader=B.body.getReader(),this._headersCapability.resolve();const _=C=>B.headers.get(C),{allowRangeRequests:t,suggestedLength:A}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=t,this._contentLength=A||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(_),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new s.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var W=this;return _asyncToGenerator(function*(){yield W._headersCapability.promise;const{value:z,done:N}=yield W._reader.read();return N?{value:z,done:N}:(W._loaded+=z.byteLength,W.onProgress&&W.onProgress({loaded:W._loaded,total:W._contentLength}),{value:new Uint8Array(z).buffer,done:!1})})()}cancel(W){this._reader&&this._reader.cancel(W),this._abortController&&this._abortController.abort()}}class v{constructor(W,z,N){this._stream=W,this._reader=null,this._loaded=0;const B=W.source;this._withCredentials=B.withCredentials||!1,this._readCapability=(0,s.createPromiseCapability)(),this._isStreamingSupported=!B.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=H(this._stream.httpHeaders),this._headers.append("Range",`bytes=${z}-${N-1}`);const _=B.url;fetch(_,R(this._headers,this._withCredentials,this._abortController)).then(t=>{if(!(0,O.validateResponseStatus)(t.status))throw(0,O.createResponseStatusError)(t.status,_);this._readCapability.resolve(),this._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var W=this;return _asyncToGenerator(function*(){yield W._readCapability.promise;const{value:z,done:N}=yield W._reader.read();return N?{value:z,done:N}:(W._loaded+=z.byteLength,W.onProgress&&W.onProgress({loaded:W._loaded}),{value:new Uint8Array(z).buffer,done:!1})})()}cancel(W){this._reader&&this._reader.cancel(W),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(G){var o=__webpack_module_cache__[G];if(void 0!==o)return o.exports;var x=__webpack_module_cache__[G]={exports:{}};return __webpack_modules__[G](x,x.exports,__w_pdfjs_require__),x.exports}var __webpack_exports__={};return(()=>{var G=__webpack_exports__;Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"AnnotationLayer",{enumerable:!0,get:function(){return O.AnnotationLayer}}),Object.defineProperty(G,"AnnotationMode",{enumerable:!0,get:function(){return o.AnnotationMode}}),Object.defineProperty(G,"CMapCompressionType",{enumerable:!0,get:function(){return o.CMapCompressionType}}),Object.defineProperty(G,"GlobalWorkerOptions",{enumerable:!0,get:function(){return R.GlobalWorkerOptions}}),Object.defineProperty(G,"InvalidPDFException",{enumerable:!0,get:function(){return o.InvalidPDFException}}),Object.defineProperty(G,"LoopbackPort",{enumerable:!0,get:function(){return x.LoopbackPort}}),Object.defineProperty(G,"MissingPDFException",{enumerable:!0,get:function(){return o.MissingPDFException}}),Object.defineProperty(G,"OPS",{enumerable:!0,get:function(){return o.OPS}}),Object.defineProperty(G,"PDFDataRangeTransport",{enumerable:!0,get:function(){return x.PDFDataRangeTransport}}),Object.defineProperty(G,"PDFDateString",{enumerable:!0,get:function(){return s.PDFDateString}}),Object.defineProperty(G,"PDFWorker",{enumerable:!0,get:function(){return x.PDFWorker}}),Object.defineProperty(G,"PasswordResponses",{enumerable:!0,get:function(){return o.PasswordResponses}}),Object.defineProperty(G,"PermissionFlag",{enumerable:!0,get:function(){return o.PermissionFlag}}),Object.defineProperty(G,"PixelsPerInch",{enumerable:!0,get:function(){return s.PixelsPerInch}}),Object.defineProperty(G,"RenderingCancelledException",{enumerable:!0,get:function(){return s.RenderingCancelledException}}),Object.defineProperty(G,"SVGGraphics",{enumerable:!0,get:function(){return T.SVGGraphics}}),Object.defineProperty(G,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return o.UNSUPPORTED_FEATURES}}),Object.defineProperty(G,"UnexpectedResponseException",{enumerable:!0,get:function(){return o.UnexpectedResponseException}}),Object.defineProperty(G,"Util",{enumerable:!0,get:function(){return o.Util}}),Object.defineProperty(G,"VerbosityLevel",{enumerable:!0,get:function(){return o.VerbosityLevel}}),Object.defineProperty(G,"XfaLayer",{enumerable:!0,get:function(){return v.XfaLayer}}),Object.defineProperty(G,"build",{enumerable:!0,get:function(){return x.build}}),Object.defineProperty(G,"createPromiseCapability",{enumerable:!0,get:function(){return o.createPromiseCapability}}),Object.defineProperty(G,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return o.createValidAbsoluteUrl}}),Object.defineProperty(G,"getDocument",{enumerable:!0,get:function(){return x.getDocument}}),Object.defineProperty(G,"getFilenameFromUrl",{enumerable:!0,get:function(){return s.getFilenameFromUrl}}),Object.defineProperty(G,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return s.getPdfFilenameFromUrl}}),Object.defineProperty(G,"getXfaPageViewport",{enumerable:!0,get:function(){return s.getXfaPageViewport}}),Object.defineProperty(G,"isPdfFile",{enumerable:!0,get:function(){return s.isPdfFile}}),Object.defineProperty(G,"loadScript",{enumerable:!0,get:function(){return s.loadScript}}),Object.defineProperty(G,"renderTextLayer",{enumerable:!0,get:function(){return E.renderTextLayer}}),Object.defineProperty(G,"shadow",{enumerable:!0,get:function(){return o.shadow}}),Object.defineProperty(G,"version",{enumerable:!0,get:function(){return x.version}});var o=__w_pdfjs_require__(1),x=__w_pdfjs_require__(4),s=__w_pdfjs_require__(5),O=__w_pdfjs_require__(20),R=__w_pdfjs_require__(13),H=__w_pdfjs_require__(3),E=__w_pdfjs_require__(23),T=__w_pdfjs_require__(24),v=__w_pdfjs_require__(22);if(H.isNodeJS){const{PDFNodeStream:z}=__w_pdfjs_require__(25);(0,x.setPDFNetworkStreamFactory)(N=>new z(N))}else{const{PDFNetworkStream:z}=__w_pdfjs_require__(28),{PDFFetchStream:N}=__w_pdfjs_require__(29);(0,x.setPDFNetworkStreamFactory)(B=>(0,s.isValidFetchUrl)(B.url)?new N(B):new z(B))}})(),__webpack_exports__})(),module.exports=x()},2813:function(G,o,x){var z,s=x(5661).default,O=x(1860).default,R=x(9159).default,H=x(5764).default,E=x(4467).default,T=x(468).default,v=x(7156).default;z=()=>(()=>{"use strict";var D=[,(B,_,t)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DefaultXfaLayerFactory=_.DefaultTextLayerFactory=_.DefaultStructTreeLayerFactory=_.DefaultAnnotationLayerFactory=void 0;var A=t(2),C=t(4),y=t(5),P=t(7),n=t(8),i=t(9);_.DefaultAnnotationLayerFactory=class h{createAnnotationLayerBuilder(u,w,k=null,j="",$=!0,ee=C.NullL10n,te=!1,ae=null,ge=null,de=null,F=null){return new A.AnnotationLayerBuilder({pageDiv:u,pdfPage:w,imageResourcesPath:j,renderForms:$,linkService:new y.SimpleLinkService,l10n:ee,annotationStorage:k,enableScripting:te,hasJSActionsPromise:ae,fieldObjectsPromise:de,mouseState:ge,annotationCanvasMap:F})}},_.DefaultStructTreeLayerFactory=class m{createStructTreeLayerBuilder(u){return new P.StructTreeLayerBuilder({pdfPage:u})}},_.DefaultTextLayerFactory=class d{createTextLayerBuilder(u,w,k,j=!1,$,ee){return new n.TextLayerBuilder({textLayerDiv:u,pageIndex:w,viewport:k,enhanceTextSelection:j,eventBus:$,highlighter:ee})}},_.DefaultXfaLayerFactory=class b{createXfaLayerBuilder(u,w,k=null,j=null){return new i.XfaLayerBuilder({pageDiv:u,pdfPage:w,annotationStorage:k,linkService:new y.SimpleLinkService,xfaHtml:j})}}},(B,_,t)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.AnnotationLayerBuilder=void 0;var A=t(3),C=t(4);_.AnnotationLayerBuilder=class y{constructor({pageDiv:n,pdfPage:i,linkService:h,downloadManager:m,annotationStorage:d=null,imageResourcesPath:b="",renderForms:f=!0,l10n:u=C.NullL10n,enableScripting:w=!1,hasJSActionsPromise:k=null,fieldObjectsPromise:j=null,mouseState:$=null,annotationCanvasMap:ee=null}){this.pageDiv=n,this.pdfPage=i,this.linkService=h,this.downloadManager=m,this.imageResourcesPath=b,this.renderForms=f,this.l10n=u,this.annotationStorage=d,this.enableScripting=w,this._hasJSActionsPromise=k,this._fieldObjectsPromise=j,this._mouseState=$,this._annotationCanvasMap=ee,this.div=null,this._cancelled=!1}render(n,i="display"){var h=this;return v(function*(){const[m,d=!1,b=null]=yield Promise.all([h.pdfPage.getAnnotations({intent:i}),h._hasJSActionsPromise,h._fieldObjectsPromise]);if(h._cancelled||0===m.length)return;const f={viewport:n.clone({dontFlip:!0}),div:h.div,annotations:m,page:h.pdfPage,imageResourcesPath:h.imageResourcesPath,renderForms:h.renderForms,linkService:h.linkService,downloadManager:h.downloadManager,annotationStorage:h.annotationStorage,enableScripting:h.enableScripting,hasJSActions:d,fieldObjects:b,mouseState:h._mouseState,annotationCanvasMap:h._annotationCanvasMap};h.div?A.AnnotationLayer.update(f):(h.div=document.createElement("div"),h.div.className="annotationLayer",h.pageDiv.appendChild(h.div),f.div=h.div,A.AnnotationLayer.render(f),h.l10n.translate(h.div))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},B=>{let _;_=typeof window<"u"&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:x(6036),B.exports=_},(B,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.NullL10n=void 0,_.fixupLangCode=function y(i){return C[i?.toLowerCase()]||i},_.getL10nFallback=A;const t={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function A(i,h){switch(i){case"find_match_count":i=`find_match_count[${1===h.total?"one":"other"}]`;break;case"find_match_count_limit":i=`find_match_count_limit[${1===h.limit?"one":"other"}]`}return t[i]||""}const C={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};_.NullL10n={getLanguage:()=>v(function*(){return"en-us"})(),getDirection:()=>v(function*(){return"ltr"})(),get:(i,h=null,m=A(i,h))=>v(function*(){return function P(i,h){return h?i.replace(/\{\{\s*(\w+)\s*\}\}/g,(m,d)=>d in h?h[d]:"{{"+d+"}}"):i}(m,h)})(),translate:i=>v(function*(){})()}},(B,_,t)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.SimpleLinkService=_.PDFLinkService=_.LinkTarget=void 0;var A=t(6);const y={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function P(f,{url:u,target:w,rel:k,enabled:j=!0}={}){if(!u||"string"!=typeof u)throw new Error('A valid "url" parameter must provided.');const $=(0,A.removeNullCharacters)(u);j?f.href=f.title=$:(f.href="",f.title=`Disabled: ${$}`,f.onclick=()=>!1);let ee="";switch(w){case y.NONE:break;case y.SELF:ee="_self";break;case y.BLANK:ee="_blank";break;case y.PARENT:ee="_parent";break;case y.TOP:ee="_top"}f.target=ee,f.rel="string"==typeof k?k:"noopener noreferrer nofollow"}_.LinkTarget=y;var n=new WeakMap,i=new WeakSet;class h{constructor({eventBus:u,externalLinkTarget:w=null,externalLinkRel:k=null,ignoreDestinationZoom:j=!1}={}){O(this,i),R(this,n,{writable:!0,value:new Map}),this.eventBus=u,this.externalLinkTarget=w,this.externalLinkRel=k,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=j,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(u,w=null){this.baseUrl=w,this.pdfDocument=u,T(this,n).clear()}setViewer(u){this.pdfViewer=u}setHistory(u){this.pdfHistory=u}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(u){this.pdfViewer.currentPageNumber=u}get rotation(){return this.pdfViewer.pagesRotation}set rotation(u){this.pdfViewer.pagesRotation=u}goToDestination(u){var w=this;return v(function*(){if(!w.pdfDocument)return;let k,j;"string"==typeof u?(k=u,j=yield w.pdfDocument.getDestination(u)):(k=null,j=yield u),Array.isArray(j)?E(w,i,m).call(w,u,k,j):console.error(`PDFLinkService.goToDestination: "${j}" is not a valid destination array, for dest="${u}".`)})()}goToPage(u){if(!this.pdfDocument)return;const w="string"==typeof u&&this.pdfViewer.pageLabelToPageNumber(u)||0|u;Number.isInteger(w)&&w>0&&w<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(w)),this.pdfViewer.scrollPageIntoView({pageNumber:w})):console.error(`PDFLinkService.goToPage: "${u}" is not a valid page.`)}addLinkAttributes(u,w,k=!1){P(u,{url:w,target:k?y.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(u){if("string"==typeof u){if(u.length>0)return this.getAnchorUrl("#"+escape(u))}else if(Array.isArray(u)){const w=JSON.stringify(u);if(w.length>0)return this.getAnchorUrl("#"+escape(w))}return this.getAnchorUrl("")}getAnchorUrl(u){return(this.baseUrl||"")+u}setHash(u){if(!this.pdfDocument)return;let w,k;if(u.includes("=")){const j=(0,A.parseQueryString)(u);if(j.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:j.get("search").replace(/"/g,""),phraseSearch:"true"===j.get("phrase")}),j.has("page")&&(w=0|j.get("page")||1),j.has("zoom")){const $=j.get("zoom").split(","),ee=$[0],te=parseFloat(ee);ee.includes("Fit")?"Fit"===ee||"FitB"===ee?k=[null,{name:ee}]:"FitH"===ee||"FitBH"===ee||"FitV"===ee||"FitBV"===ee?k=[null,{name:ee},$.length>1?0|$[1]:null]:"FitR"===ee?5!==$.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):k=[null,{name:ee},0|$[1],0|$[2],0|$[3],0|$[4]]:console.error(`PDFLinkService.setHash: "${ee}" is not a valid zoom value.`):k=[null,{name:"XYZ"},$.length>1?0|$[1]:null,$.length>2?0|$[2]:null,te?te/100:ee]}k?this.pdfViewer.scrollPageIntoView({pageNumber:w||this.page,destArray:k,allowNegativeOffset:!0}):w&&(this.page=w),j.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:j.get("pagemode")}),j.has("nameddest")&&this.goToDestination(j.get("nameddest"))}else{k=unescape(u);try{k=JSON.parse(k),Array.isArray(k)||(k=k.toString())}catch{}if("string"==typeof k||H(h,h,d).call(h,k))return void this.goToDestination(k);console.error(`PDFLinkService.setHash: "${unescape(u)}" is not a valid destination.`)}}executeNamedAction(u){switch(u){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:u})}cachePageRef(u,w){if(!w)return;const k=0===w.gen?`${w.num}R`:`${w.num}R${w.gen}`;T(this,n).set(k,u)}_cachedPageNumber(u){if(!u)return null;const w=0===u.gen?`${u.num}R`:`${u.num}R${u.gen}`;return T(this,n).get(w)||null}isPageVisible(u){return this.pdfViewer.isPageVisible(u)}isPageCached(u){return this.pdfViewer.isPageCached(u)}}function m(f,u=null,w){const k=w[0];let j;if("object"==typeof k&&null!==k){if(j=this._cachedPageNumber(k),!j)return void this.pdfDocument.getPageIndex(k).then($=>{this.cachePageRef($+1,k),E(this,i,m).call(this,f,u,w)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${k}" is not a valid page reference, for dest="${f}".`)})}else{if(!Number.isInteger(k))return void console.error(`PDFLinkService.#goToDestinationHelper: "${k}" is not a valid destination reference, for dest="${f}".`);j=k+1}!j||j<1||j>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${j}" is not a valid page number, for dest="${f}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:u,explicitDest:w,pageNumber:j})),this.pdfViewer.scrollPageIntoView({pageNumber:j,destArray:w,ignoreDestinationZoom:this._ignoreDestinationZoom}))}function d(f){if(!Array.isArray(f))return!1;const u=f.length;if(u<2)return!1;const w=f[0];if(!("object"==typeof w&&Number.isInteger(w.num)&&Number.isInteger(w.gen)||Number.isInteger(w)&&w>=0))return!1;const k=f[1];if("object"!=typeof k||"string"!=typeof k.name)return!1;let j=!0;switch(k.name){case"XYZ":if(5!==u)return!1;break;case"Fit":case"FitB":return 2===u;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==u)return!1;break;case"FitR":if(6!==u)return!1;j=!1;break;default:return!1}for(let $=2;$<u;$++){const ee=f[$];if(!("number"==typeof ee||j&&null===ee))return!1}return!0}_.PDFLinkService=h,_.SimpleLinkService=class b{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(u){}get rotation(){return 0}set rotation(u){}goToDestination(u){return v(function*(){})()}goToPage(u){}addLinkAttributes(u,w,k=!1){P(u,{url:w,enabled:this.externalLinkEnabled})}getDestinationHash(u){return"#"}getAnchorUrl(u){return"#"}setHash(u){}executeNamedAction(u){}cachePageRef(u,w){}isPageVisible(u){return!0}isPageCached(u){return!0}}},(B,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.animationStarted=_.VERTICAL_PADDING=_.UNKNOWN_SCALE=_.TextLayerMode=_.SpreadMode=_.SidebarView=_.ScrollMode=_.SCROLLBAR_PADDING=_.RenderingStates=_.RendererType=_.ProgressBar=_.PresentationModeState=_.OutputScale=_.MIN_SCALE=_.MAX_SCALE=_.MAX_AUTO_SCALE=_.DEFAULT_SCALE_VALUE=_.DEFAULT_SCALE_DELTA=_.DEFAULT_SCALE=_.AutoPrintRegExp=void 0,_.apiPageLayoutToViewerModes=function Te(he){let me=k.VERTICAL,Pe=j.NONE;switch(he){case"SinglePage":me=k.PAGE;break;case"OneColumn":break;case"TwoPageLeft":me=k.PAGE;case"TwoColumnLeft":Pe=j.ODD;break;case"TwoPageRight":me=k.PAGE;case"TwoColumnRight":Pe=j.EVEN}return{scrollMode:me,spreadMode:Pe}},_.apiPageModeToSidebarView=function ye(he){switch(he){case"UseNone":return f.NONE;case"UseThumbs":return f.THUMBS;case"UseOutlines":return f.OUTLINE;case"UseAttachments":return f.ATTACHMENTS;case"UseOC":return f.LAYERS}return f.NONE},_.approximateFraction=function r(he){if(Math.floor(he)===he)return[he,1];const me=1/he;if(me>8)return[1,8];if(Math.floor(me)===me)return[1,me];const le=he>1?me:he;let q,M=0,J=1,fe=1,ve=1;for(;;){const I=M+fe,V=J+ve;if(V>8)break;le<=I/V?(fe=I,ve=V):(M=I,J=V)}return q=le-M/J<fe/ve-le?le===he?[M,J]:[J,M]:le===he?[fe,ve]:[ve,fe],q},_.backtrackBeforeAllVisibleElements=g,_.binarySearchFirstItem=e,_.getActiveOrFocusedElement=function Me(){let he=document,me=he.activeElement||he.querySelector(":focus");for(;me?.shadowRoot;)he=me.shadowRoot,me=he.activeElement||he.querySelector(":focus");return me},_.getPageSizeInches=function p({view:he,userUnit:me,rotate:Pe}){const[le,M,J,fe]=he,ve=Pe%180!=0,q=(J-le)/72*me,I=(fe-M)/72*me;return{width:ve?I:q,height:ve?q:I}},_.getVisibleElements=function c({scrollEl:he,views:me,sortByVisibility:Pe=!1,horizontal:le=!1,rtl:M=!1}){const J=he.scrollTop,fe=J+he.clientHeight,ve=he.scrollLeft,q=ve+he.clientWidth,oe=[],Ce=new Set,ke=me.length;let ce=e(me,le?function V(X){const K=X.div,S=K.offsetLeft+K.clientLeft;return M?S<q:S+K.clientWidth>ve}:function I(X){const K=X.div;return K.offsetTop+K.clientTop+K.clientHeight>J});ce>0&&ce<ke&&!le&&(ce=g(ce,me,J));let pe=le?q:-1;for(let X=ce;X<ke;X++){const K=me[X],S=K.div,ne=S.offsetLeft+S.clientLeft,re=S.offsetTop+S.clientTop,be=S.clientWidth,Le=S.clientHeight,Fe=ne+be,Re=re+Le;if(-1===pe)Re>=fe&&(pe=Re);else if((le?ne:re)>pe)break;if(Re<=J||re>=fe||Fe<=ve||ne>=q)continue;const Oe=Math.max(0,J-re)+Math.max(0,Re-fe),Ne=(be-(Math.max(0,ve-ne)+Math.max(0,Fe-q)))/be;oe.push({id:K.id,x:ne,y:re,view:K,percent:(Le-Oe)/Le*Ne*100|0,widthPercent:100*Ne|0}),Ce.add(K.id)}const Ee=oe[0],we=oe[oe.length-1];return Pe&&oe.sort(function(X,K){const S=X.percent-K.percent;return Math.abs(S)>.001?-S:X.id-K.id}),{first:Ee,last:we,views:oe,ids:Ce}},_.isPortraitOrientation=function se(he){return he.width<=he.height},_.isValidRotation=function Y(he){return Number.isInteger(he)&&he%90==0},_.isValidScrollMode=function Q(he){return Number.isInteger(he)&&Object.values(k).includes(he)&&he!==k.UNKNOWN},_.isValidSpreadMode=function ie(he){return Number.isInteger(he)&&Object.values(j).includes(he)&&he!==j.UNKNOWN},_.noContextMenuHandler=function L(he){he.preventDefault()},_.normalizeWheelEventDelta=function U(he){let me=Z(he);return 0===he.deltaMode?me/=900:1===he.deltaMode&&(me/=30),me},_.normalizeWheelEventDirection=Z,_.parseQueryString=function ge(he){const me=new Map;for(const[Pe,le]of new URLSearchParams(he))me.set(Pe.toLowerCase(),le);return me},_.removeNullCharacters=function a(he,me=!1){return"string"!=typeof he?(console.error("The argument must be a string."),he):(me&&(he=he.replace(F," ")),he.replace(de,""))},_.roundToDivide=function l(he,me){const Pe=he%me;return 0===Pe?he:Math.round(he-Pe+me)},_.scrollIntoView=function te(he,me,Pe=!1){let le=he.offsetParent;if(!le)return void console.error("offsetParent is not set -- cannot scroll");let M=he.offsetTop+he.clientTop,J=he.offsetLeft+he.clientLeft;for(;le.clientHeight===le.scrollHeight&&le.clientWidth===le.scrollWidth||Pe&&(le.classList.contains("markedContent")||"hidden"===getComputedStyle(le).overflow);)if(M+=le.offsetTop,J+=le.offsetLeft,le=le.offsetParent,!le)return;me&&(void 0!==me.top&&(M+=me.top),void 0!==me.left&&(J+=me.left,le.scrollLeft=J)),le.scrollTop=M},_.watchScroll=function ae(he,me){const Pe=function(J){M||(M=window.requestAnimationFrame(function(){M=null;const ve=he.scrollLeft,q=le.lastX;ve!==q&&(le.right=ve>q),le.lastX=ve;const I=he.scrollTop,V=le.lastY;I!==V&&(le.down=I>V),le.lastY=I,me(le)}))},le={right:!0,down:!0,lastX:he.scrollLeft,lastY:he.scrollTop,_eventHandler:Pe};let M=null;return he.addEventListener("scroll",Pe,!0),le},_.DEFAULT_SCALE_VALUE="auto",_.DEFAULT_SCALE=1,_.DEFAULT_SCALE_DELTA=1.1,_.MIN_SCALE=.1,_.MAX_SCALE=10,_.UNKNOWN_SCALE=0,_.MAX_AUTO_SCALE=1.25,_.SCROLLBAR_PADDING=40,_.VERTICAL_PADDING=5,_.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},_.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const f={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};_.SidebarView=f,_.RendererType={CANVAS:"canvas",SVG:"svg"},_.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const k={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};_.ScrollMode=k;const j={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};_.SpreadMode=j,_.AutoPrintRegExp=/\bprint\s*\(/,_.OutputScale=class ee{constructor(){const me=window.devicePixelRatio||1;this.sx=me,this.sy=me}get scaled(){return 1!==this.sx||1!==this.sy}};const de=/\x00/g,F=/[\x01-\x1F]/g;function e(he,me,Pe=0){let le=Pe,M=he.length-1;if(M<0||!me(he[M]))return he.length;if(me(he[le]))return le;for(;le<M;){const J=le+M>>1;me(he[J])?M=J:le=J+1}return le}function g(he,me,Pe){if(he<2)return he;let le=me[he].div,M=le.offsetTop+le.clientTop;M>=Pe&&(le=me[he-1].div,M=le.offsetTop+le.clientTop);for(let J=he-2;J>=0&&(le=me[J].div,!(le.offsetTop+le.clientTop+le.clientHeight<=M));--J)he=J;return he}function Z(he){let me=Math.hypot(he.deltaX,he.deltaY);const Pe=Math.atan2(he.deltaY,he.deltaX);return-.25*Math.PI<Pe&&Pe<.75*Math.PI&&(me=-me),me}const _e=new Promise(function(he){window.requestAnimationFrame(he)});_.animationStarted=_e;var xe=new WeakSet;function ue(){this._indeterminate?this.div.classList.add("indeterminate"):(this.div.classList.remove("indeterminate"),document.documentElement.style.setProperty("--progressBar-percent",`${this._percent}%`))}_.ProgressBar=class Se{constructor(me){if(O(this,xe),arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");this.visible=!0,this.div=document.querySelector(me+" .progress"),this.bar=this.div.parentNode,this.percent=0}get percent(){return this._percent}set percent(me){this._indeterminate=isNaN(me),this._percent=function Ae(he,me,Pe){return Math.min(Math.max(he,me),Pe)}(me,0,100),E(this,xe,ue).call(this)}setWidth(me){if(!me)return;const le=me.parentNode.offsetWidth-me.offsetWidth;le>0&&document.documentElement.style.setProperty("--progressBar-end-offset",`${le}px`)}hide(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}},(B,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.StructTreeLayerBuilder=void 0;const t={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},A=/^H(\d+)$/;_.StructTreeLayerBuilder=class C{constructor({pdfPage:P}){this.pdfPage=P}render(P){return this._walk(P)}_setAttributes(P,n){void 0!==P.alt&&n.setAttribute("aria-label",P.alt),void 0!==P.id&&n.setAttribute("aria-owns",P.id),void 0!==P.lang&&n.setAttribute("lang",P.lang)}_walk(P){if(!P)return null;const n=document.createElement("span");if("role"in P){const{role:i}=P,h=i.match(A);h?(n.setAttribute("role","heading"),n.setAttribute("aria-level",h[1])):t[i]&&n.setAttribute("role",t[i])}if(this._setAttributes(P,n),P.children)if(1===P.children.length&&"id"in P.children[0])this._setAttributes(P.children[0],n);else for(const i of P.children)n.appendChild(this._walk(i));return n}}},(B,_,t)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TextLayerBuilder=void 0;var A=t(3);_.TextLayerBuilder=class y{constructor({textLayerDiv:n,eventBus:i,pageIndex:h,viewport:m,highlighter:d=null,enhanceTextSelection:b=!1}){this.textLayerDiv=n,this.eventBus=i,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=h+1,this.viewport=m,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=d,this.enhanceTextSelection=b,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const n=document.createElement("div");n.className="endOfContent",this.textLayerDiv.appendChild(n)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(n=0){if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr);const i=document.createDocumentFragment();this.textLayerRenderTask=(0,A.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:i,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:n,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.appendChild(i),this._finishRendering(),this.highlighter?.enable()},function(h){})}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable()}setTextContentStream(n){this.cancel(),this.textContentStream=n}setTextContent(n){this.cancel(),this.textContent=n}_bindMouse(){const n=this.textLayerDiv;let i=null;n.addEventListener("mousedown",h=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(i&&(clearTimeout(i),i=null));const m=n.querySelector(".endOfContent");if(!m)return;let d=h.target!==n;if(d=d&&"none"!==window.getComputedStyle(m).getPropertyValue("-moz-user-select"),d){const b=n.getBoundingClientRect(),f=Math.max(0,(h.pageY-b.top)/b.height);m.style.top=(100*f).toFixed(2)+"%"}m.classList.add("active")}),n.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(i=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),i=null},300));const h=n.querySelector(".endOfContent");h&&(h.style.top="",h.classList.remove("active"))})}}},(B,_,t)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.XfaLayerBuilder=void 0;var A=t(3);_.XfaLayerBuilder=class C{constructor({pageDiv:P,pdfPage:n,annotationStorage:i=null,linkService:h,xfaHtml:m=null}){this.pageDiv=P,this.pdfPage=n,this.annotationStorage=i,this.linkService=h,this.xfaHtml=m,this.div=null,this._cancelled=!1}render(P,n="display"){if("print"===n){const i={viewport:P.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n},h=document.createElement("div");this.pageDiv.appendChild(h),i.div=h;const m=A.XfaLayer.render(i);return Promise.resolve(m)}return this.pdfPage.getXfa().then(i=>{if(this._cancelled||!i)return{textDivs:[]};const h={viewport:P.clone({dontFlip:!0}),div:this.div,xfaHtml:i,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n};return this.div?A.XfaLayer.update(h):(this.div=document.createElement("div"),this.pageDiv.appendChild(this.div),h.div=this.div,A.XfaLayer.render(h))}).catch(i=>{console.error(i)})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(B,_,t)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFViewer=_.PDFSinglePageViewer=void 0;var A=t(6),C=t(11);_.PDFViewer=class y extends C.BaseViewer{},_.PDFSinglePageViewer=class P extends C.BaseViewer{_resetView(){super._resetView(),this._scrollMode=A.ScrollMode.PAGE,this._spreadMode=A.SpreadMode.NONE}set scrollMode(i){}_updateScrollMode(){}set spreadMode(i){}_updateSpreadMode(){}}},(B,_,t)=>{let A;Object.defineProperty(_,"__esModule",{value:!0}),_.PagesCountLimit=_.PDFPageViewBuffer=_.BaseViewer=void 0;var C=t(3),y=t(6),P=t(2),n=t(4),i=t(12),h=t(14),m=t(5),d=t(7),b=t(15),f=t(8),u=t(9);const k="enablePermissions",j={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};_.PagesCountLimit=j;var $=new WeakMap,ee=new WeakMap,te=new WeakSet;A=Symbol.iterator;class ae{constructor(M){O(this,te),R(this,$,{writable:!0,value:new Set}),R(this,ee,{writable:!0,value:0}),s(this,ee,M)}push(M){const J=T(this,$);J.has(M)&&J.delete(M),J.add(M),J.size>T(this,ee)&&E(this,te,ge).call(this)}resize(M,J=null){s(this,ee,M);const fe=T(this,$);if(J){const ve=fe.size;let q=1;for(const I of fe)if(J.has(I.id)&&(fe.delete(I),fe.add(I)),++q>ve)break}for(;fe.size>T(this,ee);)E(this,te,ge).call(this)}has(M){return T(this,$).has(M)}[A](){return T(this,$).keys()}}function ge(){const le=T(this,$).keys().next().value;le?.destroy(),T(this,$).delete(le)}_.PDFPageViewBuffer=ae;var de=new WeakMap,F=new WeakMap,a=new WeakMap,e=new WeakMap,r=new WeakMap,l=new WeakMap,p=new WeakMap,g=new WeakSet,c=new WeakSet,L=new WeakSet,Z=new WeakSet,U=new WeakSet,Y=new WeakSet,Q=new WeakSet,ie=new WeakSet,se=new WeakSet;class _e{constructor(M){if(O(this,se),O(this,ie),O(this,Q),O(this,Y),O(this,U),O(this,Z),O(this,L),O(this,c),O(this,g),R(this,de,{writable:!0,value:null}),R(this,F,{writable:!0,value:C.AnnotationMode.ENABLE_FORMS}),R(this,a,{writable:!0,value:null}),R(this,e,{writable:!0,value:!1}),R(this,r,{writable:!0,value:0}),R(this,l,{writable:!0,value:null}),R(this,p,{writable:!0,value:null}),this.constructor===_e)throw new Error("Cannot initialize BaseViewer.");const J="2.14.305";if(C.version!==J)throw new Error(`The API version "${C.version}" does not match the Viewer version "${J}".`);if(this.container=M.container,this.viewer=M.viewer||M.container.firstElementChild,"DIV"!==this.container?.tagName.toUpperCase()||"DIV"!==this.viewer?.tagName.toUpperCase())throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=M.eventBus,this.linkService=M.linkService||new m.SimpleLinkService,this.downloadManager=M.downloadManager||null,this.findController=M.findController||null,this._scriptingManager=M.scriptingManager||null,this.removePageBorders=M.removePageBorders||!1,this.textLayerMode=M.textLayerMode??y.TextLayerMode.ENABLE,s(this,F,M.annotationMode??C.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=M.imageResourcesPath||"",this.enablePrintAutoRotate=M.enablePrintAutoRotate||!1,this.renderer=M.renderer||y.RendererType.CANVAS,this.useOnlyCssZoom=M.useOnlyCssZoom||!1,this.maxCanvasPixels=M.maxCanvasPixels,this.l10n=M.l10n||n.NullL10n,s(this,e,M.enablePermissions||!1),this.pageColors=M.pageColors||null,M.pageColors&&(!CSS.supports("color",M.pageColors.background)||!CSS.supports("color",M.pageColors.foreground))&&((M.pageColors.background||M.pageColors.foreground)&&console.warn("Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!M.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new h.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=M.renderingQueue,this._doc=document.documentElement,this.scroll=(0,y.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=y.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss(),Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView(M){return this._pages[M]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(M){return M?.pdfPage})}get renderForms(){return T(this,F)===C.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(M){if(!Number.isInteger(M))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(M,!0)||console.error(`currentPageNumber: "${M}" is not a valid page.`))}_setCurrentPageNumber(M,J=!1){if(this._currentPageNumber===M)return J&&E(this,Y,Te).call(this),!0;if(!(0<M&&M<=this.pagesCount))return!1;const fe=this._currentPageNumber;return this._currentPageNumber=M,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:M,pageLabel:this._pageLabels?.[M-1]??null,previous:fe}),J&&E(this,Y,Te).call(this),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(M){if(!this.pdfDocument)return;let J=0|M;if(this._pageLabels){const fe=this._pageLabels.indexOf(M);fe>=0&&(J=fe+1)}this._setCurrentPageNumber(J,!0)||console.error(`currentPageLabel: "${M}" is not a valid page.`)}get currentScale(){return this._currentScale!==y.UNKNOWN_SCALE?this._currentScale:y.DEFAULT_SCALE}set currentScale(M){if(isNaN(M))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(M,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(M){this.pdfDocument&&this._setScale(M,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(M){if(!(0,y.isValidRotation)(M))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((M%=360)<0&&(M+=360),this._pagesRotation===M))return;this._pagesRotation=M;const J=this._currentPageNumber,fe={rotation:M};for(const ve of this._pages)ve.update(fe);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:M,pageNumber:J}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(M){var J=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=M,!M)return;const fe=M.isPureXfa,ve=M.numPages,q=M.getPage(1),I=M.getOptionalContentConfig(),V=T(this,e)?M.getPermissions():Promise.resolve();if(ve>j.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const oe=this._scrollMode=y.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:oe})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:ve})},()=>{}),this._onBeforeDraw=oe=>{const Ce=this._pages[oe.pageNumber-1];Ce&&T(this,de).push(Ce)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=oe=>{oe.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:oe.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,T(this,p)&&(document.removeEventListener("visibilitychange",T(this,p)),s(this,p,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([q,V]).then(([oe,Ce])=>{if(M!==this.pdfDocument)return;this._firstPageCapability.resolve(oe),this._optionalContentConfigPromise=I,E(this,g,Ae).call(this,Ce);const ke=this._scrollMode===y.ScrollMode.PAGE?null:this.viewer,ce=this.currentScale,pe=oe.getViewport({scale:ce*C.PixelsPerInch.PDF_TO_CSS_UNITS}),Ee=this.textLayerMode===y.TextLayerMode.DISABLE||fe?null:this,we=T(this,F)!==C.AnnotationMode.DISABLE?this:null,X=fe?this:null;for(let S=1;S<=ve;++S){const ne=new i.PDFPageView({container:ke,eventBus:this.eventBus,id:S,scale:ce,defaultViewport:pe.clone(),optionalContentConfigPromise:I,renderingQueue:this.renderingQueue,textLayerFactory:Ee,textLayerMode:this.textLayerMode,annotationLayerFactory:we,annotationMode:T(this,F),xfaLayerFactory:X,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(ne)}const K=this._pages[0];K&&(K.setPdfPage(oe),this.linkService.cachePageRef(1,oe.ref)),this._scrollMode===y.ScrollMode.PAGE?E(this,L,Se).call(this):this._spreadMode!==y.SpreadMode.NONE&&this._updateSpreadMode(),E(this,c,xe).call(this).then(v(function*(){if(J.findController&&J.findController.setDocument(M),J._scriptingManager&&J._scriptingManager.setDocument(M),M.loadingParams.disableAutoFetch||ve>j.FORCE_LAZY_PAGE_INIT)return void J._pagesCapability.resolve();let S=ve-1;if(S<=0)J._pagesCapability.resolve();else for(let ne=2;ne<=ve;++ne){const re=M.getPage(ne).then(be=>{const Le=J._pages[ne-1];Le.pdfPage||Le.setPdfPage(be),J.linkService.cachePageRef(ne,be.ref),0==--S&&J._pagesCapability.resolve()},be=>{console.error(`Unable to get page ${ne} to initialize viewer`,be),0==--S&&J._pagesCapability.resolve()});ne%j.PAUSE_EAGER_PAGE_INIT==0&&(yield re)}})),this.eventBus.dispatch("pagesinit",{source:this}),M.getMetadata().then(({info:S})=>{M===this.pdfDocument&&S.Language&&(this.viewer.lang=S.Language)}),this.defaultRenderingQueue&&this.update()}).catch(oe=>{console.error("Unable to initialize viewer",oe),this._pagesCapability.reject(oe)})}setPageLabels(M){if(this.pdfDocument){M?Array.isArray(M)&&this.pdfDocument.numPages===M.length?this._pageLabels=M:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let J=0,fe=this._pages.length;J<fe;J++)this._pages[J].setPageLabel(this._pageLabels?.[J]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=y.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,s(this,de,new ae(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,C.createPromiseCapability)(),this._onePageRenderedCapability=(0,C.createPromiseCapability)(),this._pagesCapability=(0,C.createPromiseCapability)(),this._scrollMode=y.ScrollMode.VERTICAL,this._previousScrollMode=y.ScrollMode.UNKNOWN,this._spreadMode=y.SpreadMode.NONE,s(this,l,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),T(this,p)&&(document.removeEventListener("visibilitychange",T(this,p)),s(this,p,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(k),null!==T(this,a)&&(s(this,F,T(this,a)),s(this,a,null))}_scrollUpdate(){0!==this.pagesCount&&this.update()}_setScaleUpdatePages(M,J,fe=!1,ve=!1){if(this._currentScaleValue=J.toString(),E(this,U,Me).call(this,M))return void(ve&&this.eventBus.dispatch("scalechanging",{source:this,scale:M,presetValue:J}));this._doc.style.setProperty("--zoom-factor",M);const q={scale:M};for(const I of this._pages)I.update(q);if(this._currentScale=M,!fe){let V,I=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(I=this._location.pageNumber,V=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:I,destArray:V,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:M,presetValue:ve?J:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==y.SpreadMode.NONE&&this._scrollMode!==y.ScrollMode.HORIZONTAL?2:1}_setScale(M,J=!1){let fe=parseFloat(M);if(fe>0)this._setScaleUpdatePages(fe,M,J,!1);else{const ve=this._pages[this._currentPageNumber-1];if(!ve)return;let q=y.SCROLLBAR_PADDING,I=y.VERTICAL_PADDING;this.isInPresentationMode?q=I=4:this.removePageBorders?q=I=0:this._scrollMode===y.ScrollMode.HORIZONTAL&&([q,I]=[I,q]);const V=(this.container.clientWidth-q)/ve.width*ve.scale/this._pageWidthScaleFactor,oe=(this.container.clientHeight-I)/ve.height*ve.scale;switch(M){case"page-actual":fe=1;break;case"page-width":fe=V;break;case"page-height":fe=oe;break;case"page-fit":fe=Math.min(V,oe);break;case"auto":const Ce=(0,y.isPortraitOrientation)(ve)?V:Math.min(oe,V);fe=Math.min(y.MAX_AUTO_SCALE,Ce);break;default:return void console.error(`_setScale: "${M}" is an unknown zoom value.`)}this._setScaleUpdatePages(fe,M,J,!0)}}pageLabelToPageNumber(M){if(!this._pageLabels)return null;const J=this._pageLabels.indexOf(M);return J<0?null:J+1}scrollPageIntoView({pageNumber:M,destArray:J=null,allowNegativeOffset:fe=!1,ignoreDestinationZoom:ve=!1}){if(!this.pdfDocument)return;const q=Number.isInteger(M)&&this._pages[M-1];if(!q)return void console.error(`scrollPageIntoView: "${M}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!J)return void this._setCurrentPageNumber(M,!0);let ke,ce,I=0,V=0,oe=0,Ce=0;const pe=q.rotation%180!=0,Ee=(pe?q.height:q.width)/q.scale/C.PixelsPerInch.PDF_TO_CSS_UNITS,we=(pe?q.width:q.height)/q.scale/C.PixelsPerInch.PDF_TO_CSS_UNITS;let X=0;switch(J[1].name){case"XYZ":I=J[2],V=J[3],X=J[4],I=null!==I?I:0,V=null!==V?V:we;break;case"Fit":case"FitB":X="page-fit";break;case"FitH":case"FitBH":V=J[2],X="page-width",null===V&&this._location?(I=this._location.left,V=this._location.top):("number"!=typeof V||V<0)&&(V=we);break;case"FitV":case"FitBV":I=J[2],oe=Ee,Ce=we,X="page-height";break;case"FitR":I=J[2],V=J[3],oe=J[4]-I,Ce=J[5]-V,ke=(this.container.clientWidth-(this.removePageBorders?0:y.SCROLLBAR_PADDING))/oe/C.PixelsPerInch.PDF_TO_CSS_UNITS,ce=(this.container.clientHeight-(this.removePageBorders?0:y.VERTICAL_PADDING))/Ce/C.PixelsPerInch.PDF_TO_CSS_UNITS,X=Math.min(Math.abs(ke),Math.abs(ce));break;default:return void console.error(`scrollPageIntoView: "${J[1].name}" is not a valid destination type.`)}if(ve||(X&&X!==this._currentScale?this.currentScaleValue=X:this._currentScale===y.UNKNOWN_SCALE&&(this.currentScaleValue=y.DEFAULT_SCALE_VALUE)),"page-fit"===X&&!J[4])return void E(this,Z,ue).call(this,q);const K=[q.viewport.convertToViewportPoint(I,V),q.viewport.convertToViewportPoint(I+oe,V+Ce)];let S=Math.min(K[0][0],K[1][0]),ne=Math.min(K[0][1],K[1][1]);fe||(S=Math.max(S,0),ne=Math.max(ne,0)),E(this,Z,ue).call(this,q,{left:S,top:ne})}_updateLocation(M){const J=this._currentScale,fe=this._currentScaleValue,ve=parseFloat(fe)===J?Math.round(1e4*J)/100:fe,q=M.id,V=this.container,oe=this._pages[q-1].getPagePoint(V.scrollLeft-M.x,V.scrollTop-M.y),Ce=Math.round(oe[0]),ke=Math.round(oe[1]);let ce=`#page=${q}`;this.isInPresentationMode||(ce+=`&zoom=${ve},${Ce},${ke}`),this._location={pageNumber:q,scale:ve,top:ke,left:Ce,rotation:this._pagesRotation,pdfOpenParams:ce}}update(){const M=this._getVisiblePages(),J=M.views,fe=J.length;if(0===fe)return;const ve=Math.max(10,2*fe+1);T(this,de).resize(ve,M.ids),this.renderingQueue.renderHighestPriority(M);const q=this._spreadMode===y.SpreadMode.NONE&&(this._scrollMode===y.ScrollMode.PAGE||this._scrollMode===y.ScrollMode.VERTICAL),I=this._currentPageNumber;let V=!1;for(const oe of J){if(oe.percent<100)break;if(oe.id===I&&q){V=!0;break}}this._setCurrentPageNumber(V?I:J[0].id),this._updateLocation(M.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(M){return this.container.contains(M)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===y.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===y.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const M=this._scrollMode===y.ScrollMode.PAGE?T(this,l).pages:this._pages,J=this._scrollMode===y.ScrollMode.HORIZONTAL;return(0,y.getVisibleElements)({scrollEl:this.container,views:M,sortByVisibility:!0,horizontal:J,rtl:J&&this._isContainerRtl})}isPageVisible(M){return!!this.pdfDocument&&(Number.isInteger(M)&&M>0&&M<=this.pagesCount?this._getVisiblePages().ids.has(M):(console.error(`isPageVisible: "${M}" is not a valid page.`),!1))}isPageCached(M){if(!this.pdfDocument)return!1;if(!(Number.isInteger(M)&&M>0&&M<=this.pagesCount))return console.error(`isPageCached: "${M}" is not a valid page.`),!1;const J=this._pages[M-1];return T(this,de).has(J)}cleanup(){for(const M of this._pages)M.renderingState!==y.RenderingStates.FINISHED&&M.reset()}_cancelRendering(){for(const M of this._pages)M.cancelRendering()}forceRendering(M){const J=M||this._getVisiblePages(),fe=E(this,ie,me).call(this,J),q=this.renderingQueue.getHighestPriority(J,this._pages,fe,this._spreadMode!==y.SpreadMode.NONE&&this._scrollMode!==y.ScrollMode.HORIZONTAL);return E(this,se,Pe).call(this,J.ids),!!q&&(E(this,Q,ye).call(this,q).then(()=>{this.renderingQueue.renderView(q)}),!0)}createTextLayerBuilder(M,J,fe,ve=!1,q,I){return new f.TextLayerBuilder({textLayerDiv:M,eventBus:q,pageIndex:J,viewport:fe,enhanceTextSelection:!this.isInPresentationMode&&ve,highlighter:I})}createTextHighlighter(M,J){return new b.TextHighlighter({eventBus:J,pageIndex:M,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(M,J,fe=null,ve="",q=!0,I=n.NullL10n,V=null,oe=null,Ce=null,ke=null,ce=null){return new P.AnnotationLayerBuilder({pageDiv:M,pdfPage:J,annotationStorage:fe||this.pdfDocument?.annotationStorage,imageResourcesPath:ve,renderForms:q,linkService:this.linkService,downloadManager:this.downloadManager,l10n:I,enableScripting:V??this.enableScripting,hasJSActionsPromise:oe||this.pdfDocument?.hasJSActions(),fieldObjectsPromise:ke||this.pdfDocument?.getFieldObjects(),mouseState:Ce||this._scriptingManager?.mouseState,annotationCanvasMap:ce})}createXfaLayerBuilder(M,J,fe=null){return new u.XfaLayerBuilder({pageDiv:M,pdfPage:J,annotationStorage:fe||this.pdfDocument?.annotationStorage,linkService:this.linkService})}createStructTreeLayerBuilder(M){return new d.StructTreeLayerBuilder({pdfPage:M})}get hasEqualPageSizes(){const M=this._pages[0];for(let J=1,fe=this._pages.length;J<fe;++J){const ve=this._pages[J];if(ve.width!==M.width||ve.height!==M.height)return!1}return!0}getPagesOverview(){return this._pages.map(M=>{const J=M.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,y.isPortraitOrientation)(J)?{width:J.width,height:J.height,rotation:J.rotation}:{width:J.height,height:J.width,rotation:(J.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(M){if(!(M instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${M}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=M;const J={optionalContentConfigPromise:M};for(const fe of this._pages)fe.update(J);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:M})}get scrollMode(){return this._scrollMode}set scrollMode(M){if(this._scrollMode!==M){if(!(0,y.isValidScrollMode)(M))throw new Error(`Invalid scroll mode: ${M}`);this.pagesCount>j.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=M,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:M}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(M=null){const J=this._scrollMode,fe=this.viewer;fe.classList.toggle("scrollHorizontal",J===y.ScrollMode.HORIZONTAL),fe.classList.toggle("scrollWrapped",J===y.ScrollMode.WRAPPED),this.pdfDocument&&M&&(J===y.ScrollMode.PAGE?E(this,L,Se).call(this):this._previousScrollMode===y.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(M,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(M){if(this._spreadMode!==M){if(!(0,y.isValidSpreadMode)(M))throw new Error(`Invalid spread mode: ${M}`);this._spreadMode=M,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:M}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(M=null){if(!this.pdfDocument)return;const J=this.viewer,fe=this._pages;if(this._scrollMode===y.ScrollMode.PAGE)E(this,L,Se).call(this);else if(J.textContent="",this._spreadMode===y.SpreadMode.NONE)for(const ve of this._pages)J.appendChild(ve.div);else{const ve=this._spreadMode-1;let q=null;for(let I=0,V=fe.length;I<V;++I)null===q?(q=document.createElement("div"),q.className="spread",J.appendChild(q)):I%2===ve&&(q=q.cloneNode(!1),J.appendChild(q)),q.appendChild(fe[I].div)}M&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(M,!0),this.update())}_getPageAdvance(M,J=!1){switch(this._scrollMode){case y.ScrollMode.WRAPPED:{const{views:fe}=this._getVisiblePages(),ve=new Map;for(const{id:q,y:I,percent:V,widthPercent:oe}of fe){if(0===V||oe<100)continue;let Ce=ve.get(I);Ce||ve.set(I,Ce||=[]),Ce.push(q)}for(const q of ve.values()){const I=q.indexOf(M);if(-1===I)continue;const V=q.length;if(1===V)break;if(J)for(let oe=I-1,Ce=0;oe>=Ce;oe--){const ce=q[oe+1]-1;if(q[oe]<ce)return M-ce}else for(let oe=I+1,Ce=V;oe<Ce;oe++){const ce=q[oe-1]+1;if(q[oe]>ce)return ce-M}if(J){const oe=q[0];if(oe<M)return M-oe+1}else{const oe=q[V-1];if(oe>M)return oe-M+1}break}break}case y.ScrollMode.HORIZONTAL:break;case y.ScrollMode.PAGE:case y.ScrollMode.VERTICAL:{if(this._spreadMode===y.SpreadMode.NONE)break;const fe=this._spreadMode-1;if(J&&M%2!==fe)break;if(!J&&M%2===fe)break;const{views:ve}=this._getVisiblePages(),q=J?M-1:M+1;for(const{id:I,percent:V,widthPercent:oe}of ve)if(I===q){if(V>0&&100===oe)return 2;break}break}}return 1}nextPage(){const M=this._currentPageNumber,J=this.pagesCount;if(M>=J)return!1;const fe=this._getPageAdvance(M,!1)||1;return this.currentPageNumber=Math.min(M+fe,J),!0}previousPage(){const M=this._currentPageNumber;if(M<=1)return!1;const J=this._getPageAdvance(M,!0)||1;return this.currentPageNumber=Math.max(M-J,1),!0}increaseScale(M=1){let J=this._currentScale;do{J=(J*y.DEFAULT_SCALE_DELTA).toFixed(2),J=Math.ceil(10*J)/10,J=Math.min(y.MAX_SCALE,J)}while(--M>0&&J<y.MAX_SCALE);this.currentScaleValue=J}decreaseScale(M=1){let J=this._currentScale;do{J=(J/y.DEFAULT_SCALE_DELTA).toFixed(2),J=Math.floor(10*J)/10,J=Math.max(y.MIN_SCALE,J)}while(--M>0&&J>y.MIN_SCALE);this.currentScaleValue=J}updateContainerHeightCss(){const M=this.container.clientHeight;M!==T(this,r)&&(s(this,r,M),this._doc.style.setProperty("--viewer-container-height",`${M}px`))}}function Ae(le){le&&(le.includes(C.PermissionFlag.COPY)||this.viewer.classList.add(k),!le.includes(C.PermissionFlag.MODIFY_ANNOTATIONS)&&!le.includes(C.PermissionFlag.FILL_INTERACTIVE_FORMS)&&T(this,F)===C.AnnotationMode.ENABLE_FORMS&&(s(this,a,T(this,F)),s(this,F,C.AnnotationMode.ENABLE)))}function xe(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const le=new Promise(M=>{s(this,p,()=>{"hidden"===document.visibilityState&&(M(),document.removeEventListener("visibilitychange",T(this,p)),s(this,p,null))}),document.addEventListener("visibilitychange",T(this,p))});return Promise.race([this._onePageRenderedCapability.promise,le])}function Se(){if(this._scrollMode!==y.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const le=this._currentPageNumber,M=T(this,l),J=this.viewer;if(J.textContent="",M.pages.length=0,this._spreadMode!==y.SpreadMode.NONE||this.isInPresentationMode){const fe=new Set,ve=this._spreadMode-1;-1===ve?fe.add(le-1):le%2!==ve?(fe.add(le-1),fe.add(le)):(fe.add(le-2),fe.add(le-1));const q=document.createElement("div");if(q.className="spread",this.isInPresentationMode){const I=document.createElement("div");I.className="dummyPage",q.appendChild(I)}for(const I of fe){const V=this._pages[I];V&&(q.appendChild(V.div),M.pages.push(V))}J.appendChild(q)}else{const fe=this._pages[le-1];J.appendChild(fe.div),M.pages.push(fe)}M.scrollDown=le>=M.previousPageNumber,M.previousPageNumber=le}function ue(le,M=null){const{div:J,id:fe}=le;if(this._scrollMode===y.ScrollMode.PAGE&&(this._setCurrentPageNumber(fe),E(this,L,Se).call(this),this.update()),!M&&!this.isInPresentationMode){const ve=J.offsetLeft+J.clientLeft,q=ve+J.clientWidth,{scrollLeft:I,clientWidth:V}=this.container;(this._scrollMode===y.ScrollMode.HORIZONTAL||ve<I||q>I+V)&&(M={left:0,top:0})}(0,y.scrollIntoView)(J,M)}function Me(le){return le===this._currentScale||Math.abs(le-this._currentScale)<1e-15}function Te(){const le=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),E(this,Z,ue).call(this,le)}function ye(le){return he.apply(this,arguments)}function he(){return(he=v(function*(le){if(le.pdfPage)return le.pdfPage;try{const M=yield this.pdfDocument.getPage(le.id);return le.pdfPage||le.setPdfPage(M),this.linkService._cachedPageNumber?.(M.ref)||this.linkService.cachePageRef(le.id,M.ref),M}catch(M){return console.error("Unable to get page for page view",M),null}})).apply(this,arguments)}function me(le){if(1===le.first?.id)return!0;if(le.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case y.ScrollMode.PAGE:return T(this,l).scrollDown;case y.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function Pe(le){for(const M of le)this._pages[M-1]?.toggleLoadingIconSpinner(!0);for(const M of T(this,de))le.has(M.id)||M.toggleLoadingIconSpinner(!1)}_.BaseViewer=_e},(B,_,t)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFPageView=void 0;var A=t(3),C=t(6),y=t(13),P=t(4);const n=y.compatibilityParams.maxCanvasPixels||16777216;var i=new WeakMap;_.PDFPageView=class h{constructor(d){R(this,i,{writable:!0,value:A.AnnotationMode.ENABLE_FORMS});const b=d.container,f=d.defaultViewport;this.id=d.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=d.scale||C.DEFAULT_SCALE,this.viewport=f,this.pdfPageRotate=f.rotation,this._optionalContentConfigPromise=d.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=d.textLayerMode??C.TextLayerMode.ENABLE,s(this,i,d.annotationMode??A.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=d.imageResourcesPath||"",this.useOnlyCssZoom=d.useOnlyCssZoom||!1,this.maxCanvasPixels=d.maxCanvasPixels||n,this.pageColors=d.pageColors||null,this.eventBus=d.eventBus,this.renderingQueue=d.renderingQueue,this.textLayerFactory=d.textLayerFactory,this.annotationLayerFactory=d.annotationLayerFactory,this.xfaLayerFactory=d.xfaLayerFactory,this.textHighlighter=d.textHighlighterFactory?.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=d.structTreeLayerFactory,this.renderer=d.renderer||C.RendererType.CANVAS,this.l10n=d.l10n||P.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=C.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._annotationCanvasMap=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const u=document.createElement("div");u.className="page",u.style.width=Math.floor(this.viewport.width)+"px",u.style.height=Math.floor(this.viewport.height)+"px",u.setAttribute("data-page-number",this.id),u.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(w=>{u.setAttribute("aria-label",w)}),this.div=u,b?.appendChild(u)}setPdfPage(d){this.pdfPage=d,this.pdfPageRotate=d.rotate,this.viewport=d.getViewport({scale:this.scale*A.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var d=this;return v(function*(){let b=null;try{yield d.annotationLayer.render(d.viewport,"display")}catch(f){b=f}finally{d.eventBus.dispatch("annotationlayerrendered",{source:d,pageNumber:d.id,error:b})}})()}_renderXfaLayer(){var d=this;return v(function*(){let b=null;try{const f=yield d.xfaLayer.render(d.viewport,"display");d.textHighlighter&&d._buildXfaTextContentItems(f.textDivs)}catch(f){b=f}finally{d.eventBus.dispatch("xfalayerrendered",{source:d,pageNumber:d.id,error:b})}})()}_buildXfaTextContentItems(d){var b=this;return v(function*(){const f=yield b.pdfPage.getTextContent(),u=[];for(const w of f.items)u.push(w.str);b.textHighlighter.setTextMapping(d,u),b.textHighlighter.enable()})()}_resetZoomLayer(d=!1){if(!this.zoomLayer)return;const b=this.zoomLayer.firstChild;this.paintedViewportMap.delete(b),b.width=0,b.height=0,d&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:d=!1,keepAnnotationLayer:b=!1,keepXfaLayer:f=!1}={}){this.cancelRendering({keepAnnotationLayer:b,keepXfaLayer:f}),this.renderingState=C.RenderingStates.INITIAL;const u=this.div;u.style.width=Math.floor(this.viewport.width)+"px",u.style.height=Math.floor(this.viewport.height)+"px";const w=u.childNodes,k=d&&this.zoomLayer||null,j=b&&this.annotationLayer?.div||null,$=f&&this.xfaLayer?.div||null;for(let ee=w.length-1;ee>=0;ee--){const te=w[ee];switch(te){case k:case j:case $:continue}te.remove()}u.removeAttribute("data-loaded"),j&&this.annotationLayer.hide(),$&&this.xfaLayer.hide(),k||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(ee=>{this.loadingIconDiv?.setAttribute("aria-label",ee)}),u.appendChild(this.loadingIconDiv)}update({scale:d=0,rotation:b=null,optionalContentConfigPromise:f=null}){if(this.scale=d||this.scale,"number"==typeof b&&(this.rotation=b),f instanceof Promise&&(this._optionalContentConfigPromise=f),this.viewport=this.viewport.clone({scale:this.scale*A.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone){const{style:k}=document.documentElement;k.setProperty("--zoom-factor",this.scale)}if(this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let w=!1;if(this.canvas&&this.maxCanvasPixels>0){const k=this.outputScale;(Math.floor(this.viewport.width)*k.sx|0)*(Math.floor(this.viewport.height)*k.sy|0)>this.maxCanvasPixels&&(w=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&w)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:d=!1,keepXfaLayer:b=!1}={}){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!d||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.xfaLayer&&(!b||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this.textHighlighter?.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:d,redrawAnnotationLayer:b=!1,redrawXfaLayer:f=!1}){const u=this.viewport.width,w=this.viewport.height,k=this.div;d.style.width=d.parentNode.style.width=k.style.width=Math.floor(u)+"px",d.style.height=d.parentNode.style.height=k.style.height=Math.floor(w)+"px";const j=this.viewport.rotation-this.paintedViewportMap.get(d).rotation,$=Math.abs(j);let ee=1,te=1;if((90===$||270===$)&&(ee=w/u,te=u/w),d.style.transform=`rotate(${j}deg) scale(${ee}, ${te})`,this.textLayer){const ae=this.textLayer.viewport,de=Math.abs(this.viewport.rotation-ae.rotation);let F=u/ae.width;(90===de||270===de)&&(F=u/ae.height);const a=this.textLayer.textLayerDiv;let e,r;switch(de){case 0:e=r=0;break;case 90:e=0,r="-"+a.style.height;break;case 180:e="-"+a.style.width,r="-"+a.style.height;break;case 270:e="-"+a.style.width,r=0;break;default:console.error("Bad rotation value.")}a.style.transform=`rotate(${de}deg) scale(${F}) translate(${e}, ${r})`,a.style.transformOrigin="0% 0%"}b&&this.annotationLayer&&this._renderAnnotationLayer(),f&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(d,b){return this.viewport.convertToPdfPoint(d,b)}toggleLoadingIconSpinner(d=!1){this.loadingIconDiv?.classList.toggle("notVisible",!d)}draw(){var d=this;this.renderingState!==C.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:b,pdfPage:f}=this;if(!f)return this.renderingState=C.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=C.RenderingStates.RUNNING;const u=document.createElement("div");u.style.width=b.style.width,u.style.height=b.style.height,u.classList.add("canvasWrapper"),this.annotationLayer?.div?b.insertBefore(u,this.annotationLayer.div):b.appendChild(u);let w=null;if(this.textLayerMode!==C.TextLayerMode.DISABLE&&this.textLayerFactory){const te=document.createElement("div");te.className="textLayer",te.style.width=u.style.width,te.style.height=u.style.height,this.annotationLayer?.div?b.insertBefore(te,this.annotationLayer.div):b.appendChild(te),w=this.textLayerFactory.createTextLayerBuilder(te,this.id-1,this.viewport,this.textLayerMode===C.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=w,T(this,i)!==A.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||=new Map,this.annotationLayer||=this.annotationLayerFactory.createAnnotationLayerBuilder(b,f,null,this.imageResourcesPath,T(this,i)===A.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap)),this.xfaLayer?.div&&b.appendChild(this.xfaLayer.div);let k=null;this.renderingQueue&&(k=te=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=C.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=C.RenderingStates.RUNNING,te()});te()});const j=function(){var te=v(function*(ae=null){if($===d.paintTask&&(d.paintTask=null),ae instanceof A.RenderingCancelledException)d._renderError=null;else if(d._renderError=ae,d.renderingState=C.RenderingStates.FINISHED,d.loadingIconDiv&&(d.loadingIconDiv.remove(),delete d.loadingIconDiv),d._resetZoomLayer(!0),d.eventBus.dispatch("pagerendered",{source:d,pageNumber:d.id,cssTransform:!1,timestamp:performance.now(),error:d._renderError}),ae)throw ae});return function(){return te.apply(this,arguments)}}(),$=this.renderer===C.RendererType.SVG?this.paintOnSvg(u):this.paintOnCanvas(u);$.onRenderContinue=k,this.paintTask=$;const ee=$.promise.then(()=>j(null).then(()=>{if(w){const te=f.streamTextContent({includeMarkedContent:!0});w.setTextContentStream(te),w.render()}this.annotationLayer&&this._renderAnnotationLayer()}),function(te){return j(te)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(b,f,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=te=>{te.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(ae=>{if(!ae||!this.canvas)return;const ge=this.structTreeLayer.render(ae);ge.classList.add("structTree"),this.canvas.appendChild(ge)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(f)),b.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),ee}paintOnCanvas(d){const b=(0,A.createPromiseCapability)(),f={promise:b.promise,onRenderContinue(a){a()},cancel(){F.cancel()}},u=this.viewport,w=document.createElement("canvas");w.hidden=!0;let k=!0;const j=function(){k&&(w.hidden=!1,k=!1)};d.appendChild(w),this.canvas=w;const $=w.getContext("2d",{alpha:!1}),ee=this.outputScale=new C.OutputScale;if(this.useOnlyCssZoom){const a=u.clone({scale:A.PixelsPerInch.PDF_TO_CSS_UNITS});ee.sx*=a.width/u.width,ee.sy*=a.height/u.height}if(this.maxCanvasPixels>0){const e=Math.sqrt(this.maxCanvasPixels/(u.width*u.height));ee.sx>e||ee.sy>e?(ee.sx=e,ee.sy=e,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const te=(0,C.approximateFraction)(ee.sx),ae=(0,C.approximateFraction)(ee.sy);w.width=(0,C.roundToDivide)(u.width*ee.sx,te[0]),w.height=(0,C.roundToDivide)(u.height*ee.sy,ae[0]),w.style.width=(0,C.roundToDivide)(u.width,te[1])+"px",w.style.height=(0,C.roundToDivide)(u.height,ae[1])+"px",this.paintedViewportMap.set(w,u);const de={canvasContext:$,transform:ee.scaled?[ee.sx,0,0,ee.sy,0,0]:null,viewport:this.viewport,annotationMode:T(this,i),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},F=this.pdfPage.render(de);return F.onContinue=function(a){j(),f.onRenderContinue?f.onRenderContinue(a):a()},F.promise.then(function(){j(),b.resolve()},function(a){j(),b.reject(a)}),f}paintOnSvg(d){let b=!1;const f=()=>{if(b)throw new A.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},u=this.pdfPage,w=this.viewport.clone({scale:A.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:u.getOperatorList({annotationMode:T(this,i)}).then(j=>(f(),new A.SVGGraphics(u.commonObjs,u.objs).getSVG(j,w).then(ee=>{f(),this.svg=ee,this.paintedViewportMap.set(ee,w),ee.style.width=d.style.width,ee.style.height=d.style.height,this.renderingState=C.RenderingStates.FINISHED,d.appendChild(ee)}))),onRenderContinue(j){j()},cancel(){b=!0}}}setPageLabel(d){this.pageLabel="string"==typeof d?d:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}},(B,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.compatibilityParams=_.OptionKind=_.AppOptions=void 0;const t=Object.create(null);_.compatibilityParams=t;{const n=navigator.userAgent||"",i=navigator.platform||"",h=navigator.maxTouchPoints||1,m=/Android/.test(n);(/\b(iPad|iPhone|iPod)(?=;)/.test(n)||"MacIntel"===i&&h>1||m)&&(t.maxCanvasPixels=5242880)}const A={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};_.OptionKind=A;const C={annotationMode:{value:2,kind:A.VIEWER+A.PREFERENCE},cursorToolOnLoad:{value:0,kind:A.VIEWER+A.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:A.VIEWER},defaultZoomValue:{value:"",kind:A.VIEWER+A.PREFERENCE},disableHistory:{value:!1,kind:A.VIEWER},disablePageLabels:{value:!1,kind:A.VIEWER+A.PREFERENCE},enablePermissions:{value:!1,kind:A.VIEWER+A.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:A.VIEWER+A.PREFERENCE},enableScripting:{value:!0,kind:A.VIEWER+A.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:A.VIEWER},externalLinkTarget:{value:0,kind:A.VIEWER+A.PREFERENCE},historyUpdateUrl:{value:!1,kind:A.VIEWER+A.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:A.VIEWER+A.PREFERENCE},imageResourcesPath:{value:"./images/",kind:A.VIEWER},maxCanvasPixels:{value:16777216,compatibility:t.maxCanvasPixels,kind:A.VIEWER},pageColorsBackground:{value:"Canvas",kind:A.VIEWER+A.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:A.VIEWER+A.PREFERENCE},pdfBugEnabled:{value:!1,kind:A.VIEWER+A.PREFERENCE},printResolution:{value:150,kind:A.VIEWER},renderer:{value:"canvas",kind:A.VIEWER},sidebarViewOnLoad:{value:-1,kind:A.VIEWER+A.PREFERENCE},scrollModeOnLoad:{value:-1,kind:A.VIEWER+A.PREFERENCE},spreadModeOnLoad:{value:-1,kind:A.VIEWER+A.PREFERENCE},textLayerMode:{value:1,kind:A.VIEWER+A.PREFERENCE},useOnlyCssZoom:{value:!1,kind:A.VIEWER+A.PREFERENCE},viewerCssTheme:{value:0,kind:A.VIEWER+A.PREFERENCE},viewOnLoad:{value:0,kind:A.VIEWER+A.PREFERENCE},cMapPacked:{value:!0,kind:A.API},cMapUrl:{value:"../web/cmaps/",kind:A.API},disableAutoFetch:{value:!1,kind:A.API+A.PREFERENCE},disableFontFace:{value:!1,kind:A.API+A.PREFERENCE},disableRange:{value:!1,kind:A.API+A.PREFERENCE},disableStream:{value:!1,kind:A.API+A.PREFERENCE},docBaseUrl:{value:"",kind:A.API},enableXfa:{value:!0,kind:A.API+A.PREFERENCE},fontExtraProperties:{value:!1,kind:A.API},isEvalSupported:{value:!0,kind:A.API},maxImageSize:{value:-1,kind:A.API},pdfBug:{value:!1,kind:A.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:A.API},verbosity:{value:1,kind:A.API},workerPort:{value:null,kind:A.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:A.WORKER}};C.disablePreferences={value:!1,kind:A.VIEWER},C.locale={value:navigator.language||"en-US",kind:A.VIEWER},C.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:A.VIEWER},C.renderer.kind+=A.PREFERENCE;const y=Object.create(null);_.AppOptions=class P{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(i){const h=y[i];if(void 0!==h)return h;const m=C[i];return void 0!==m?m.compatibility??m.value:void 0}static getAll(i=null){const h=Object.create(null);for(const m in C){const d=C[m];if(i){if(!(i&d.kind))continue;if(i===A.PREFERENCE){const f=d.value,u=typeof f;if("boolean"===u||"string"===u||"number"===u&&Number.isInteger(f)){h[m]=f;continue}throw new Error(`Invalid type for preference: ${m}`)}}const b=y[m];h[m]=void 0!==b?b:d.compatibility??d.value}return h}static set(i,h){y[i]=h}static setAll(i){for(const h in i)y[h]=i[h]}static remove(i){delete y[i]}static _hasUserOptions(){return Object.keys(y).length>0}}},(B,_,t)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFRenderingQueue=void 0;var A=t(3),C=t(6);_.PDFRenderingQueue=class P{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(i){this.pdfViewer=i}setThumbnailViewer(i){this.pdfThumbnailViewer=i}isHighestPriority(i){return this.highestPriorityPage===i.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(i){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(i)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(i,h,m,d=!1){const b=i.views,f=b.length;if(0===f)return null;for(let $=0;$<f;$++){const ee=b[$].view;if(!this.isViewFinished(ee))return ee}const u=i.first.id,w=i.last.id;if(w-u+1>f){const $=i.ids;for(let ee=1,te=w-u;ee<te;ee++){const ae=m?u+ee:w-ee;if($.has(ae))continue;const ge=h[ae-1];if(!this.isViewFinished(ge))return ge}}let k=m?w:u-2,j=h[k];return j&&!this.isViewFinished(j)||d&&(k+=m?1:-1,j=h[k],j&&!this.isViewFinished(j))?j:null}isViewFinished(i){return i.renderingState===C.RenderingStates.FINISHED}renderView(i){switch(i.renderingState){case C.RenderingStates.FINISHED:return!1;case C.RenderingStates.PAUSED:this.highestPriorityPage=i.renderingId,i.resume();break;case C.RenderingStates.RUNNING:this.highestPriorityPage=i.renderingId;break;case C.RenderingStates.INITIAL:this.highestPriorityPage=i.renderingId,i.draw().finally(()=>{this.renderHighestPriority()}).catch(h=>{h instanceof A.RenderingCancelledException||console.error(`renderView: "${h}"`)})}return!0}}},(B,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TextHighlighter=void 0,_.TextHighlighter=class t{constructor({findController:C,eventBus:y,pageIndex:P}){this.findController=C,this.matches=[],this.eventBus=y,this.pageIdx=P,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(C,y){this.textDivs=C,this.textContentItemsStr=y}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=C=>{(C.pageIndex===this.pageIdx||-1===C.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(C,y){if(!C)return[];const{textContentItemsStr:P}=this;let n=0,i=0;const h=P.length-1,m=[];for(let d=0,b=C.length;d<b;d++){let f=C[d];for(;n!==h&&f>=i+P[n].length;)i+=P[n].length,n++;n===P.length&&console.error("Could not find a matching mapping");const u={begin:{divIdx:n,offset:f-i}};for(f+=y[d];n!==h&&f>i+P[n].length;)i+=P[n].length,n++;u.end={divIdx:n,offset:f-i},m.push(u)}return m}_renderMatches(C){if(0===C.length)return;const{findController:y,pageIdx:P}=this,{textContentItemsStr:n,textDivs:i}=this,h=P===y.selected.pageIdx,m=y.selected.matchIdx;let b=null;function u($,ee){const te=$.divIdx;return i[te].textContent="",w(te,0,$.offset,ee)}function w($,ee,te,ae){let ge=i[$];if(ge.nodeType===Node.TEXT_NODE){const a=document.createElement("span");ge.parentNode.insertBefore(a,ge),a.appendChild(ge),i[$]=a,ge=a}const de=n[$].substring(ee,te),F=document.createTextNode(de);if(ae){const a=document.createElement("span");return a.className=`${ae} appended`,a.appendChild(F),ge.appendChild(a),ae.includes("selected")?a.offsetLeft:0}return ge.appendChild(F),0}let k=m,j=k+1;if(y.state.highlightAll)k=0,j=C.length;else if(!h)return;for(let $=k;$<j;$++){const ee=C[$],te=ee.begin,ae=ee.end,ge=h&&$===m,de=ge?" selected":"";let F=0;if(b&&te.divIdx===b.divIdx?w(b.divIdx,b.offset,te.offset):(null!==b&&w(b.divIdx,b.offset,undefined),u(te)),te.divIdx===ae.divIdx)F=w(te.divIdx,te.offset,ae.offset,"highlight"+de);else{F=w(te.divIdx,te.offset,undefined,"highlight begin"+de);for(let a=te.divIdx+1,e=ae.divIdx;a<e;a++)i[a].className="highlight middle"+de;u(ae,"highlight end"+de)}b=ae,ge&&y.scrollMatchIntoView({element:i[te.divIdx],selectedLeft:F,pageIndex:P,matchIndex:m})}b&&w(b.divIdx,b.offset,undefined)}_updateMatches(){if(!this.enabled)return;const{findController:C,matches:y,pageIdx:P}=this,{textContentItemsStr:n,textDivs:i}=this;let h=-1;for(let b=0,f=y.length;b<f;b++){const u=y[b];for(let k=Math.max(h,u.begin.divIdx),j=u.end.divIdx;k<=j;k++){const $=i[k];$.textContent=n[k],$.className=""}h=u.end.divIdx+1}C?.highlightMatches&&(this.matches=this._convertMatches(C.pageMatches[P]||null,C.pageMatchesLength[P]||null),this._renderMatches(this.matches))}}},(B,_,t)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DownloadManager=void 0;var A=t(3);function C(P,n){const i=document.createElement("a");if(!i.click)throw new Error('DownloadManager: "a.click()" is not supported.');i.href=P,i.target="_parent","download"in i&&(i.download=n),(document.body||document.documentElement).appendChild(i),i.click(),i.remove()}_.DownloadManager=class y{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(n,i){(0,A.createValidAbsoluteUrl)(n,"http://example.com")?C(n+"#pdfjs.action=download",i):console.error(`downloadUrl - not a valid URL: ${n}`)}downloadData(n,i,h){C(URL.createObjectURL(new Blob([n],{type:h})),i)}openOrDownloadData(n,i,h){const m=(0,A.isPdfFile)(h),d=m?"application/pdf":"";if(m){let f,b=this._openBlobUrls.get(n);b||(b=URL.createObjectURL(new Blob([i],{type:d})),this._openBlobUrls.set(n,b)),f="?file="+encodeURIComponent(b+"#"+h);try{return window.open(f),!0}catch(u){console.error(`openOrDownloadData: ${u}`),URL.revokeObjectURL(b),this._openBlobUrls.delete(n)}}return this.downloadData(i,h,d),!1}download(n,i,h,m="download"){C(URL.createObjectURL(n),h)}}},(B,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WaitOnType=_.EventBus=_.AutomationEventBus=void 0,_.waitOnEventOrTimeout=function A({target:P,name:n,delay:i=0}){return new Promise(function(h,m){if("object"!=typeof P||!n||"string"!=typeof n||!(Number.isInteger(i)&&i>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function d(w){P instanceof C?P._off(n,b):P.removeEventListener(n,b),u&&clearTimeout(u),h(w)}const b=d.bind(null,t.EVENT);P instanceof C?P._on(n,b):P.addEventListener(n,b);const f=d.bind(null,t.TIMEOUT),u=setTimeout(f,i)})};const t={EVENT:"event",TIMEOUT:"timeout"};_.WaitOnType=t;class C{constructor(){this._listeners=Object.create(null)}on(n,i,h=null){this._on(n,i,{external:!0,once:h?.once})}off(n,i,h=null){this._off(n,i,{external:!0,once:h?.once})}dispatch(n,i){const h=this._listeners[n];if(!h||0===h.length)return;let m;for(const{listener:d,external:b,once:f}of h.slice(0))f&&this._off(n,d),b?(m||=[]).push(d):d(i);if(m){for(const d of m)d(i);m=null}}_on(n,i,h=null){(this._listeners[n]||=[]).push({listener:i,external:!0===h?.external,once:!0===h?.once})}_off(n,i,h=null){const m=this._listeners[n];if(m)for(let d=0,b=m.length;d<b;d++)if(m[d].listener===i)return void m.splice(d,1)}}_.EventBus=C,_.AutomationEventBus=class y extends C{dispatch(n,i){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(B,_,t)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GenericL10n=void 0,t(19);var A=t(4);const C=document.webL10n;_.GenericL10n=class y{constructor(n){this._lang=n,this._ready=new Promise((i,h)=>{C.setLanguage((0,A.fixupLangCode)(n),()=>{i(C)})})}getLanguage(){var n=this;return v(function*(){return(yield n._ready).getLanguage()})()}getDirection(){var n=this;return v(function*(){return(yield n._ready).getDirection()})()}get(n,i=null,h=(0,A.getL10nFallback)(n,i)){var m=this;return v(function*(){return(yield m._ready).get(n,i,h)})()}translate(n){var i=this;return v(function*(){return(yield i._ready).translate(n)})()}}},()=>{document.webL10n=function(B,_,t){var A={},C="",y="textContent",P="",n={},i="loading";function u(a,e,r){e=e||function(g){},r=r||function(){};var l=new XMLHttpRequest;l.open("GET",a,!0),l.overrideMimeType&&l.overrideMimeType("text/plain; charset=utf-8"),l.onreadystatechange=function(){4==l.readyState&&(200==l.status||0===l.status?e(l.responseText):r())},l.onerror=r,l.ontimeout=r;try{l.send(null)}catch{r()}}function k(a,e){a&&(a=a.toLowerCase()),e=e||function(){},function j(){A={},C="",P=""}(),P=a;var r=function m(){return _.querySelectorAll('link[type="application/l10n"]')}(),l=r.length;if(0!==l){var L,Z=0;L=function(){++Z>=l&&(e(),i="complete")};for(var Y=0;Y<l;Y++)new U(r[Y]).load(a,L)}else{var p=function d(){var a=_.querySelector('script[type="application/l10n"]');return a?JSON.parse(a.innerHTML):null}();if(p&&p.locales&&p.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(A=p.locales[a])){var g=p.default_locale.toLowerCase();for(var c in p.locales){if((c=c.toLowerCase())===a){A=p.locales[a];break}c===g&&(A=p.locales[g])}}e()}else console.log("no resource to load, early way out");i="complete"}function U(ie){var se=ie.href;this.load=function(_e,Ae){!function w(a,e,r,l){var p=a.replace(/[^\/]*$/,"")||"./";function g(L){return L.lastIndexOf("\\")<0?L:L.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}u(a,function(L){C+=L,function c(L,Z){var U={},Y=/^\s*|\s*$/,Q=/^\s*#|^\s*$/,ie=/^\s*\[(.*)\]\s*$/,se=/^\s*@import\s+url\((.*)\)\s*$/i,_e=/^([^=\s]*)\s*=\s*(.+)$/;function Ae(Se,ue,Me){var Te=Se.replace(Y,"").split(/[\r\n]+/),ye="*",he=e.split("-",1)[0],me=!1,Pe="";!function le(){for(;;){if(!Te.length)return void Me();var M=Te.shift();if(!Q.test(M)){if(ue){if(Pe=ie.exec(M)){ye=Pe[1].toLowerCase(),me="*"!==ye&&ye!==e&&ye!==he;continue}if(me)continue;if(Pe=se.exec(M))return void xe(p+Pe[1],le)}var J=M.match(_e);J&&3==J.length&&(U[J[1]]=g(J[2]))}}}()}function xe(Se,ue){u(Se,function(Me){Ae(Me,!1,ue)},function(){console.warn(Se+" not found."),ue()})}Ae(L,!0,function(){Z(U)})}(L,function(Z){for(var U in Z){var Y,Q,ie=U.lastIndexOf(".");ie>0?(Y=U.substring(0,ie),Q=U.substring(ie+1)):(Y=U,Q=y),A[Y]||(A[Y]={}),A[Y][Q]=Z[U]}r&&r()})},l)}(se,_e,Ae,function(){console.warn(se+" not found."),console.warn('"'+_e+'" resource not found'),P="",Ae()})}}}function ee(a,e,r){var l=A[a];if(!l){if(console.warn("#"+a+" is undefined."),!r)return null;l=r}var p={};for(var g in l){var c=l[g];c=ae(c=te(c,e,a,g),e,a),p[g]=c}return p}function te(a,e,r,l){var g=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(a);if(!g||!g.length)return a;var Z,c=g[1],L=g[2];return e&&L in e?Z=e[L]:L in A&&(Z=A[L]),c in n&&(a=(0,n[c])(a,Z,r,l)),a}function ae(a,e,r){return a.replace(/\{\{\s*(.+?)\s*\}\}/g,function(p,g){return e&&g in e?e[g]:g in A?A[g]:(console.log("argument {{"+g+"}} for #"+r+" is undefined."),p)})}function ge(a){var e=function f(a){if(!a)return{};var e=a.getAttribute("data-l10n-id"),r=a.getAttribute("data-l10n-args"),l={};if(r)try{l=JSON.parse(r)}catch{console.warn("could not parse arguments for #"+e)}return{id:e,args:l}}(a);if(e.id){var r=ee(e.id,e.args);if(!r)return void console.warn("#"+e.id+" is undefined.");if(r[y]){if(0===function de(a){if(a.children)return a.children.length;if(typeof a.childElementCount<"u")return a.childElementCount;for(var e=0,r=0;r<a.childNodes.length;r++)e+=1===a.nodeType?1:0;return e}(a))a[y]=r[y];else{for(var l=a.childNodes,p=!1,g=0,c=l.length;g<c;g++)3===l[g].nodeType&&/\S/.test(l[g].nodeValue)&&(p?l[g].nodeValue="":(l[g].nodeValue=r[y],p=!0));if(!p){var L=_.createTextNode(r[y]);a.insertBefore(L,a.firstChild)}}delete r[y]}for(var Z in r)a[Z]=r[Z]}}return n.plural=function(a,e,r,l){var p=parseFloat(e);if(isNaN(p)||l!=y)return a;n._pluralRules||(n._pluralRules=function $(a){function r(c,L){return-1!==L.indexOf(c)}function l(c,L,Z){return L<=c&&c<=Z}var p={0:function(c){return"other"},1:function(c){return l(c%100,3,10)?"few":0===c?"zero":l(c%100,11,99)?"many":2==c?"two":1==c?"one":"other"},2:function(c){return 0!==c&&c%10==0?"many":2==c?"two":1==c?"one":"other"},3:function(c){return 1==c?"one":"other"},4:function(c){return l(c,0,1)?"one":"other"},5:function(c){return l(c,0,2)&&2!=c?"one":"other"},6:function(c){return 0===c?"zero":c%10==1&&c%100!=11?"one":"other"},7:function(c){return 2==c?"two":1==c?"one":"other"},8:function(c){return l(c,3,6)?"few":l(c,7,10)?"many":2==c?"two":1==c?"one":"other"},9:function(c){return 0===c||1!=c&&l(c%100,1,19)?"few":1==c?"one":"other"},10:function(c){return l(c%10,2,9)&&!l(c%100,11,19)?"few":c%10!=1||l(c%100,11,19)?"other":"one"},11:function(c){return l(c%10,2,4)&&!l(c%100,12,14)?"few":c%10==0||l(c%10,5,9)||l(c%100,11,14)?"many":c%10==1&&c%100!=11?"one":"other"},12:function(c){return l(c,2,4)?"few":1==c?"one":"other"},13:function(c){return l(c%10,2,4)&&!l(c%100,12,14)?"few":1!=c&&l(c%10,0,1)||l(c%10,5,9)||l(c%100,12,14)?"many":1==c?"one":"other"},14:function(c){return l(c%100,3,4)?"few":c%100==2?"two":c%100==1?"one":"other"},15:function(c){return 0===c||l(c%100,2,10)?"few":l(c%100,11,19)?"many":1==c?"one":"other"},16:function(c){return c%10==1&&11!=c?"one":"other"},17:function(c){return 3==c?"few":0===c?"zero":6==c?"many":2==c?"two":1==c?"one":"other"},18:function(c){return 0===c?"zero":l(c,0,2)&&0!==c&&2!=c?"one":"other"},19:function(c){return l(c,2,10)?"few":l(c,0,1)?"one":"other"},20:function(c){return!l(c%10,3,4)&&c%10!=9||l(c%100,10,19)||l(c%100,70,79)||l(c%100,90,99)?c%1e6==0&&0!==c?"many":c%10!=2||r(c%100,[12,72,92])?c%10!=1||r(c%100,[11,71,91])?"other":"one":"two":"few"},21:function(c){return 0===c?"zero":1==c?"one":"other"},22:function(c){return l(c,0,1)||l(c,11,99)?"one":"other"},23:function(c){return l(c%10,1,2)||c%20==0?"one":"other"},24:function(c){return l(c,3,10)||l(c,13,19)?"few":r(c,[2,12])?"two":r(c,[1,11])?"one":"other"}},g={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[a.replace(/-.*$/,"")];return g in p?p[g]:(console.warn("plural form unknown for ["+a+"]"),function(){return"other"})}(P));var g="["+n._pluralRules(p)+"]";return 0===p&&r+"[zero]"in A?a=A[r+"[zero]"][l]:1==p&&r+"[one]"in A?a=A[r+"[one]"][l]:2==p&&r+"[two]"in A?a=A[r+"[two]"][l]:r+g in A?a=A[r+g][l]:r+"[other]"in A&&(a=A[r+"[other]"][l]),a},{get:function(a,e,r){var g,l=a.lastIndexOf("."),p=y;l>0&&(p=a.substring(l+1),a=a.substring(0,l)),r&&((g={})[p]=r);var c=ee(a,e,g);return c&&p in c?c[p]:"{{"+a+"}}"},getData:function(){return A},getText:function(){return C},getLanguage:function(){return P},setLanguage:function(a,e){k(a,function(){e&&e()})},getDirection:function(){var e=P.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(e)>=0?"rtl":"ltr"},translate:function F(a){for(var e=function b(a){return a?a.querySelectorAll("*[data-l10n-id]"):[]}(a=a||_.documentElement),r=e.length,l=0;l<r;l++)ge(e[l]);ge(a)},getReadyState:function(){return i},ready:function(a){a&&("complete"==i||"interactive"==i?B.setTimeout(function(){a()}):_.addEventListener&&_.addEventListener("localized",function e(){_.removeEventListener("localized",e),a()}))}}}(window,document)},(B,_,t)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFFindController=_.FindState=void 0;var A=t(6),C=t(3),y=t(21);const P={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};_.FindState=P;const m={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},d=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),b=[...d.values()].map(ce=>String.fromCharCode(ce)).join(""),f=/\p{M}+/gu,u=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,w=/([^\p{M}])\p{M}*$/u,k=/^\p{M}*([^\p{M}])/u;let j=null;function $(ce){if(!j){const Le=Object.keys(m).join("");j=new RegExp(`([${Le}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`,"gum")}const pe=[];let Ee;for(;null!==(Ee=f.exec(ce));)pe.push([Ee[0].length,Ee.index]);let we=ce.normalize("NFD");const X=[[0,0]];let K=0,S=0,ne=0,re=0,be=!1;return we=we.replace(j,(Le,Fe,Re,Oe,Ie,De)=>{if(De-=ne,Fe){const Ne=m[Le],Ue=Ne.length;for(let Be=1;Be<Ue;Be++)X.push([De-S+Be,S-Be]);return S-=Ue-1,Ne}if(Re){const Ne=Re.endsWith("\n"),Ue=Ne?Re.length-2:Re.length;be=!0;let Be=Ue;De+re===pe[K]?.[1]&&(Be-=pe[K][0],++K);for(let Ve=1;Ve<Be+1;Ve++)X.push([De-1-S+Ve,S-Ve]);return S-=Be,ne+=Be,Ne?(X.push([(De+=Ue-1)-S+1,1+S]),S+=1,ne+=1,re+=1,Re.slice(0,Ue)):Re}return Oe?(X.push([De-S+1,1+S]),S+=1,ne+=1,re+=1,Oe.charAt(0)):(X.push([De-S+1,S-1]),S-=1,ne+=1,re+=1," ")}),X.push([we.length,S]),[we,X,be]}function ee(ce,pe,Ee){if(!ce)return[pe,Ee];const we=pe,X=pe+Ee;let K=(0,A.binarySearchFirstItem)(ce,ne=>ne[0]>=we);ce[K][0]>we&&--K;let S=(0,A.binarySearchFirstItem)(ce,ne=>ne[0]>=X,K);return ce[S][0]>X&&--S,[we+ce[K][1],Ee+ce[S][1]-ce[K][1]]}var te=new WeakSet,ae=new WeakSet,ge=new WeakMap,de=new WeakSet,F=new WeakSet,a=new WeakSet,e=new WeakSet,r=new WeakSet,l=new WeakSet,p=new WeakSet,g=new WeakSet,c=new WeakSet,L=new WeakSet,Z=new WeakSet,U=new WeakSet,Y=new WeakSet,Q=new WeakSet,ie=new WeakSet,se=new WeakSet,_e=new WeakSet;function xe(ce){if(!ce)return;const pe=this._pdfDocument,{type:Ee}=ce;(null===this._state||E(this,de,Me).call(this,ce))&&(this._dirtyMatch=!0),this._state=ce,"highlightallchange"!==Ee&&E(this,_e,ke).call(this,P.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||pe&&this._pdfDocument!==pe)return;E(this,l,Pe).call(this);const we=!this._highlightMatches,X=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),Ee?this._dirtyMatch?E(this,c,J).call(this):"again"===Ee?(E(this,c,J).call(this),we&&this._state.highlightAll&&E(this,g,M).call(this)):"highlightallchange"===Ee?(X?E(this,c,J).call(this):this._highlightMatches=!0,E(this,g,M).call(this)):E(this,c,J).call(this):this._findTimeout=setTimeout(()=>{E(this,c,J).call(this),this._findTimeout=null},250)})}function Se(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,C.createPromiseCapability)()}function ue(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=$(this._state.query)),this._normalizedQuery}function Me(ce){if(ce.query!==this._state.query)return!0;switch(ce.type){case"again":const pe=this._selected.pageIdx+1,Ee=this._linkService;return pe>=1&&pe<=Ee.pagesCount&&pe!==Ee.page&&!Ee.isPageVisible(pe);case"highlightallchange":return!1}return!0}function Te(ce,pe,Ee){let we=ce.slice(0,pe).match(w);if(we){const X=ce.charCodeAt(pe),K=we[1].charCodeAt(0);if((0,y.getCharacterType)(X)===(0,y.getCharacterType)(K))return!1}if(we=ce.slice(pe+Ee).match(k),we){const X=ce.charCodeAt(pe+Ee-1),K=we[1].charCodeAt(0);if((0,y.getCharacterType)(X)===(0,y.getCharacterType)(K))return!1}return!0}function ye(ce,pe,Ee,we){const X=[],K=[],S=this._pageDiffs[Ee];let ne;for(;null!==(ne=ce.exec(we));){if(pe&&!E(this,F,Te).call(this,we,ne.index,ne[0].length))continue;const[re,be]=ee(S,ne.index,ne[0].length);be&&(X.push(re),K.push(be))}this._pageMatches[Ee]=X,this._pageMatchesLength[Ee]=K}function he(ce,pe){const{matchDiacritics:Ee}=this._state;let we=!1;const X="[ ]*";return(ce=ce.replace(u,(K,S,ne,re,be,Le)=>S?`[ ]*\\${S}[ ]*`:ne?`[ ]*${ne}[ ]*`:re?"[ ]+":Ee?be||Le:be?d.has(be.charCodeAt(0))?be:"":pe?(we=!0,`${Le}\\p{M}*`):Le)).endsWith(X)&&(ce=ce.slice(0,ce.length-X.length)),Ee&&pe&&(we=!0,ce=`${ce}(?=[${b}]|[^\\p{M}]|$)`),[we,ce]}function me(ce){let pe=T(this,ge);if(0===pe.length)return;const{caseSensitive:Ee,entireWord:we,phraseSearch:X}=this._state,K=this._pageContents[ce],S=this._hasDiacritics[ce];let ne=!1;if(X)[ne,pe]=E(this,e,he).call(this,pe,S);else{const Le=pe.match(/\S+/g);Le&&(pe=Le.sort().reverse().map(Fe=>{const[Re,Oe]=E(this,e,he).call(this,Fe,S);return ne||=Re,`(${Oe})`}).join("|"))}pe=new RegExp(pe,`g${ne?"u":""}${Ee?"":"i"}`),E(this,a,ye).call(this,pe,we,ce,K),this._state.highlightAll&&E(this,p,le).call(this,ce),this._resumePageIdx===ce&&(this._resumePageIdx=null,E(this,Z,ve).call(this));const be=this._pageMatches[ce].length;be>0&&(this._matchesCountTotal+=be,E(this,se,Ce).call(this))}function Pe(){if(this._extractTextPromises.length>0)return;let ce=Promise.resolve();for(let pe=0,Ee=this._linkService.pagesCount;pe<Ee;pe++){const we=(0,C.createPromiseCapability)();this._extractTextPromises[pe]=we.promise,ce=ce.then(()=>this._pdfDocument.getPage(pe+1).then(X=>X.getTextContent()).then(X=>{const K=[];for(const S of X.items)K.push(S.str),S.hasEOL&&K.push("\n");[this._pageContents[pe],this._pageDiffs[pe],this._hasDiacritics[pe]]=$(K.join("")),we.resolve()},X=>{console.error(`Unable to get text content for page ${pe+1}`,X),this._pageContents[pe]="",this._pageDiffs[pe]=null,this._hasDiacritics[pe]=!1,we.resolve()}))}}function le(ce){this._scrollMatches&&this._selected.pageIdx===ce&&(this._linkService.page=ce+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:ce})}function M(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}function J(){const ce=this._state.findPrevious,pe=this._linkService.page-1,Ee=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=pe,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,E(this,g,M).call(this);for(let X=0;X<Ee;X++)this._pendingFindMatches.has(X)||(this._pendingFindMatches.add(X),this._extractTextPromises[X].then(()=>{this._pendingFindMatches.delete(X),E(this,r,me).call(this,X)}))}if(""===T(this,ge))return void E(this,_e,ke).call(this,P.FOUND);if(this._resumePageIdx)return;const we=this._offset;if(this._pagesToSearch=Ee,null!==we.matchIdx){if(!ce&&we.matchIdx+1<this._pageMatches[we.pageIdx].length||ce&&we.matchIdx>0)return we.matchIdx=ce?we.matchIdx-1:we.matchIdx+1,void E(this,Y,I).call(this,!0);E(this,U,q).call(this,ce)}E(this,Z,ve).call(this)}function fe(ce){const pe=this._offset,Ee=ce.length,we=this._state.findPrevious;return Ee?(pe.matchIdx=we?Ee-1:0,E(this,Y,I).call(this,!0),!0):(E(this,U,q).call(this,we),!!(pe.wrapped&&(pe.matchIdx=null,this._pagesToSearch<0))&&(E(this,Y,I).call(this,!1),!0))}function ve(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let ce=null;do{const pe=this._offset.pageIdx;if(ce=this._pageMatches[pe],!ce){this._resumePageIdx=pe;break}}while(!E(this,L,fe).call(this,ce))}function q(ce){const pe=this._offset,Ee=this._linkService.pagesCount;pe.pageIdx=ce?pe.pageIdx-1:pe.pageIdx+1,pe.matchIdx=null,this._pagesToSearch--,(pe.pageIdx>=Ee||pe.pageIdx<0)&&(pe.pageIdx=ce?Ee-1:0,pe.wrapped=!0)}function I(ce=!1){let pe=P.NOT_FOUND;const Ee=this._offset.wrapped;if(this._offset.wrapped=!1,ce){const we=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,pe=Ee?P.WRAPPED:P.FOUND,-1!==we&&we!==this._selected.pageIdx&&E(this,p,le).call(this,we)}E(this,_e,ke).call(this,pe,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,E(this,p,le).call(this,this._selected.pageIdx))}function V(ce){const pe=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||pe&&this._pdfDocument!==pe||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),E(this,_e,ke).call(this,P.FOUND),this._highlightMatches=!1,E(this,g,M).call(this))})}function oe(){const{pageIdx:ce,matchIdx:pe}=this._selected;let Ee=0,we=this._matchesCountTotal;if(-1!==pe){for(let X=0;X<ce;X++)Ee+=this._pageMatches[X]?.length||0;Ee+=pe+1}return(Ee<1||Ee>we)&&(Ee=we=0),{current:Ee,total:we}}function Ce(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:E(this,ie,oe).call(this)})}function ke(ce,pe=!1){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:ce,previous:pe,matchesCount:E(this,ie,oe).call(this),rawQuery:this._state?.query??null})}_.PDFFindController=class Ae{constructor({linkService:pe,eventBus:Ee}){O(this,_e),O(this,se),O(this,ie),O(this,Q),O(this,Y),O(this,U),O(this,Z),O(this,L),O(this,c),O(this,g),O(this,p),O(this,l),O(this,r),O(this,e),O(this,a),O(this,F),O(this,de),R(this,ge,{get:ue,set:void 0}),O(this,ae),O(this,te),this._linkService=pe,this._eventBus=Ee,E(this,ae,Se).call(this),Ee._on("find",E(this,te,xe).bind(this)),Ee._on("findbarclose",E(this,Q,V).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(pe){this._pdfDocument&&E(this,ae,Se).call(this),pe&&(this._pdfDocument=pe,this._firstPageCapability.resolve())}scrollMatchIntoView({element:pe=null,selectedLeft:Ee=0,pageIndex:we=-1,matchIndex:X=-1}){this._scrollMatches&&pe&&-1!==X&&X===this._selected.matchIdx&&-1!==we&&we===this._selected.pageIdx&&(this._scrollMatches=!1,(0,A.scrollIntoView)(pe,{top:-50,left:Ee+-400},!0))}}},(B,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CharacterType=void 0,_.getCharacterType=function f(u){return function A(u){return u<11904}(u)?function C(u){return 0==(65408&u)}(u)?function n(u){return 32===u||9===u||13===u||10===u}(u)?t.SPACE:function y(u){return u>=97&&u<=122||u>=65&&u<=90}(u)||function P(u){return u>=48&&u<=57}(u)||95===u?t.ALPHA_LETTER:t.PUNCT:function b(u){return 3584==(65408&u)}(u)?t.THAI_LETTER:160===u?t.SPACE:t.ALPHA_LETTER:function i(u){return u>=13312&&u<=40959||u>=63744&&u<=64255}(u)?t.HAN_LETTER:function h(u){return u>=12448&&u<=12543}(u)?t.KATAKANA_LETTER:function m(u){return u>=12352&&u<=12447}(u)?t.HIRAGANA_LETTER:function d(u){return u>=65376&&u<=65439}(u)?t.HALFWIDTH_KATAKANA_LETTER:t.ALPHA_LETTER};const t={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};_.CharacterType=t},(B,_,t)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFHistory=void 0,_.isDestArraysEqual=d,_.isDestHashesEqual=m;var A=t(6),C=t(17);function i(){return document.location.hash}function m(b,f){return"string"==typeof b&&"string"==typeof f&&(b===f||(0,A.parseQueryString)(b).get("nameddest")===f)}function d(b,f){function u(w,k){if(typeof w!=typeof k||Array.isArray(w)||Array.isArray(k))return!1;if(null!==w&&"object"==typeof w&&null!==k){if(Object.keys(w).length!==Object.keys(k).length)return!1;for(const j in w)if(!u(w[j],k[j]))return!1;return!0}return w===k||Number.isNaN(w)&&Number.isNaN(k)}if(!Array.isArray(b)||!Array.isArray(f)||b.length!==f.length)return!1;for(let w=0,k=b.length;w<k;w++)if(!u(b[w],f[w]))return!1;return!0}_.PDFHistory=class h{constructor({linkService:f,eventBus:u}){this.linkService=f,this.eventBus=u,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",w=>{this._isPagesLoaded=!!w.pagesCount},{once:!0})})}initialize({fingerprint:f,resetHistory:u=!1,updateUrl:w=!1}){if(!f||"string"!=typeof f)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const k=""!==this._fingerprint&&this._fingerprint!==f;this._fingerprint=f,this._updateUrl=!0===w,this._initialized=!0,this._bindEvents();const j=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=i(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(j,!0)||u){const{hash:ee,page:te,rotation:ae}=this._parseCurrentHash(!0);return!ee||k||u?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:ee,page:te,rotation:ae},!0)}const $=j.destination;this._updateInternalState($,j.uid,!0),void 0!==$.rotation&&(this._initialRotation=$.rotation),$.dest?(this._initialBookmark=JSON.stringify($.dest),this._destination.page=null):$.hash?this._initialBookmark=$.hash:$.page&&(this._initialBookmark=`page=${$.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:f=null,explicitDest:u,pageNumber:w}){if(!this._initialized)return;if(f&&"string"!=typeof f)return void console.error(`PDFHistory.push: "${f}" is not a valid namedDest parameter.`);if(!Array.isArray(u))return void console.error(`PDFHistory.push: "${u}" is not a valid explicitDest parameter.`);if(!this._isValidPage(w)&&(null!==w||this._destination))return void console.error(`PDFHistory.push: "${w}" is not a valid pageNumber parameter.`);const k=f||JSON.stringify(u);if(!k)return;let j=!1;if(this._destination&&(m(this._destination.hash,k)||d(this._destination.dest,u))){if(this._destination.page)return;j=!0}this._popStateInProgress&&!j||(this._pushOrReplaceState({dest:u,hash:k,page:w,rotation:this.linkService.rotation},j),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(f){if(this._initialized){if(!this._isValidPage(f))return void console.error(`PDFHistory.pushPage: "${f}" is not a valid page number.`);this._destination?.page!==f&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${f}`,page:f,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const f=window.history.state;this._isValidState(f)&&f.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const f=window.history.state;this._isValidState(f)&&f.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(f,u=!1){const w=u||!this._destination,k={fingerprint:this._fingerprint,uid:w?this._uid:this._uid+1,destination:f};let j;if(this._updateInternalState(f,k.uid),this._updateUrl&&f?.hash){const $=document.location.href.split("#")[0];$.startsWith("file://")||(j=`${$}#${f.hash}`)}w?window.history.replaceState(k,"",j):window.history.pushState(k,"",j)}_tryPushCurrentPosition(f=!1){if(!this._position)return;let u=this._position;if(f&&(u=Object.assign(Object.create(null),this._position),u.temporary=!0),!this._destination)return void this._pushOrReplaceState(u);if(this._destination.temporary)return void this._pushOrReplaceState(u,!0);if(this._destination.hash===u.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let w=!1;if(this._destination.page>=u.first&&this._destination.page<=u.page){if(void 0!==this._destination.dest||!this._destination.first)return;w=!0}this._pushOrReplaceState(u,w)}_isValidPage(f){return Number.isInteger(f)&&f>0&&f<=this.linkService.pagesCount}_isValidState(f,u=!1){if(!f)return!1;if(f.fingerprint!==this._fingerprint){if(!u)return!1;{if("string"!=typeof f.fingerprint||f.fingerprint.length!==this._fingerprint.length)return!1;const[w]=performance.getEntriesByType("navigation");if("reload"!==w?.type)return!1}}return!(!Number.isInteger(f.uid)||f.uid<0||null===f.destination||"object"!=typeof f.destination)}_updateInternalState(f,u,w=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),w&&f?.temporary&&delete f.temporary,this._destination=f,this._uid=u,this._maxUid=Math.max(this._maxUid,u),this._numPositionUpdates=0}_parseCurrentHash(f=!1){const u=unescape(i()).substring(1),w=(0,A.parseQueryString)(u),k=w.get("nameddest")||"";let j=0|w.get("page");return(!this._isValidPage(j)||f&&k.length>0)&&(j=null),{hash:u,page:j,rotation:this.linkService.rotation}}_updateViewarea({location:f}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:f.pdfOpenParams.substring(1),page:this.linkService.page,first:f.pageNumber,rotation:f.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:f}){const u=i(),w=this._currentHash!==u;if(this._currentHash=u,!f){this._uid++;const{hash:j,page:$,rotation:ee}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:j,page:$,rotation:ee},!0)}if(!this._isValidState(f))return;this._popStateInProgress=!0,w&&(this._blockHashChange++,(0,C.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const k=f.destination;this._updateInternalState(k,f.uid,!0),(0,A.isValidRotation)(k.rotation)&&(this.linkService.rotation=k.rotation),k.dest?this.linkService.goToDestination(k.dest):k.hash?this.linkService.setHash(k.hash):k.page&&(this.linkService.page=k.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(B,_,t)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PDFScriptingManager=void 0;var A=t(6),C=t(3);_.PDFScriptingManager=class y{constructor({eventBus:n,sandboxBundleSrc:i=null,scriptingFactory:h=null,docPropertiesLookup:m=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=n,this._sandboxBundleSrc=i,this._scriptingFactory=h,this._docPropertiesLookup=m,this._scriptingFactory||window.addEventListener("updatefromsandbox",d=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:d.detail})})}setViewer(n){this._pdfViewer=n}setDocument(n){var i=this;return v(function*(){if(i._pdfDocument&&(yield i._destroyScripting()),i._pdfDocument=n,!n)return;const[h,m,d]=yield Promise.all([n.getFieldObjects(),n.getCalculationOrderIds(),n.getJSActions()]);if(h||d){if(n===i._pdfDocument){try{i._scripting=i._createScripting()}catch(b){return console.error(`PDFScriptingManager.setDocument: "${b?.message}".`),void(yield i._destroyScripting())}i._internalEvents.set("updatefromsandbox",b=>{b?.source===window&&i._updateFromSandbox(b.detail)}),i._internalEvents.set("dispatcheventinsandbox",b=>{i._scripting?.dispatchEventInSandbox(b.detail)}),i._internalEvents.set("pagechanging",({pageNumber:b,previous:f})=>{b!==f&&(i._dispatchPageClose(f),i._dispatchPageOpen(b))}),i._internalEvents.set("pagerendered",({pageNumber:b})=>{i._pageOpenPending.has(b)&&b===i._pdfViewer.currentPageNumber&&i._dispatchPageOpen(b)}),i._internalEvents.set("pagesdestroy",function(){var b=v(function*(f){yield i._dispatchPageClose(i._pdfViewer.currentPageNumber),yield i._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),i._closeCapability?.resolve()});return function(f){return b.apply(this,arguments)}}()),i._domEvents.set("mousedown",b=>{i._mouseState.isDown=!0}),i._domEvents.set("mouseup",b=>{i._mouseState.isDown=!1});for(const[b,f]of i._internalEvents)i._eventBus._on(b,f);for(const[b,f]of i._domEvents)window.addEventListener(b,f,!0);try{const b=yield i._getDocProperties();if(n!==i._pdfDocument)return;yield i._scripting.createSandbox({objects:h,calculationOrder:m,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...b,actions:d}}),i._eventBus.dispatch("sandboxcreated",{source:i})}catch(b){return console.error(`PDFScriptingManager.setDocument: "${b?.message}".`),void(yield i._destroyScripting())}yield i._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield i._dispatchPageOpen(i._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{n===i._pdfDocument&&(i._ready=!0)})}}else yield i._destroyScripting()})()}dispatchWillSave(n){var i=this;return v(function*(){return i._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(n){var i=this;return v(function*(){return i._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(n){var i=this;return v(function*(){return i._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(n){var i=this;return v(function*(){return i._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,C.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,C.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,C.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,C.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(n){var i=this;return v(function*(){const h=i._pdfViewer.isInPresentationMode||i._pdfViewer.isChangingPresentationMode,{id:m,siblings:d,command:b,value:f}=n;if(!m){switch(b){case"clear":console.clear();break;case"error":console.error(f);break;case"layout":if(h)return;const w=(0,A.apiPageLayoutToViewerModes)(f);i._pdfViewer.spreadMode=w.spreadMode;break;case"page-num":i._pdfViewer.currentPageNumber=f+1;break;case"print":yield i._pdfViewer.pagesPromise,i._eventBus.dispatch("print",{source:i});break;case"println":console.log(f);break;case"zoom":if(h)return;i._pdfViewer.currentScaleValue=f;break;case"SaveAs":i._eventBus.dispatch("save",{source:i});break;case"FirstPage":i._pdfViewer.currentPageNumber=1;break;case"LastPage":i._pdfViewer.currentPageNumber=i._pdfViewer.pagesCount;break;case"NextPage":i._pdfViewer.nextPage();break;case"PrevPage":i._pdfViewer.previousPage();break;case"ZoomViewIn":if(h)return;i._pdfViewer.increaseScale();break;case"ZoomViewOut":if(h)return;i._pdfViewer.decreaseScale()}return}if(h&&n.focus)return;delete n.id,delete n.siblings;const u=d?[m,...d]:[m];for(const w of u){const k=document.getElementById(w);k?k.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:n})):i._pdfDocument?.annotationStorage.setValue(w,n)}})()}_dispatchPageOpen(n,i=!1){var h=this;return v(function*(){const m=h._pdfDocument,d=h._visitedPages;if(i&&(h._closeCapability=(0,C.createPromiseCapability)()),!h._closeCapability)return;const b=h._pdfViewer.getPageView(n-1);if(b?.renderingState!==A.RenderingStates.FINISHED)return void h._pageOpenPending.add(n);h._pageOpenPending.delete(n);const f=v(function*(){const u=yield d.has(n)?null:b.pdfPage?.getJSActions();m===h._pdfDocument&&(yield h._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:n,actions:u}))})();d.set(n,f)})()}_dispatchPageClose(n){var i=this;return v(function*(){const h=i._pdfDocument,m=i._visitedPages;if(!i._closeCapability||i._pageOpenPending.has(n))return;const d=m.get(n);d&&(m.set(n,null),yield d,h===i._pdfDocument&&(yield i._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:n})))})()}_getDocProperties(){var n=this;return v(function*(){if(n._docPropertiesLookup)return n._docPropertiesLookup(n._pdfDocument);const{docPropertiesLookup:i}=t(24);return i(n._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,C.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:n}=t(24);return new n(this._sandboxBundleSrc)}_destroyScripting(){var n=this;return v(function*(){if(!n._scripting)return n._pdfDocument=null,void n._destroyCapability?.resolve();n._closeCapability&&(yield Promise.race([n._closeCapability.promise,new Promise(i=>{setTimeout(i,1e3)})]).catch(i=>{}),n._closeCapability=null),n._pdfDocument=null;try{yield n._scripting.destroySandbox()}catch{}for(const[i,h]of n._internalEvents)n._eventBus._off(i,h);n._internalEvents.clear();for(const[i,h]of n._domEvents)window.removeEventListener(i,h,!0);n._domEvents.clear(),n._pageOpenPending.clear(),n._visitedPages.clear(),n._scripting=null,delete n._mouseState.isDown,n._ready=!1,n._destroyCapability?.resolve()})()}}},(B,_,t)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GenericScripting=void 0,_.docPropertiesLookup=function C(n){return y.apply(this,arguments)};var A=t(3);function y(){return(y=v(function*(n){const h="".split("#")[0];let{info:m,metadata:d,contentDispositionFilename:b,contentLength:f}=yield n.getMetadata();if(!f){const{length:u}=yield n.getDownloadInfo();f=u}return{...m,baseURL:h,filesize:f,filename:b||(0,A.getPdfFilenameFromUrl)(""),metadata:d?.getRaw(),authors:d?.get("dc:creator"),numPages:n.numPages,URL:""}})).apply(this,arguments)}_.GenericScripting=class P{constructor(i){this._ready=(0,A.loadScript)(i,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(i){var h=this;return v(function*(){(yield h._ready).create(i)})()}dispatchEventInSandbox(i){var h=this;return v(function*(){const m=yield h._ready;setTimeout(()=>m.dispatchEvent(i),0)})()}destroySandbox(){var i=this;return v(function*(){(yield i._ready).nukeSandbox()})()}}}],W={};function z(B){var _=W[B];if(void 0!==_)return _.exports;var t=W[B]={exports:{}};return D[B](t,t.exports,z),t.exports}var N={};return(()=>{var B=N;Object.defineProperty(B,"__esModule",{value:!0}),Object.defineProperty(B,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return y.AnnotationLayerBuilder}}),Object.defineProperty(B,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return _.DefaultAnnotationLayerFactory}}),Object.defineProperty(B,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return _.DefaultStructTreeLayerFactory}}),Object.defineProperty(B,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return _.DefaultTextLayerFactory}}),Object.defineProperty(B,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return _.DefaultXfaLayerFactory}}),Object.defineProperty(B,"DownloadManager",{enumerable:!0,get:function(){return P.DownloadManager}}),Object.defineProperty(B,"EventBus",{enumerable:!0,get:function(){return n.EventBus}}),Object.defineProperty(B,"GenericL10n",{enumerable:!0,get:function(){return i.GenericL10n}}),Object.defineProperty(B,"LinkTarget",{enumerable:!0,get:function(){return t.LinkTarget}}),Object.defineProperty(B,"NullL10n",{enumerable:!0,get:function(){return h.NullL10n}}),Object.defineProperty(B,"PDFFindController",{enumerable:!0,get:function(){return m.PDFFindController}}),Object.defineProperty(B,"PDFHistory",{enumerable:!0,get:function(){return d.PDFHistory}}),Object.defineProperty(B,"PDFLinkService",{enumerable:!0,get:function(){return t.PDFLinkService}}),Object.defineProperty(B,"PDFPageView",{enumerable:!0,get:function(){return b.PDFPageView}}),Object.defineProperty(B,"PDFScriptingManager",{enumerable:!0,get:function(){return f.PDFScriptingManager}}),Object.defineProperty(B,"PDFSinglePageViewer",{enumerable:!0,get:function(){return C.PDFSinglePageViewer}}),Object.defineProperty(B,"PDFViewer",{enumerable:!0,get:function(){return C.PDFViewer}}),Object.defineProperty(B,"ProgressBar",{enumerable:!0,get:function(){return A.ProgressBar}}),Object.defineProperty(B,"SimpleLinkService",{enumerable:!0,get:function(){return t.SimpleLinkService}}),Object.defineProperty(B,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return u.StructTreeLayerBuilder}}),Object.defineProperty(B,"TextLayerBuilder",{enumerable:!0,get:function(){return w.TextLayerBuilder}}),Object.defineProperty(B,"XfaLayerBuilder",{enumerable:!0,get:function(){return k.XfaLayerBuilder}}),Object.defineProperty(B,"parseQueryString",{enumerable:!0,get:function(){return A.parseQueryString}});var _=z(1),t=z(5),A=z(6),C=z(10),y=z(2),P=z(16),n=z(17),i=z(18),h=z(4),m=z(20),d=z(22),b=z(12),f=z(23),u=z(7),w=z(8),k=z(9)})(),N})(),G.exports=z()},3414:()=>{},172:()=>{},2001:()=>{},3779:()=>{},6558:()=>{},2258:()=>{},7156:G=>{function o(s,O,R,H,E,T,v){try{var D=s[T](v),W=D.value}catch(z){return void R(z)}D.done?O(W):Promise.resolve(W).then(H,E)}G.exports=function x(s){return function(){var O=this,R=arguments;return new Promise(function(H,E){var T=s.apply(O,R);function v(W){o(T,H,E,v,D,"next",W)}function D(W){o(T,H,E,v,D,"throw",W)}v(void 0)})}},G.exports.__esModule=!0,G.exports.default=G.exports},6521:G=>{G.exports=function o(x,s){if(s.has(x))throw new TypeError("Cannot initialize the same private elements twice on an object")},G.exports.__esModule=!0,G.exports.default=G.exports},8912:G=>{G.exports=function o(x,s){return s.get?s.get.call(x):s.value},G.exports.__esModule=!0,G.exports.default=G.exports},3448:G=>{G.exports=function o(x,s,O){if(s.set)s.set.call(x,O);else{if(!s.writable)throw new TypeError("attempted to set read only private field");s.value=O}},G.exports.__esModule=!0,G.exports.default=G.exports},2625:G=>{G.exports=function o(x,s){if(x!==s)throw new TypeError("Private static access of wrong provenance")},G.exports.__esModule=!0,G.exports.default=G.exports},2506:G=>{G.exports=function o(x,s){if(void 0===x)throw new TypeError("attempted to "+s+" private static field before its declaration")},G.exports.__esModule=!0,G.exports.default=G.exports},4069:G=>{G.exports=function o(x,s,O){if(!s.has(x))throw new TypeError("attempted to "+O+" private field on non-instance");return s.get(x)},G.exports.__esModule=!0,G.exports.default=G.exports},468:(G,o,x)=>{var s=x(8912),O=x(4069);G.exports=function R(H,E){var T=O(H,E,"get");return s(H,T)},G.exports.__esModule=!0,G.exports.default=G.exports},9159:(G,o,x)=>{var s=x(6521);G.exports=function O(R,H,E){s(R,H),H.set(R,E)},G.exports.__esModule=!0,G.exports.default=G.exports},5661:(G,o,x)=>{var s=x(3448),O=x(4069);G.exports=function R(H,E,T){var v=O(H,E,"set");return s(H,v,T),T},G.exports.__esModule=!0,G.exports.default=G.exports},4467:G=>{G.exports=function o(x,s,O){if(!s.has(x))throw new TypeError("attempted to get private field on non-instance");return O},G.exports.__esModule=!0,G.exports.default=G.exports},1860:(G,o,x)=>{var s=x(6521);G.exports=function O(R,H){s(R,H),H.add(R)},G.exports.__esModule=!0,G.exports.default=G.exports},1280:(G,o,x)=>{var s=x(8912),O=x(2625),R=x(2506);G.exports=function H(E,T,v){return O(E,T),R(v,"get"),s(E,v)},G.exports.__esModule=!0,G.exports.default=G.exports},2306:(G,o,x)=>{var s=x(3448),O=x(2625),R=x(2506);G.exports=function H(E,T,v,D){return O(E,T),R(v,"set"),s(E,v,D),D},G.exports.__esModule=!0,G.exports.default=G.exports},5764:(G,o,x)=>{var s=x(2625);G.exports=function O(R,H,E){return s(R,H),E},G.exports.__esModule=!0,G.exports.default=G.exports},8416:(G,o,x)=>{var s=x(4062);G.exports=function O(R,H,E){return(H=s(H))in R?Object.defineProperty(R,H,{value:E,enumerable:!0,configurable:!0,writable:!0}):R[H]=E,R},G.exports.__esModule=!0,G.exports.default=G.exports},5036:(G,o,x)=>{var s=x(8698).default;G.exports=function O(R,H){if("object"!==s(R)||null===R)return R;var E=R[Symbol.toPrimitive];if(void 0!==E){var T=E.call(R,H||"default");if("object"!==s(T))return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===H?String:Number)(R)},G.exports.__esModule=!0,G.exports.default=G.exports},4062:(G,o,x)=>{var s=x(8698).default,O=x(5036);G.exports=function R(H){var E=O(H,"string");return"symbol"===s(E)?E:String(E)},G.exports.__esModule=!0,G.exports.default=G.exports},8698:G=>{function o(x){return G.exports=o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},G.exports.__esModule=!0,G.exports.default=G.exports,o(x)}G.exports=o,G.exports.__esModule=!0,G.exports.default=G.exports}}]);